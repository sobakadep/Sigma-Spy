--[[
	⣿⣿⣿⣿⣿ SIGMA SPY ⣿⣿⣿⣿⣿
	⣿⣿⣯⡉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉
	⠉⠻⣿⣿⣦⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠈⠻⣿⣿⣷⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠀⠀⠀⠙⢿⣿⣿⣦⡀⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠀⠀⠀⠀⠀⣉⣿⣿⣿⠆⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠀⠀⠀⣠⣾⣿⣿⠟⠁⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⢀⣴⣿⣿⡿⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⣀⣴⣿⣿⠟⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⣿⣿⣟⣁⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀
	⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿

	@author depso (depthso)
	@repo https://github.com/depthso
	@license MIT
	@description Sigma Remote Spy for Roblox
    
	This file is COMPILED, check /src folder for the source
	Build scripts are available in /build
]]
local function safe_decode(data)
    local b = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
    data = string.gsub(data, '[^'..b..'=]', '')
    return (data:gsub('.', function(x)
        if (x == '=') then return '' end
        local r, f = '', (b:find(x) - 1)
        for i = 6, 1, -1 do r = r .. (f % 2^i - f % 2^(i-1) > 0 and '1' or '0') end
        return r;
    end):gsub('%d%d%d%d%d%d%d%d', function(x)
        local r = 0
        for i = 1, 8 do r = r + (x:sub(i, i) == '1' and 2^(8 - i) or 0) end
        return string.char(r)
    end))
end
local a,b={UseWorkspace=false,NoActors=false,FolderName='Sigma Spy',RepoUrl=
[[https://raw.githubusercontent.com/sobakadep/Sigma-Spy/refs/heads/main]],
ParserUrl=
[[https://raw.githubusercontent.com/sobakadep/Roblox-parser/refs/heads/main/dist/Main.luau]]
},{...}local c=b[1]if typeof(c)=='table'then for d,e in c do a[d]=e end end
local d=setmetatable({},{__index=function(d,e)local f=game:GetService(e)return
cloneref(f)end})local e=(function()local e,f={UseWorkspace=false,Folder=
'Sigma spy',RepoUrl=nil,FolderStructure={['Sigma Spy']={'assets'}}}function e:
Init(g)local h,i=self.FolderStructure,g.Services f=i.HttpService self:
CheckFolders(h)end function e:PushConfig(g)for h,i in next,g do self[h]=i end
end function e:UrlFetch(g)local h={Url=g:gsub(' ','%%20'),Method='GET'}local i,j
=pcall(request,h)if not i then warn'[!] HTTP request error! Check console (F9)'
warn('> Url:',g)error(j)return''end local k,l=j.Body,j.StatusCode if l==404 then
warn'[!] The file requested has moved or been deleted.'warn(' >',g)return''end
return k,j end function e:MakePath(g)local h=self.Folder return`{h}/{g}`end
function e:LoadCustomasset(g)if not getcustomasset then return end if not g then
return end local h=readfile(g)if#h<=0 then return end local i,j=pcall(
getcustomasset,g)if not i then return end if not j or#j<=0 then return end
return j end function e:GetFile(g,h)local i,j,k,l=self.RepoUrl,self.UseWorkspace
,self:MakePath(g),''if j then l=readfile(k)else l=self:UrlFetch(`{i}/{g}`)end if
h then self:FileCheck(k,function()return l end)return self:LoadCustomasset(k)end
return l end function e:GetTemplate(g)return self:GetFile(`templates/{g}.lua`)
end function e:FileCheck(g,h)if isfile(g)then return end local i=h()writefile(g,
i)end function e:FolderCheck(g)if isfolder(g)then return end makefolder(g)end
function e:CheckPath(g,h)return g and`{g}/{h}`or h end function e:CheckFolders(g
,h)for i,j in next,g do if typeof(j)=='table'then local k=self:CheckPath(h,i)
self:FolderCheck(k)self:CheckFolders(j,k)continue end local k=self:CheckPath(h,j
)self:FolderCheck(k)end end function e:TemplateCheck(g,h)self:FileCheck(g,
function()return self:GetTemplate(h)end)end function e:GetAsset(g,h)return self:
GetFile(`assets/{g}`,h)end function e:GetModule(g,h)local i=`{g}.lua`if h then
self:TemplateCheck(i,h)local j=readfile(i)local k=loadstring(j)if k then return
j end return self:GetTemplate(h)end return self:GetFile(i)end function e:
LoadLibraries(g,...)local h={}for i,j in next,g do local k=typeof(j)=='table'and
j[1]=='base64'j=k and j[2]or j if typeof(j)~='string'and not k then h[i]=j
continue end if k then j = safe_decode(j)g[i]=j end local l,m=loadstring(j,
i)assert(l,`Failed to load {i}: {m}`)h[i]=l(...)end return h end function e:
LoadModules(g,h)for i,j in next,g do local k=j.Init if not k then continue end j
:Init(h)end end function e:CreateFont(g,h)if not h then return end local i=`assets/{
g}.json`local j,k=self:MakePath(i),{name=g,faces={{name='Regular',weight=400,
style='Normal',assetId=h}}}local l=f:JSONEncode(k)writefile(j,l)return j end
function e:CompileModule(g)local h='local Libraries = {'for i,j in g do if
typeof(j)~='string'then continue end h..=`\t{i} = (function()\n{j}\nend)(),\n`
end h..='}'return h end function e:MakeActorScript(g,h)local i=e:CompileModule(g
)i..='\r\n\tlocal ExtraData = {\r\n\t\tIsActor = true\r\n\t}\r\n\t'i..=`Libraries.Hook:BeginService(Libraries, ExtraData, {
h})`return i end return e end)()e:PushConfig(a)e:Init{Services=d}local f=e.
FolderName local g,h={Config=e:GetModule(`{f}/Config`,'Config'),ReturnSpoofs=e:
GetModule(`{f}/Return spoofs`,'Return Spoofs'),Configuration=a,Files=e,Process={
'base64',
[[dHlwZSB0YWJsZSA9IHsNCiAgICBbYW55XTogYW55DQp9DQoNCnR5cGUgUmVtb3RlRGF0YSA9IHsNCglSZW1vdGU6IEluc3RhbmNlLA0KICAgIE5vQmFja3RyYWNlOiBib29sZWFuPywNCglJc1JlY2VpdmU6IGJvb2xlYW4/LA0KCUFyZ3M6IHRhYmxlLA0KICAgIElkOiBzdHJpbmcsDQoJTWV0aG9kOiBzdHJpbmcsDQogICAgVHJhbnNmZXJUeXBlOiBzdHJpbmcsDQoJVmFsdWVSZXBsYWNlbWVudHM6IHRhYmxlLA0KICAgIFJldHVyblZhbHVlczogdGFibGUsDQogICAgT3JpZ2luYWxGdW5jOiAoSW5zdGFuY2UsIC4uLmFueSkgLT4gLi4uYW55DQp9DQoNCi0tLy8gTW9kdWxlDQpsb2NhbCBQcm9jZXNzID0gew0KICAgIC0tLy8gUmVtb3RlIGNsYXNzZXMNCiAgICBSZW1vdGVDbGFzc0RhdGEgPSB7DQogICAgICAgIFsiUmVtb3RlRXZlbnQiXSA9IHsNCiAgICAgICAgICAgIFNlbmQgPSB7DQogICAgICAgICAgICAgICAgIkZpcmVTZXJ2ZXIiLA0KICAgICAgICAgICAgICAgICJmaXJlU2VydmVyIiwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBSZWNlaXZlID0gew0KICAgICAgICAgICAgICAgICJPbkNsaWVudEV2ZW50IiwNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgWyJSZW1vdGVGdW5jdGlvbiJdID0gew0KICAgICAgICAgICAgSXNSZW1vdGVGdW5jdGlvbiA9IHRydWUsDQogICAgICAgICAgICBTZW5kID0gew0KICAgICAgICAgICAgICAgICJJbnZva2VTZXJ2ZXIiLA0KICAgICAgICAgICAgICAgICJpbnZva2VTZXJ2ZXIiLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIFJlY2VpdmUgPSB7DQogICAgICAgICAgICAgICAgIk9uQ2xpZW50SW52b2tlIiwNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgWyJVbnJlbGlhYmxlUmVtb3RlRXZlbnQiXSA9IHsNCiAgICAgICAgICAgIFNlbmQgPSB7DQogICAgICAgICAgICAgICAgIkZpcmVTZXJ2ZXIiLA0KICAgICAgICAgICAgICAgICJmaXJlU2VydmVyIiwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBSZWNlaXZlID0gew0KICAgICAgICAgICAgICAgICJPbkNsaWVudEV2ZW50IiwNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgWyJCaW5kYWJsZUV2ZW50Il0gPSB7DQogICAgICAgICAgICBOb1JlY2l2ZUhvb2sgPSB0cnVlLA0KICAgICAgICAgICAgU2VuZCA9IHsNCiAgICAgICAgICAgICAgICAiRmlyZSIsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgUmVjZWl2ZSA9IHsNCiAgICAgICAgICAgICAgICAiRXZlbnQiLA0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBbIkJpbmRhYmxlRnVuY3Rpb24iXSA9IHsNCiAgICAgICAgICAgIElzUmVtb3RlRnVuY3Rpb24gPSB0cnVlLA0KICAgICAgICAgICAgTm9SZWNpdmVIb29rID0gdHJ1ZSwNCiAgICAgICAgICAgIFNlbmQgPSB7DQogICAgICAgICAgICAgICAgIkludm9rZSIsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgUmVjZWl2ZSA9IHsNCiAgICAgICAgICAgICAgICAiT25JbnZva2UiLA0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCiAgICBSZW1vdGVPcHRpb25zID0ge30sDQogICAgTG9vcGluZ1JlbW90ZXMgPSB7fSwNCiAgICBDb25maWdPdmVyd3JpdGVzID0gew0KICAgICAgICBbeyJzaXJodXJ0IiwgInBvdGFzc2l1bSIsICJ3YXZlIn1dID0gew0KICAgICAgICAgICAgRm9yY2VVc2VDdXN0b21Db21tID0gdHJ1ZQ0KICAgICAgICB9DQogICAgfQ0KfQ0KDQotLS8vIE1vZHVsZXMNCmxvY2FsIEhvb2sNCmxvY2FsIENvbW11bmljYXRpb24NCmxvY2FsIFJldHVyblNwb29mcw0KbG9jYWwgVWkNCmxvY2FsIENvbmZpZw0KDQotLS8vIFNlcnZpY2VzDQpsb2NhbCBIdHRwU2VydmljZTogSHR0cFNlcnZpY2UNCg0KLS0vLyBDb21tdW5pY2F0aW9uIGNoYW5uZWwNCmxvY2FsIENoYW5uZWwNCmxvY2FsIFdyYXBwZWRDaGFubmVsID0gZmFsc2UNCg0KbG9jYWwgU2lnbWFFTlYgPSBnZXRmZW52KDEpDQoNCmZ1bmN0aW9uIFByb2Nlc3M6TWVyZ2UoQmFzZTogdGFibGUsIE5ldzogdGFibGUpDQogICAgaWYgbm90IE5ldyB0aGVuIHJldHVybiBlbmQNCglmb3IgS2V5LCBWYWx1ZSBpbiBuZXh0LCBOZXcgZG8NCgkJQmFzZVtLZXldID0gVmFsdWUNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkluaXQoRGF0YSkNCiAgICBsb2NhbCBNb2R1bGVzID0gRGF0YS5Nb2R1bGVzDQogICAgbG9jYWwgU2VydmljZXMgPSBEYXRhLlNlcnZpY2VzDQoNCiAgICAtLS8vIFNlcnZpY2VzDQogICAgSHR0cFNlcnZpY2UgPSBTZXJ2aWNlcy5IdHRwU2VydmljZQ0KDQogICAgLS0vLyBNb2R1bGVzDQogICAgQ29uZmlnID0gTW9kdWxlcy5Db25maWcNCiAgICBVaSA9IE1vZHVsZXMuVWkNCiAgICBIb29rID0gTW9kdWxlcy5Ib29rDQogICAgQ29tbXVuaWNhdGlvbiA9IE1vZHVsZXMuQ29tbXVuaWNhdGlvbg0KICAgIFJldHVyblNwb29mcyA9IE1vZHVsZXMuUmV0dXJuU3Bvb2ZzDQplbmQNCg0KLS0vLyBDb21tdW5pY2F0aW9uDQpmdW5jdGlvbiBQcm9jZXNzOlNldENoYW5uZWwoTmV3Q2hhbm5lbDogQmluZGFibGVFdmVudCwgSXNXcmFwcGVkOiBib29sZWFuKQ0KICAgIENoYW5uZWwgPSBOZXdDaGFubmVsDQogICAgV3JhcHBlZENoYW5uZWwgPSBJc1dyYXBwZWQNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkdldENvbmZpZ092ZXJ3cml0ZXMoTmFtZTogc3RyaW5nKQ0KICAgIGxvY2FsIENvbmZpZ092ZXJ3cml0ZXMgPSBzZWxmLkNvbmZpZ092ZXJ3cml0ZXMNCg0KICAgIGZvciBMaXN0LCBPdmVyd3JpdGVzIGluIG5leHQsIENvbmZpZ092ZXJ3cml0ZXMgZG8NCiAgICAgICAgaWYgbm90IHRhYmxlLmZpbmQoTGlzdCwgTmFtZSkgdGhlbiBjb250aW51ZSBlbmQNCiAgICAgICAgcmV0dXJuIE92ZXJ3cml0ZXMNCiAgICBlbmQNCiAgICByZXR1cm4NCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkNoZWNrQ29uZmlnKENvbmZpZzogdGFibGUpDQogICAgbG9jYWwgTmFtZSA9IGlkZW50aWZ5ZXhlY3V0b3IoKTpsb3dlcigpDQoNCiAgICAtLS8vIEZvcmNlIGNvbmZpZ3VyYXRpb24gb3ZlcndyaXRlcyBmb3Igc3BlY2lmaWMgZXhlY3V0b3JzDQogICAgbG9jYWwgT3ZlcndyaXRlcyA9IHNlbGY6R2V0Q29uZmlnT3ZlcndyaXRlcyhOYW1lKQ0KICAgIGlmIG5vdCBPdmVyd3JpdGVzIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgc2VsZjpNZXJnZShDb25maWcsIE92ZXJ3cml0ZXMpDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpDbGVhbkNFcnJvcihFcnJvcjogc3RyaW5nKTogc3RyaW5nDQogICAgRXJyb3IgPSBFcnJvcjpnc3ViKCI6JWQrOiAiLCAiIikNCiAgICBFcnJvciA9IEVycm9yOmdzdWIoIiwgZ290ICVhKyIsICIiKQ0KICAgIEVycm9yID0gRXJyb3I6Z3N1YigiaW52YWxpZCBhcmd1bWVudCIsICJtaXNzaW5nIGFyZ3VtZW50IikNCiAgICByZXR1cm4gRXJyb3INCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkNvdW50TWF0Y2hlcyhTdHJpbmc6IHN0cmluZywgTWF0Y2g6IHN0cmluZyk6IG51bWJlcg0KCWxvY2FsIENvdW50ID0gMA0KCWZvciBfIGluIFN0cmluZzpnbWF0Y2goTWF0Y2gpIGRvDQoJCUNvdW50ICs9MSANCgllbmQNCg0KCXJldHVybiBDb3VudA0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6Q2hlY2tWYWx1ZShWYWx1ZSwgSWdub3JlOiB0YWJsZT8sIENhY2hlOiB0YWJsZT8pDQogICAgbG9jYWwgVHlwZSA9IHR5cGVvZihWYWx1ZSkNCiAgICBDb21tdW5pY2F0aW9uOldhaXRDaGVjaygpDQogICAgDQogICAgaWYgVHlwZSA9PSAidGFibGUiIHRoZW4NCiAgICAgICAgVmFsdWUgPSBzZWxmOkRlZXBDbG9uZVRhYmxlKFZhbHVlLCBJZ25vcmUsIENhY2hlKQ0KICAgIGVsc2VpZiBUeXBlID09ICJJbnN0YW5jZSIgdGhlbg0KICAgICAgICBWYWx1ZSA9IGNsb25lcmVmKFZhbHVlKQ0KICAgIGVuZA0KICAgIA0KICAgIHJldHVybiBWYWx1ZQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6RGVlcENsb25lVGFibGUoVGFibGUsIElnbm9yZTogdGFibGU/LCBWaXNpdGVkOiB0YWJsZT8pOiB0YWJsZQ0KICAgIGlmIHR5cGVvZihUYWJsZSkgfj0gInRhYmxlIiB0aGVuIHJldHVybiBUYWJsZSBlbmQNCiAgICBsb2NhbCBDYWNoZSA9IFZpc2l0ZWQgb3Ige30NCg0KICAgIC0tLy8gQ2hlY2sgZm9yIGNhY2hlZA0KICAgIGlmIENhY2hlW1RhYmxlXSB0aGVuDQogICAgICAgIHJldHVybiBDYWNoZVtUYWJsZV0NCiAgICBlbmQNCg0KICAgIGxvY2FsIE5ldyA9IHt9DQogICAgQ2FjaGVbVGFibGVdID0gTmV3DQoNCiAgICBmb3IgS2V5LCBWYWx1ZSBpbiBuZXh0LCBUYWJsZSBkbw0KICAgICAgICAtLS8vIENoZWNrIGlmIHRoZSB2YWx1ZSBpcyBpZ25vcmVkDQogICAgICAgIGlmIElnbm9yZSBhbmQgdGFibGUuZmluZChJZ25vcmUsIFZhbHVlKSB0aGVuIGNvbnRpbnVlIGVuZA0KICAgICAgICANCiAgICAgICAgS2V5ID0gc2VsZjpDaGVja1ZhbHVlKEtleSwgSWdub3JlLCBDYWNoZSkNCiAgICAgICAgTmV3W0tleV0gPSBzZWxmOkNoZWNrVmFsdWUoVmFsdWUsIElnbm9yZSwgQ2FjaGUpDQogICAgZW5kDQoNCiAgICAtLS8vIE1hc3RlciBjbGVhcg0KICAgIGlmIG5vdCBWaXNpdGVkIHRoZW4NCiAgICAgICAgdGFibGUuY2xlYXIoQ2FjaGUpDQogICAgZW5kDQogICAgDQogICAgcmV0dXJuIE5ldw0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6VW5wYWNrKFRhYmxlOiB0YWJsZSkNCiAgICBpZiBub3QgVGFibGUgdGhlbiByZXR1cm4gVGFibGUgZW5kDQoJbG9jYWwgTGVuZ3RoID0gdGFibGUubWF4bihUYWJsZSkNCglyZXR1cm4gdW5wYWNrKFRhYmxlLCAxLCBMZW5ndGgpDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpQdXNoQ29uZmlnKE92ZXJ3cml0ZXMpDQogICAgc2VsZjpNZXJnZShzZWxmLCBPdmVyd3JpdGVzKQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6RnVuY0V4aXN0cyhOYW1lOiBzdHJpbmcpDQoJcmV0dXJuIFNpZ21hRU5WW05hbWVdDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpDaGVja0V4ZWN1dG9yKCk6IGJvb2xlYW4NCiAgICBsb2NhbCBCbGFja2xpc3RlZCA9IHsNCiAgICAgICAgInhlbm8iLA0KICAgICAgICAic29sYXJhIiwNCiAgICAgICAgImpqc3Bsb2l0Ig0KICAgIH0NCg0KICAgIGxvY2FsIE5hbWUgPSBpZGVudGlmeWV4ZWN1dG9yKCk6bG93ZXIoKQ0KICAgIGxvY2FsIElzQmxhY2tsaXN0ZWQgPSB0YWJsZS5maW5kKEJsYWNrbGlzdGVkLCBOYW1lKQ0KDQogICAgLS0vLyBTb21lIGV4ZWN1dG9ycyBoYXZlIGJyb2tlbiBmdW5jdGlvbmFsaXR5DQogICAgaWYgSXNCbGFja2xpc3RlZCB0aGVuDQogICAgICAgIFVpOlNob3dVbnN1cHBvcnRlZEV4ZWN1dG9yKE5hbWUpDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KDQogICAgcmV0dXJuIHRydWUNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkNoZWNrRnVuY3Rpb25zKCk6IGJvb2xlYW4NCiAgICBsb2NhbCBDb3JlRnVuY3Rpb25zID0gew0KICAgICAgICAiaG9va21ldGFtZXRob2QiLA0KICAgICAgICAiaG9va2Z1bmN0aW9uIiwNCiAgICAgICAgImdldHJhd21ldGF0YWJsZSIsDQogICAgICAgICJzZXRyZWFkb25seSINCiAgICB9DQoNCiAgICAtLS8vIENoZWNrIGlmIHRoZSBmdW5jdGlvbnMgZXhpc3QgaW4gdGhlIEVOVg0KICAgIGZvciBfLCBOYW1lIGluIENvcmVGdW5jdGlvbnMgZG8NCiAgICAgICAgbG9jYWwgRnVuYyA9IHNlbGY6RnVuY0V4aXN0cyhOYW1lKQ0KICAgICAgICBpZiBGdW5jIHRoZW4gY29udGludWUgZW5kDQoNCiAgICAgICAgLS0vLyBGdW5jdGlvbiBtaXNzaW5nIQ0KICAgICAgICBVaTpTaG93VW5zdXBwb3J0ZWQoTmFtZSkNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgZW5kDQoNCiAgICByZXR1cm4gdHJ1ZQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6Q2hlY2tJc1N1cHBvcnRlZCgpOiBib29sZWFuDQogICAgLS0vLyBDaGVjayBpZiB0aGUgZXhlY3V0b3IgaXMgYmxhY2tsaXN0ZWQNCiAgICBsb2NhbCBFeGVjdXRvclN1cHBvcnRlZCA9IHNlbGY6Q2hlY2tFeGVjdXRvcigpDQogICAgaWYgbm90IEV4ZWN1dG9yU3VwcG9ydGVkIHRoZW4NCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgZW5kDQoNCiAgICAtLS8vIENoZWNrIGlmIHRoZSBjb3JlIGZ1bmN0aW9ucyBleGlzdA0KICAgIGxvY2FsIEZ1bmN0aW9uc1N1cHBvcnRlZCA9IHNlbGY6Q2hlY2tGdW5jdGlvbnMoKQ0KICAgIGlmIG5vdCBGdW5jdGlvbnNTdXBwb3J0ZWQgdGhlbg0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICBlbmQNCg0KICAgIHJldHVybiB0cnVlDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpHZXRDbGFzc0RhdGEoUmVtb3RlOiBJbnN0YW5jZSk6IHRhYmxlPw0KICAgIGxvY2FsIFJlbW90ZUNsYXNzRGF0YSA9IHNlbGYuUmVtb3RlQ2xhc3NEYXRhDQogICAgbG9jYWwgQ2xhc3NOYW1lID0gSG9vazpJbmRleChSZW1vdGUsICJDbGFzc05hbWUiKQ0KDQogICAgcmV0dXJuIFJlbW90ZUNsYXNzRGF0YVtDbGFzc05hbWVdDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpJc1Byb3RlY3RlZFJlbW90ZShSZW1vdGU6IEluc3RhbmNlKTogYm9vbGVhbg0KICAgIGxvY2FsIElzRGVidWcgPSBSZW1vdGUgPT0gQ29tbXVuaWNhdGlvbi5EZWJ1Z0lkUmVtb3RlDQogICAgbG9jYWwgSXNDaGFubmVsID0gUmVtb3RlID09IChXcmFwcGVkQ2hhbm5lbCBhbmQgQ2hhbm5lbC5DaGFubmVsIG9yIENoYW5uZWwpDQoNCiAgICByZXR1cm4gSXNEZWJ1ZyBvciBJc0NoYW5uZWwNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOlJlbW90ZUFsbG93ZWQoUmVtb3RlOiBJbnN0YW5jZSwgVHJhbnNmZXJUeXBlOiBzdHJpbmcsIE1ldGhvZDogc3RyaW5nPyk6IGJvb2xlYW4/DQogICAgaWYgdHlwZW9mKFJlbW90ZSkgfj0gJ0luc3RhbmNlJyB0aGVuIHJldHVybiBlbmQNCiAgICANCiAgICAtLS8vIENoZWNrIGlmIHRoZSBSZW1vdGUgaXMgcHJvdGVjdGVkDQogICAgaWYgc2VsZjpJc1Byb3RlY3RlZFJlbW90ZShSZW1vdGUpIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgLS0vLyBGZXRjaCBjbGFzcyB0YWJsZQ0KCWxvY2FsIENsYXNzRGF0YSA9IHNlbGY6R2V0Q2xhc3NEYXRhKFJlbW90ZSkNCglpZiBub3QgQ2xhc3NEYXRhIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgLS0vLyBDaGVjayBpZiB0aGUgdHJhbnNmZXIgdHlwZSBoYXMgZGF0YQ0KCWxvY2FsIEFsbG93ZWQgPSBDbGFzc0RhdGFbVHJhbnNmZXJUeXBlXQ0KCWlmIG5vdCBBbGxvd2VkIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgLS0vLyBDaGVjayBpZiB0aGUgbWV0aG9kIGlzIGFsbG93ZWQNCglpZiBNZXRob2QgdGhlbg0KCQlyZXR1cm4gdGFibGUuZmluZChBbGxvd2VkLCBNZXRob2QpIH49IG5pbA0KCWVuZA0KDQoJcmV0dXJuIHRydWUNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOlNldEV4dHJhRGF0YShEYXRhOiB0YWJsZSkNCiAgICBpZiBub3QgRGF0YSB0aGVuIHJldHVybiBlbmQNCiAgICBzZWxmLkV4dHJhRGF0YSA9IERhdGENCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkdldFJlbW90ZVNwb29mKFJlbW90ZTogSW5zdGFuY2UsIE1ldGhvZDogc3RyaW5nLCAuLi4pOiB0YWJsZT8NCiAgICBsb2NhbCBTcG9vZiA9IFJldHVyblNwb29mc1tSZW1vdGVdDQoNCiAgICBpZiBub3QgU3Bvb2YgdGhlbiByZXR1cm4gZW5kDQogICAgaWYgU3Bvb2YuTWV0aG9kIH49IE1ldGhvZCB0aGVuIHJldHVybiBlbmQNCg0KICAgIGxvY2FsIFJldHVyblZhbHVlcyA9IFNwb29mLlJldHVybg0KDQogICAgLS0vLyBDYWxsIHRoZSBSZXR1cm5WYWx1ZXMgZnVuY3Rpb24gdHlwZQ0KICAgIGlmIHR5cGVvZihSZXR1cm5WYWx1ZXMpID09ICJmdW5jdGlvbiIgdGhlbg0KICAgICAgICBSZXR1cm5WYWx1ZXMgPSBSZXR1cm5WYWx1ZXMoLi4uKQ0KICAgIGVuZA0KDQoJcmV0dXJuIFJldHVyblZhbHVlcw0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6U2V0TmV3UmV0dXJuU3Bvb2ZzKE5ld1JldHVyblNwb29mczogdGFibGUpDQogICAgUmV0dXJuU3Bvb2ZzID0gTmV3UmV0dXJuU3Bvb2ZzDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpGaW5kQ2FsbGluZ0xDbG9zdXJlKE9mZnNldDogbnVtYmVyKQ0KICAgIGxvY2FsIEdldGZlbnYgPSBIb29rOkdldE9yaWdpbmFsRnVuYyhnZXRmZW52KQ0KICAgIE9mZnNldCArPSAxDQoNCiAgICB3aGlsZSB0cnVlIGRvDQogICAgICAgIE9mZnNldCArPSAxDQoNCiAgICAgICAgLS0vLyBDaGVjayBpZiB0aGUgc3RhY2sgbGV2ZWwgaXMgdmFsaWQNCiAgICAgICAgbG9jYWwgSXNWYWxpZCA9IGRlYnVnLmluZm8oT2Zmc2V0LCAibCIpIH49IC0xDQogICAgICAgIGlmIG5vdCBJc1ZhbGlkIHRoZW4gY29udGludWUgZW5kDQoNCiAgICAgICAgLS0vLyBDaGVjayBpZiB0aGUgZnVuY3Rpb24gaXMgdmFsaWQNCiAgICAgICAgbG9jYWwgRnVuY3Rpb24gPSBkZWJ1Zy5pbmZvKE9mZnNldCwgImYiKQ0KICAgICAgICBpZiBub3QgRnVuY3Rpb24gdGhlbiByZXR1cm4gZW5kDQogICAgICAgIGlmIEdldGZlbnYoRnVuY3Rpb24pID09IFNpZ21hRU5WIHRoZW4gY29udGludWUgZW5kDQoNCiAgICAgICAgcmV0dXJuIEZ1bmN0aW9uDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpEZWNvbXBpbGUoU2NyaXB0OiBMb2NhbFNjcmlwdCB8IE1vZHVsZVNjcmlwdCk6IHN0cmluZw0KICAgIGxvY2FsIEtvbnN0YW50QVBJID0gImh0dHA6Ly9hcGkucGx1c2dpYW50NS5jb20va29uc3RhbnQvZGVjb21waWxlIg0KICAgIGxvY2FsIEZvcmNlS29uc3RhbnQgPSBDb25maWcuRm9yY2VLb25zdGFudERlY29tcGlsZXINCg0KICAgIC0tLy8gVXNlIGJ1aWx0LWluIGRlY29tcGlsZXIgaWYgdGhlIGV4ZWN1dG9yIHN1cHBvcnRzIGl0DQogICAgaWYgZGVjb21waWxlIGFuZCBub3QgRm9yY2VLb25zdGFudCB0aGVuIA0KICAgICAgICByZXR1cm4gZGVjb21waWxlKFNjcmlwdCkNCiAgICBlbmQNCg0KICAgIC0tLy8gZ2V0c2NyaXB0Ynl0ZWNvZGUNCiAgICBsb2NhbCBTdWNjZXNzLCBCeXRlY29kZSA9IHBjYWxsKGdldHNjcmlwdGJ5dGVjb2RlLCBTY3JpcHQpDQogICAgaWYgbm90IFN1Y2Nlc3MgdGhlbg0KICAgICAgICBsb2NhbCBFcnJvciA9IGAtLUZhaWxlZCB0byBnZXQgc2NyaXB0IGJ5dGVjb2RlLCBlcnJvcjpcbmANCiAgICAgICAgRXJyb3IgLi49IGBcbi0tW1tcbntCeXRlY29kZX1cbl1dYA0KICAgICAgICByZXR1cm4gRXJyb3IsIHRydWUNCiAgICBlbmQNCiAgICANCiAgICAtLS8vIFNlbmQgUE9TVCByZXF1ZXN0IHRvIHRoZSBBUEkNCiAgICBsb2NhbCBSZXNwb25jZSA9IHJlcXVlc3Qoew0KICAgICAgICBVcmwgPSBLb25zdGFudEFQSSwNCiAgICAgICAgQm9keSA9IEJ5dGVjb2RlLA0KICAgICAgICBNZXRob2QgPSAiUE9TVCIsDQogICAgICAgIEhlYWRlcnMgPSB7DQogICAgICAgICAgICBbIkNvbnRlbnQtVHlwZSJdID0gInRleHQvcGxhaW4iDQogICAgICAgIH0sDQogICAgfSkNCg0KICAgIC0tLy8gRXJyb3IgY2hlY2sNCiAgICBpZiBSZXNwb25jZS5TdGF0dXNDb2RlIH49IDIwMCB0aGVuDQogICAgICAgIGxvY2FsIEVycm9yID0gYC0tW0tPTlNUQU5UXSBFcnJvciBvY2N1cmVkIHdoaWxlIHJlcXVlc3RpbmcgdGhlIEFQSSwgZXJyb3I6XG5gDQogICAgICAgIEVycm9yIC4uPSBgXG4tLVtbXG57UmVzcG9uY2UuQm9keX1cbl1dYA0KICAgICAgICByZXR1cm4gRXJyb3IsIHRydWUNCiAgICBlbmQNCg0KICAgIHJldHVybiBSZXNwb25jZS5Cb2R5DQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpHZXRTY3JpcHRGcm9tRnVuYyhGdW5jOiAoLi4uYW55KSAtPiAuLi5hbnkpDQogICAgaWYgbm90IEZ1bmMgdGhlbiByZXR1cm4gZW5kDQoNCiAgICBsb2NhbCBTdWNjZXNzLCBFTlYgPSBwY2FsbChnZXRmZW52LCBGdW5jKQ0KICAgIGlmIG5vdCBTdWNjZXNzIHRoZW4gcmV0dXJuIGVuZA0KICAgIA0KICAgIC0tLy8gQmxhY2tsaXN0IHNpZ21hIHNweQ0KICAgIGlmIHNlbGY6SXNTaWdtYVNweUVOVihFTlYpIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgcmV0dXJuIHJhd2dldChFTlYsICJzY3JpcHQiKQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6Q29ubmVjdGlvbklzVmFsaWQoQ29ubmVjdGlvbjogdGFibGUpOiBib29sZWFuDQogICAgbG9jYWwgVmFsdWVSZXBsYWNlbWVudHMgPSB7DQoJCVsiU2NyaXB0Il0gPSBmdW5jdGlvbihDb25uZWN0aW9uOiB0YWJsZSk6IFNjcmlwdD8NCgkJCWxvY2FsIEZ1bmN0aW9uID0gQ29ubmVjdGlvbi5GdW5jdGlvbg0KCQkJaWYgbm90IEZ1bmN0aW9uIHRoZW4gcmV0dXJuIGVuZA0KDQoJCQlyZXR1cm4gc2VsZjpHZXRTY3JpcHRGcm9tRnVuYyhGdW5jdGlvbikNCgkJZW5kDQoJfQ0KDQogICAgLS0vLyBDaGVjayBpZiB0aGVzZSBwcm9wZXJ0aWVzIGFyZSB2YWxpZA0KICAgIGxvY2FsIFRvQ2hlY2sgPSB7DQogICAgICAgICJTY3JpcHQiDQogICAgfQ0KICAgIGZvciBfLCBQcm9wZXJ0eSBpbiBUb0NoZWNrIGRvDQogICAgICAgIGxvY2FsIFJlcGxhY2VtZW50ID0gVmFsdWVSZXBsYWNlbWVudHNbUHJvcGVydHldDQogICAgICAgIGxvY2FsIFZhbHVlDQoNCiAgICAgICAgLS0vLyBDaGVjayBpZiB0aGVyZSdzIGEgZnVuY3Rpb24gZm9yIGEgcHJvcGVydHkNCiAgICAgICAgaWYgUmVwbGFjZW1lbnQgdGhlbg0KICAgICAgICAgICAgVmFsdWUgPSBSZXBsYWNlbWVudChDb25uZWN0aW9uKQ0KICAgICAgICBlbmQNCg0KICAgICAgICAtLS8vIENoZWNrIGlmIHRoZSBwcm9wZXJ0eSBoYXMgYSB2YWx1ZQ0KICAgICAgICBpZiBWYWx1ZSA9PSBuaWwgdGhlbiANCiAgICAgICAgICAgIHJldHVybiBmYWxzZSANCiAgICAgICAgZW5kDQogICAgZW5kDQoNCiAgICByZXR1cm4gdHJ1ZQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6RmlsdGVyQ29ubmVjdGlvbnMoU2lnbmFsOiBSQlhTY3JpcHRTaWduYWwpOiB0YWJsZQ0KICAgIGxvY2FsIFByb2Nlc3NlZCA9IHt9DQoNCiAgICAtLS8vIEZpbHRlciBlYWNoIGNvbm5lY3Rpb24NCiAgICBmb3IgXywgQ29ubmVjdGlvbiBpbiBnZXRjb25uZWN0aW9ucyhTaWduYWwpIGRvDQogICAgICAgIGlmIG5vdCBzZWxmOkNvbm5lY3Rpb25Jc1ZhbGlkKENvbm5lY3Rpb24pIHRoZW4gY29udGludWUgZW5kDQogICAgICAgIHRhYmxlLmluc2VydChQcm9jZXNzZWQsIENvbm5lY3Rpb24pDQogICAgZW5kDQoNCiAgICByZXR1cm4gUHJvY2Vzc2VkDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpJc1NpZ21hU3B5RU5WKEVudjogdGFibGUpOiBib29sZWFuDQogICAgcmV0dXJuIEVudiA9PSBTaWdtYUVOVg0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6R2V0UmVtb3RlRGF0YShJZDogc3RyaW5nKQ0KICAgIGxvY2FsIFJlbW90ZU9wdGlvbnMgPSBzZWxmLlJlbW90ZU9wdGlvbnMNCg0KICAgIC0tLy8gQ2hlY2sgZm9yIGV4aXN0aW5nIHJlbW90ZSBkYXRhDQoJbG9jYWwgRXhpc3RpbmcgPSBSZW1vdGVPcHRpb25zW0lkXQ0KCWlmIEV4aXN0aW5nIHRoZW4gcmV0dXJuIEV4aXN0aW5nIGVuZA0KCQ0KICAgIC0tLy8gQmFzZSByZW1vdGUgZGF0YQ0KCWxvY2FsIERhdGEgPSB7DQoJCUV4Y2x1ZGVkID0gZmFsc2UsDQoJCUJsb2NrZWQgPSBmYWxzZQ0KCX0NCg0KCVJlbW90ZU9wdGlvbnNbSWRdID0gRGF0YQ0KCXJldHVybiBEYXRhDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpDYWxsRGlzY29yZFJQQyhCb2R5OiB0YWJsZSkNCiAgICByZXF1ZXN0KHsNCiAgICAgICAgVXJsID0gImh0dHA6Ly8xMjcuMC4wLjE6NjQ2My9ycGM/dj0xIiwNCiAgICAgICAgTWV0aG9kID0gIlBPU1QiLA0KICAgICAgICBIZWFkZXJzID0gew0KICAgICAgICAgICAgWyJDb250ZW50LVR5cGUiXSA9ICJhcHBsaWNhdGlvbi9qc29uIiwNCiAgICAgICAgICAgIFsiT3JpZ2luIl0gPSAiaHR0cHM6Ly9kaXNjb3JkLmNvbS8iDQogICAgICAgIH0sDQogICAgICAgIEJvZHkgPSBIdHRwU2VydmljZTpKU09ORW5jb2RlKEJvZHkpDQogICAgfSkNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOlByb21wdERpc2NvcmRJbnZpdGUoSW52aXRlQ29kZTogc3RyaW5nKQ0KICAgIHNlbGY6Q2FsbERpc2NvcmRSUEMoew0KICAgICAgICBjbWQgPSAiSU5WSVRFX0JST1dTRVIiLA0KICAgICAgICBub25jZSA9IEh0dHBTZXJ2aWNlOkdlbmVyYXRlR1VJRChmYWxzZSksDQogICAgICAgIGFyZ3MgPSB7DQogICAgICAgICAgICBjb2RlID0gSW52aXRlQ29kZQ0KICAgICAgICB9DQogICAgfSkNCmVuZA0KDQpsb2NhbCBQcm9jZXNzQ2FsbGJhY2sgPSBuZXdjY2xvc3VyZShmdW5jdGlvbihEYXRhOiBSZW1vdGVEYXRhLCBSZW1vdGUsIC4uLik6IHRhYmxlPw0KICAgIC0tLy8gVW5wYWNrIERhdGENCiAgICBsb2NhbCBPcmlnaW5hbEZ1bmMgPSBEYXRhLk9yaWdpbmFsRnVuYw0KICAgIGxvY2FsIElkID0gRGF0YS5JZA0KICAgIGxvY2FsIE1ldGhvZCA9IERhdGEuTWV0aG9kDQoNCiAgICAtLS8vIENoZWNrIGlmIHRoZSBSZW1vdGUgaXMgQmxvY2tlZA0KICAgIGxvY2FsIFJlbW90ZURhdGEgPSBQcm9jZXNzOkdldFJlbW90ZURhdGEoSWQpDQogICAgaWYgUmVtb3RlRGF0YS5CbG9ja2VkIHRoZW4gcmV0dXJuIHt9IGVuZA0KDQogICAgLS0vLyBDaGVjayBmb3IgYSBzcG9vZg0KICAgIGxvY2FsIFNwb29mID0gUHJvY2VzczpHZXRSZW1vdGVTcG9vZihSZW1vdGUsIE1ldGhvZCwgT3JpZ2luYWxGdW5jLCAuLi4pDQogICAgaWYgU3Bvb2YgdGhlbiByZXR1cm4gU3Bvb2YgZW5kDQoNCiAgICAtLS8vIENoZWNrIGlmIHRoZSBvcmlnbmFsIGZ1bmN0aW9uIHdhcyBwYXNzZWQNCiAgICBpZiBub3QgT3JpZ2luYWxGdW5jIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgLS0vLyBJbnZva2Ugb3JpZ25hbCBmdW5jdGlvbg0KICAgIHJldHVybiB7DQogICAgICAgIE9yaWdpbmFsRnVuYyhSZW1vdGUsIC4uLikNCiAgICB9DQplbmQpDQoNCmZ1bmN0aW9uIFByb2Nlc3M6UHJvY2Vzc1JlbW90ZShEYXRhOiBSZW1vdGVEYXRhLCBSZW1vdGUsIC4uLik6IHRhYmxlPw0KICAgIC0tLy8gVW5wYWNrIERhdGENCglsb2NhbCBNZXRob2QgPSBEYXRhLk1ldGhvZA0KICAgIGxvY2FsIFRyYW5zZmVyVHlwZSA9IERhdGEuVHJhbnNmZXJUeXBlDQogICAgbG9jYWwgSXNSZWNlaXZlID0gRGF0YS5Jc1JlY2VpdmUNCg0KCS0tLy8gQ2hlY2sgaWYgdGhlIHRyYW5zZmVydHlwZSBtZXRob2QgaXMgYWxsb3dlZA0KCWlmIFRyYW5zZmVyVHlwZSBhbmQgbm90IHNlbGY6UmVtb3RlQWxsb3dlZChSZW1vdGUsIFRyYW5zZmVyVHlwZSwgTWV0aG9kKSB0aGVuIHJldHVybiBlbmQNCg0KICAgIC0tLy8gRmV0Y2ggZGV0YWlscw0KICAgIGxvY2FsIElkID0gQ29tbXVuaWNhdGlvbjpHZXREZWJ1Z0lkKFJlbW90ZSkNCiAgICBsb2NhbCBDbGFzc0RhdGEgPSBzZWxmOkdldENsYXNzRGF0YShSZW1vdGUpDQogICAgbG9jYWwgVGltZXN0YW1wID0gdGljaygpDQoNCiAgICBsb2NhbCBDYWxsaW5nRnVuY3Rpb24NCiAgICBsb2NhbCBTb3VyY2VTY3JpcHQNCg0KICAgIC0tLy8gQWRkIGV4dHJhIGRhdGEgaW50byB0aGUgbG9nIGlmIG5lZWRlZA0KICAgIGxvY2FsIEV4dHJhRGF0YSA9IHNlbGYuRXh0cmFEYXRhDQogICAgaWYgRXh0cmFEYXRhIHRoZW4NCiAgICAgICAgc2VsZjpNZXJnZShEYXRhLCBFeHRyYURhdGEpDQogICAgZW5kDQoNCiAgICAtLS8vIEdldCBjYWxsZXIgaW5mb3JtYXRpb24NCiAgICBpZiBub3QgSXNSZWNlaXZlIHRoZW4NCiAgICAgICAgQ2FsbGluZ0Z1bmN0aW9uID0gc2VsZjpGaW5kQ2FsbGluZ0xDbG9zdXJlKDYpDQogICAgICAgIFNvdXJjZVNjcmlwdCA9IENhbGxpbmdGdW5jdGlvbiBhbmQgc2VsZjpHZXRTY3JpcHRGcm9tRnVuYyhDYWxsaW5nRnVuY3Rpb24pIG9yIG5pbA0KICAgIGVuZA0KDQogICAgLS0vLyBBZGQgdG8gcXVldWUNCiAgICBzZWxmOk1lcmdlKERhdGEsIHsNCiAgICAgICAgUmVtb3RlID0gY2xvbmVyZWYoUmVtb3RlKSwNCgkJQ2FsbGluZ1NjcmlwdCA9IGdldGNhbGxpbmdzY3JpcHQoKSwNCiAgICAgICAgQ2FsbGluZ0Z1bmN0aW9uID0gQ2FsbGluZ0Z1bmN0aW9uLA0KICAgICAgICBTb3VyY2VTY3JpcHQgPSBTb3VyY2VTY3JpcHQsDQogICAgICAgIElkID0gSWQsDQoJCUNsYXNzRGF0YSA9IENsYXNzRGF0YSwNCiAgICAgICAgVGltZXN0YW1wID0gVGltZXN0YW1wLA0KICAgICAgICBBcmdzID0gey4uLn0NCiAgICB9KQ0KDQogICAgLS0vLyBJbnZva2UgdGhlIFJlbW90ZSBhbmQgbG9nIHJldHVybiB2YWx1ZXMNCiAgICBsb2NhbCBSZXR1cm5WYWx1ZXMgPSBQcm9jZXNzQ2FsbGJhY2soRGF0YSwgUmVtb3RlLCAuLi4pDQogICAgRGF0YS5SZXR1cm5WYWx1ZXMgPSBSZXR1cm5WYWx1ZXMNCg0KICAgIC0tLy8gUXVldWUgbG9nDQogICAgQ29tbXVuaWNhdGlvbjpRdWV1ZUxvZyhEYXRhKQ0KDQogICAgcmV0dXJuIFJldHVyblZhbHVlcw0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6U2V0QWxsUmVtb3RlRGF0YShLZXk6IHN0cmluZywgVmFsdWUpDQogICAgbG9jYWwgUmVtb3RlT3B0aW9ucyA9IHNlbGYuUmVtb3RlT3B0aW9ucw0KCWZvciBSZW1vdGVJRCwgRGF0YSBpbiBuZXh0LCBSZW1vdGVPcHRpb25zIGRvDQoJCURhdGFbS2V5XSA9IFZhbHVlDQoJZW5kDQplbmQNCg0KLS0vLyBUaGUgY29tbXVuaWNhdGlvbiBjcmVhdGVzIGEgZGlmZmVyZW50IHRhYmxlIGFkZHJlc3MNCi0tLy8gUmVjaXZlZCB0YWJsZXMgd2lsbCBub3QgYmUgdGhlIHNhbWUNCmZ1bmN0aW9uIFByb2Nlc3M6U2V0UmVtb3RlRGF0YShJZDogc3RyaW5nLCBSZW1vdGVEYXRhOiB0YWJsZSkNCiAgICBsb2NhbCBSZW1vdGVPcHRpb25zID0gc2VsZi5SZW1vdGVPcHRpb25zDQogICAgUmVtb3RlT3B0aW9uc1tJZF0gPSBSZW1vdGVEYXRhDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpVcGRhdGVSZW1vdGVEYXRhKElkOiBzdHJpbmcsIFJlbW90ZURhdGE6IHRhYmxlKQ0KICAgIENvbW11bmljYXRpb246Q29tbXVuaWNhdGUoIlJlbW90ZURhdGEiLCBJZCwgUmVtb3RlRGF0YSkNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOlVwZGF0ZUFsbFJlbW90ZURhdGEoS2V5OiBzdHJpbmcsIFZhbHVlKQ0KICAgIENvbW11bmljYXRpb246Q29tbXVuaWNhdGUoIkFsbFJlbW90ZURhdGEiLCBLZXksIFZhbHVlKQ0KZW5kDQoNCnJldHVybiBQcm9jZXNz]]
},Hook={'base64',
[[LS1bWw0KDQoJVGFraW5nIG15IG1ldGhvZHMg8J+SlvCfkpYNCglJIGxvdmUgYSBwYXN0ZXIgYW5kIGEgc2tpZCwgcHV0cyBkaXNndXN0IGluIG15IGZhY2UNCg0KXV0NCg0KbG9jYWwgSG9vayA9IHsNCglPcmlnaW5hbE5hbWVjYWxsID0gbmlsLA0KCU9yaWdpbmFsSW5kZXggPSBuaWwsDQoJUHJldmlvdXNGdW5jdGlvbnMgPSB7fSwNCglEZWZhdWx0Q29uZmlnID0gew0KCQlGdW5jdGlvblBhdGNoZXMgPSB0cnVlDQoJfQ0KfQ0KDQp0eXBlIHRhYmxlID0gew0KCVthbnldOiBhbnkNCn0NCg0KdHlwZSBNZXRhRnVuYyA9IChJbnN0YW5jZSwgLi4uYW55KSAtPiAuLi5hbnkNCnR5cGUgVW5rRnVuYyA9ICguLi5hbnkpIC0+IC4uLmFueQ0KDQotLS8vIE1vZHVsZXMNCmxvY2FsIE1vZHVsZXMNCmxvY2FsIFByb2Nlc3MNCmxvY2FsIENvbmZpZ3VyYXRpb24NCmxvY2FsIENvbmZpZw0KbG9jYWwgQ29tbXVuaWNhdGlvbg0KDQpsb2NhbCBFeGVFTlYgPSBnZXRmZW52KDEpDQoNCmZ1bmN0aW9uIEhvb2s6SW5pdChEYXRhKQ0KICAgIE1vZHVsZXMgPSBEYXRhLk1vZHVsZXMNCg0KCVByb2Nlc3MgPSBNb2R1bGVzLlByb2Nlc3MNCglDb21tdW5pY2F0aW9uID0gTW9kdWxlcy5Db21tdW5pY2F0aW9uIG9yIENvbW11bmljYXRpb24NCglDb25maWcgPSBNb2R1bGVzLkNvbmZpZyBvciBDb25maWcNCglDb25maWd1cmF0aW9uID0gTW9kdWxlcy5Db25maWd1cmF0aW9uIG9yIENvbmZpZ3VyYXRpb24NCmVuZA0KDQotLS8vIFRoZSBjYWxsYmFjayBpcyBleHBlY3RlZCB0byByZXR1cm4gYSBuaWwgdmFsdWUgc29tZXRpbWVzIHdoaWNoIHNob3VsZCBiZSBpbmdvcmVkDQpsb2NhbCBIb29rTWlkZGxlID0gbmV3Y2Nsb3N1cmUoZnVuY3Rpb24oT3JpZ2luYWxGdW5jLCBDYWxsYmFjaywgQWx3YXlzVGFibGU6IGJvb2xlYW4/LCAuLi4pDQoJLS0vLyBJbnZva2UgY2FsbGJhY2sgYW5kIGNoZWNrIGZvciBhIHJlcG9uY2Ugb3RoZXJ3aXNlIGlnbm9yZWQNCglsb2NhbCBSZXR1cm5WYWx1ZXMgPSBDYWxsYmFjayguLi4pDQoJaWYgUmV0dXJuVmFsdWVzIHRoZW4NCgkJLS0vLyBVbnBhY2sNCgkJaWYgbm90IEFsd2F5c1RhYmxlIHRoZW4NCgkJCXJldHVybiBQcm9jZXNzOlVucGFjayhSZXR1cm5WYWx1ZXMpDQoJCWVuZA0KDQoJCS0tLy8gUmV0dXJuIHBhY2tlZCByZXNwb25jZQ0KCQlyZXR1cm4gUmV0dXJuVmFsdWVzDQoJZW5kDQoNCgktLS8vIFJldHVybiBwYWNrZWQgcmVzcG9uY2UNCglpZiBBbHdheXNUYWJsZSB0aGVuDQoJCXJldHVybiB7T3JpZ2luYWxGdW5jKC4uLil9DQoJZW5kDQoNCgktLS8vIFVucGFja2VkDQoJcmV0dXJuIE9yaWdpbmFsRnVuYyguLi4pDQplbmQpDQoNCmxvY2FsIGZ1bmN0aW9uIE1lcmdlKEJhc2U6IHRhYmxlLCBOZXc6IHRhYmxlKQ0KCWZvciBLZXksIFZhbHVlIGluIG5leHQsIE5ldyBkbw0KCQlCYXNlW0tleV0gPSBWYWx1ZQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6SW5kZXgoT2JqZWN0OiBJbnN0YW5jZSwgS2V5OiBzdHJpbmcpDQoJcmV0dXJuIE9iamVjdFtLZXldDQplbmQNCg0KZnVuY3Rpb24gSG9vazpQdXNoQ29uZmlnKE92ZXJ3cml0ZXMpDQogICAgTWVyZ2Uoc2VsZiwgT3ZlcndyaXRlcykNCmVuZA0KDQotLS8vIGdldHJhd21ldGF0YWJsZQ0KZnVuY3Rpb24gSG9vazpSZXBsYWNlTWV0YU1ldGhvZChPYmplY3Q6IEluc3RhbmNlLCBDYWxsOiBzdHJpbmcsIENhbGxiYWNrOiBNZXRhRnVuYyk6IE1ldGFGdW5jDQoJbG9jYWwgTWV0YXRhYmxlID0gZ2V0cmF3bWV0YXRhYmxlKE9iamVjdCkNCglsb2NhbCBPcmlnaW5hbEZ1bmMgPSBjbG9uZWZ1bmN0aW9uKE1ldGF0YWJsZVtDYWxsXSkNCgkNCgktLS8vIFJlcGxhY2UgZnVuY3Rpb24NCglzZXRyZWFkb25seShNZXRhdGFibGUsIGZhbHNlKQ0KCU1ldGF0YWJsZVtDYWxsXSA9IG5ld2NjbG9zdXJlKGZ1bmN0aW9uKC4uLikNCgkJcmV0dXJuIEhvb2tNaWRkbGUoT3JpZ2luYWxGdW5jLCBDYWxsYmFjaywgZmFsc2UsIC4uLikNCgllbmQpDQoJc2V0cmVhZG9ubHkoTWV0YXRhYmxlLCB0cnVlKQ0KDQoJcmV0dXJuIE9yaWdpbmFsRnVuYw0KZW5kDQoNCi0tLy8gaG9va2Z1bmN0aW9uDQpmdW5jdGlvbiBIb29rOkhvb2tGdW5jdGlvbihGdW5jOiBVbmtGdW5jLCBDYWxsYmFjazogVW5rRnVuYykNCglsb2NhbCBPcmlnaW5hbEZ1bmMNCglsb2NhbCBXcmFwcGVkQ2FsbGJhY2sgPSBuZXdjY2xvc3VyZShDYWxsYmFjaykNCglPcmlnaW5hbEZ1bmMgPSBjbG9uZWZ1bmN0aW9uKGhvb2tmdW5jdGlvbihGdW5jLCBmdW5jdGlvbiguLi4pDQoJCXJldHVybiBIb29rTWlkZGxlKE9yaWdpbmFsRnVuYywgV3JhcHBlZENhbGxiYWNrLCBmYWxzZSwgLi4uKQ0KCWVuZCkpDQoJcmV0dXJuIE9yaWdpbmFsRnVuYw0KZW5kDQoNCi0tLy8gaG9va21ldGFtZXRob2QNCmZ1bmN0aW9uIEhvb2s6SG9va01ldGFDYWxsKE9iamVjdDogSW5zdGFuY2UsIENhbGw6IHN0cmluZywgQ2FsbGJhY2s6IE1ldGFGdW5jKTogTWV0YUZ1bmMNCglsb2NhbCBNZXRhdGFibGUgPSBnZXRyYXdtZXRhdGFibGUoT2JqZWN0KQ0KCWxvY2FsIFVuaG9va2VkDQoJDQoJVW5ob29rZWQgPSBzZWxmOkhvb2tGdW5jdGlvbihNZXRhdGFibGVbQ2FsbF0sIGZ1bmN0aW9uKC4uLikNCgkJcmV0dXJuIEhvb2tNaWRkbGUoVW5ob29rZWQsIENhbGxiYWNrLCB0cnVlLCAuLi4pDQoJZW5kKQ0KCXJldHVybiBVbmhvb2tlZA0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6SG9va01ldGFNZXRob2QoT2JqZWN0OiBJbnN0YW5jZSwgQ2FsbDogc3RyaW5nLCBDYWxsYmFjazogTWV0YUZ1bmMpOiBNZXRhRnVuYw0KCWxvY2FsIEZ1bmMgPSBuZXdjY2xvc3VyZShDYWxsYmFjaykNCgkNCgktLS8vIEdldHJhd21ldGF0YWJsZQ0KCWlmIENvbmZpZy5SZXBsYWNlTWV0YUNhbGxGdW5jIHRoZW4NCgkJcmV0dXJuIHNlbGY6UmVwbGFjZU1ldGFNZXRob2QoT2JqZWN0LCBDYWxsLCBGdW5jKQ0KCWVuZA0KCQ0KCS0tLy8gSG9va21ldGFtZXRob2QNCglyZXR1cm4gc2VsZjpIb29rTWV0YUNhbGwoT2JqZWN0LCBDYWxsLCBGdW5jKQ0KZW5kDQoNCi0tLy8gVGhpcyBpbmNsdWRlcyBhIGZldyBwYXRjaGVzIGZvciBleGVjdXRvciBmdW5jdGlvbnMgdGhhdCByZXN1bHQgaW4gZGV0ZWN0aW9uDQotLS8vIFRoaXMgaXNuJ3QgYnVsbGV0cHJvb2Ygc2luY2Ugc29tZSBmdW5jdGlvbnMgbGlrZSBob29rZnVuY3Rpb24gSSBjYW4ndCBwYXRjaA0KLS0vLyBCeSB0aGUgd2F5LCB0aGFua3MgZm9yIGNvcHlpbmcgdGhpcyBndXlzISBTdXBlciBhcHByZWNpYXRlIHRoZSBjb3B5Y2F0DQpmdW5jdGlvbiBIb29rOlBhdGNoRnVuY3Rpb25zKCkNCgktLS8vIENoZWNrIGlmIHRoaXMgZnVuY3Rpb24gaXMgZGlzYWJsZWQgaW4gdGhlIGNvbmZpZ3VyYXRpb24NCglpZiBDb25maWcuTm9GdW5jdGlvblBhdGNoaW5nIHRoZW4gcmV0dXJuIGVuZA0KDQoJbG9jYWwgUGF0Y2hlcyA9IHsNCgkJLS0vLyBFcnJvciBkZXRlY3Rpb24gcGF0Y2gNCgkJLS0vLyBob29rZnVuY3Rpb24gbWF5IHN0aWxsIGJlIGRldGVjdGVkIGRlcGVuZGluZyBvbiB0aGUgZXhlY3V0b3INCgkJW3BjYWxsXSA9ICBmdW5jdGlvbihPbGRGdW5jLCBGdW5jLCAuLi4pDQoJCQlsb2NhbCBSZXNwb25jZSA9IHtPbGRGdW5jKEZ1bmMsIC4uLil9DQoJCQlsb2NhbCBTdWNjZXNzLCBFcnJvciA9IFJlc3BvbmNlWzFdLCBSZXNwb25jZVsyXQ0KCQkJbG9jYWwgSXNDID0gaXNjY2xvc3VyZShGdW5jKQ0KDQoJCQktLS8vIFBhdGNoIGMtY2xvc3VyZSBlcnJvciBkZXRlY3Rpb24NCgkJCWlmIFN1Y2Nlc3MgPT0gZmFsc2UgYW5kIElzQyB0aGVuDQoJCQkJbG9jYWwgTmV3RXJyb3IgPSBQcm9jZXNzOkNsZWFuQ0Vycm9yKEVycm9yKQ0KCQkJCVJlc3BvbmNlWzJdID0gTmV3RXJyb3INCgkJCWVuZA0KDQoJCQktLS8vIFN0YWNrLW92ZXJmbG93IGRldGVjdGlvbiBwYXRjaA0KCQkJaWYgU3VjY2VzcyA9PSBmYWxzZSBhbmQgbm90IElzQyBhbmQgRXJyb3I6ZmluZCgiQyBzdGFjayBvdmVyZmxvdyIpIHRoZW4NCgkJCQlsb2NhbCBUcmFjZXRhYmxlID0gRXJyb3I6c3BsaXQoIjoiKQ0KCQkJCWxvY2FsIENhbGxlciwgTGluZSA9IFRyYWNldGFibGVbMV0sIFRyYWNldGFibGVbMl0NCgkJCQlsb2NhbCBDb3VudCA9IFByb2Nlc3M6Q291bnRNYXRjaGVzKEVycm9yLCBDYWxsZXIpDQoNCgkJCQlpZiBDb3VudCA9PSAxOTYgdGhlbg0KCQkJCQlDb21tdW5pY2F0aW9uOkNvbnNvbGVQcmludChgQyBzdGFjayBvdmVyZmxvdyBwYXRjaGVkLCBjb3VudCB3YXMge0NvdW50fWApDQoJCQkJCVJlc3BvbmNlWzJdID0gRXJyb3I6Z3N1Yihge0NhbGxlcn06e0xpbmV9OiBgLCBDYWxsZXIsIDEpDQoJCQkJZW5kDQoJCQllbmQNCg0KCQkJcmV0dXJuIFJlc3BvbmNlDQoJCWVuZCwNCgkJW2dldGZlbnZdID0gZnVuY3Rpb24oT2xkRnVuYywgTGV2ZWw6IG51bWJlciwgLi4uKQ0KCQkJTGV2ZWwgPSBMZXZlbCBvciAxDQoNCgkJCS0tLy8gUHJldmVudCBjYXRwdXJlIG9mIGV4ZWN1dG9yJ3MgZW52DQoJCQlpZiB0eXBlKExldmVsKSA9PSAibnVtYmVyIiB0aGVuDQoJCQkJTGV2ZWwgKz0gMg0KCQkJZW5kDQoNCgkJCWxvY2FsIFJlc3BvbmNlID0ge09sZEZ1bmMoTGV2ZWwsIC4uLil9DQoJCQlsb2NhbCBFTlYgPSBSZXNwb25jZVsxXQ0KDQoJCQktLS8vIF9fdG9zdHJpbmcgRU5WIGRldGVjdGlvbiBwYXRjaA0KCQkJaWYgbm90IGNoZWNrY2FsbGVyKCkgYW5kIEVOViA9PSBFeGVFTlYgdGhlbg0KCQkJCUNvbW11bmljYXRpb246Q29uc29sZVByaW50KCJFTlYgZXNjYXBlIHBhdGNoZWQiKQ0KCQkJCXJldHVybiBPbGRGdW5jKDk5OTk5OSwgLi4uKQ0KCQkJZW5kDQoNCgkJCXJldHVybiBSZXNwb25jZQ0KCQllbmQNCgl9DQoNCgktLS8vIEhvb2sgZWFjaCBmdW5jdGlvbg0KCWZvciBGdW5jLCBDYWxsQmFjayBpbiBQYXRjaGVzIGRvDQoJCWxvY2FsIFdyYXBwZWQgPSBuZXdjY2xvc3VyZShDYWxsQmFjaykNCgkJbG9jYWwgT2xkRnVuYzsgT2xkRnVuYyA9IHNlbGY6SG9va0Z1bmN0aW9uKEZ1bmMsIGZ1bmN0aW9uKC4uLikNCgkJCXJldHVybiBXcmFwcGVkKE9sZEZ1bmMsIC4uLikNCgkJZW5kKQ0KDQoJCS0tLy8gQ2FjaGUgcHJldmlvdXMgZnVuY3Rpb24NCgkJc2VsZi5QcmV2aW91c0Z1bmN0aW9uc1tGdW5jXSA9IE9sZEZ1bmMNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBIb29rOkdldE9yaWdpbmFsRnVuYyhGdW5jKQ0KCXJldHVybiBzZWxmLlByZXZpb3VzRnVuY3Rpb25zW0Z1bmNdIG9yIEZ1bmMNCmVuZA0KDQpmdW5jdGlvbiBIb29rOlJ1bk9uQWN0b3JzKENvZGU6IHN0cmluZywgQ2hhbm5lbElkOiBudW1iZXIpDQoJaWYgbm90IGdldGFjdG9ycyBvciBub3QgcnVuX29uX2FjdG9yIHRoZW4gcmV0dXJuIGVuZA0KCQ0KCWxvY2FsIEFjdG9ycyA9IGdldGFjdG9ycygpDQoJaWYgbm90IEFjdG9ycyB0aGVuIHJldHVybiBlbmQNCgkNCglmb3IgXywgQWN0b3IgaW4gQWN0b3JzIGRvIA0KCQlwY2FsbChydW5fb25fYWN0b3IsIEFjdG9yLCBDb2RlLCBDaGFubmVsSWQpDQoJZW5kDQplbmQNCg0KbG9jYWwgZnVuY3Rpb24gUHJvY2Vzc1JlbW90ZShPcmlnaW5hbEZ1bmMsIE1ldGFNZXRob2Q6IHN0cmluZywgc2VsZiwgTWV0aG9kOiBzdHJpbmcsIC4uLikNCglyZXR1cm4gUHJvY2VzczpQcm9jZXNzUmVtb3RlKHsNCgkJTWV0aG9kID0gTWV0aG9kLA0KCQlPcmlnaW5hbEZ1bmMgPSBPcmlnaW5hbEZ1bmMsDQoJCU1ldGFNZXRob2QgPSBNZXRhTWV0aG9kLA0KCQlUcmFuc2ZlclR5cGUgPSAiU2VuZCIsDQoJCUlzRXhwbG9pdCA9IGNoZWNrY2FsbGVyKCkNCgl9LCBzZWxmLCAuLi4pDQplbmQNCg0KZnVuY3Rpb24gSG9vazpIb29rUmVtb3RlVHlwZUluZGV4KENsYXNzTmFtZTogc3RyaW5nLCBGdW5jTmFtZTogc3RyaW5nKQ0KCWxvY2FsIFJlbW90ZSA9IEluc3RhbmNlLm5ldyhDbGFzc05hbWUpDQoJbG9jYWwgRnVuYyA9IFJlbW90ZVtGdW5jTmFtZV0NCglsb2NhbCBPcmlnaW5hbEZ1bmMNCg0KCS0tLy8gUmVtb3RlcyB3aWxsIHNoYXJlIHRoZSBzYW1lIGZ1bmN0aW9ucw0KCS0tLy8gCUZvciBleGFtcGxlIEZpcmVTZXJ2ZXIgd2lsbCBiZSBpZGVudGljYWwNCgktLS8vIEFkZGlvbmFsbHksIHRoaXMgaXMgZm9yIF9faW5kZXggY2FsbHMuDQoJLS0vLyAJQSBfX25hbWVjYWxsIGhvb2sgd2lsbCBub3QgZGV0ZWN0IHRoaXMNCglPcmlnaW5hbEZ1bmMgPSBzZWxmOkhvb2tGdW5jdGlvbihGdW5jLCBmdW5jdGlvbihzZWxmLCAuLi4pDQoJCS0tLy8gQ2hlY2sgaWYgdGhlIE9iamVjdCBpcyBhbGxvd2VkIA0KCQlpZiBub3QgUHJvY2VzczpSZW1vdGVBbGxvd2VkKHNlbGYsICJTZW5kIiwgRnVuY05hbWUpIHRoZW4gcmV0dXJuIGVuZA0KDQoJCS0tLy8gUHJvY2VzcyB0aGUgcmVtb3RlIGRhdGENCgkJcmV0dXJuIFByb2Nlc3NSZW1vdGUoT3JpZ2luYWxGdW5jLCAiX19pbmRleCIsIHNlbGYsIEZ1bmNOYW1lLCAuLi4pDQoJZW5kKQ0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6SG9va1JlbW90ZUluZGV4ZXMoKQ0KCWxvY2FsIFJlbW90ZUNsYXNzRGF0YSA9IFByb2Nlc3MuUmVtb3RlQ2xhc3NEYXRhDQoJZm9yIENsYXNzTmFtZSwgRGF0YSBpbiBSZW1vdGVDbGFzc0RhdGEgZG8NCgkJbG9jYWwgRnVuY05hbWUgPSBEYXRhLlNlbmRbMV0NCgkJc2VsZjpIb29rUmVtb3RlVHlwZUluZGV4KENsYXNzTmFtZSwgRnVuY05hbWUpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gSG9vazpCZWdpbkhvb2tzKCkNCgktLS8vIEhvb2sgUmVtb3RlIGZ1bmN0aW9ucw0KCXNlbGY6SG9va1JlbW90ZUluZGV4ZXMoKQ0KDQoJLS0vLyBOYW1lY2FsbCBob29rDQoJbG9jYWwgT3JpZ2luYWxOYW1lQ2FsbA0KCU9yaWdpbmFsTmFtZUNhbGwgPSBzZWxmOkhvb2tNZXRhTWV0aG9kKGdhbWUsICJfX25hbWVjYWxsIiwgZnVuY3Rpb24oc2VsZiwgLi4uKQ0KCQlsb2NhbCBNZXRob2QgPSBnZXRuYW1lY2FsbG1ldGhvZCgpDQoJCXJldHVybiBQcm9jZXNzUmVtb3RlKE9yaWdpbmFsTmFtZUNhbGwsICJfX25hbWVjYWxsIiwgc2VsZiwgTWV0aG9kLCAuLi4pDQoJZW5kKQ0KDQoJTWVyZ2Uoc2VsZiwgew0KCQlPcmlnaW5hbE5hbWVjYWxsID0gT3JpZ2luYWxOYW1lQ2FsbCwNCgkJLS1PcmlnaW5hbEluZGV4ID0gT2kNCgl9KQ0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6SG9va0NsaWVudEludm9rZShSZW1vdGUsIE1ldGhvZCwgQ2FsbGJhY2spDQoJbG9jYWwgU3VjY2VzcywgRnVuY3Rpb24gPSBwY2FsbChmdW5jdGlvbigpDQoJCXJldHVybiBnZXRjYWxsYmFja3ZhbHVlKFJlbW90ZSwgTWV0aG9kKQ0KCWVuZCkNCg0KCS0tLy8gU29tZSBleGVjdXRvcnMgbGlrZSBQb3Rhc3NpdW0gd2lsbCB0aHJvdyBhIGVycm9yIGlmIHRoZSBDYWxsYmFjayB2YWx1ZSBpcyBuaWwNCglpZiBub3QgU3VjY2VzcyB0aGVuIHJldHVybiBlbmQNCglpZiBub3QgRnVuY3Rpb24gdGhlbiByZXR1cm4gZW5kDQoJDQoJLS0vLyBUZXN0IGhvb2tmdW5jdGlvbg0KCWxvY2FsIEhvb2tTdWNjZXNzID0gcGNhbGwoZnVuY3Rpb24oKQ0KCQlzZWxmOkhvb2tGdW5jdGlvbihGdW5jdGlvbiwgQ2FsbGJhY2spDQoJZW5kKQ0KCWlmIEhvb2tTdWNjZXNzIHRoZW4gcmV0dXJuIGVuZA0KDQoJLS0vLyBSZXBsYWNlIGNhbGxiYWNrIGZ1bmN0aW9uIG90aGVyd2lzZQ0KCVJlbW90ZVtNZXRob2RdID0gZnVuY3Rpb24oLi4uKQ0KCQlyZXR1cm4gSG9va01pZGRsZShGdW5jdGlvbiwgQ2FsbGJhY2ssIGZhbHNlLCAuLi4pDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gSG9vazpNdWx0aUNvbm5lY3QoUmVtb3RlcykNCglmb3IgXywgUmVtb3RlIGluIG5leHQsIFJlbW90ZXMgZG8NCgkJc2VsZjpDb25uZWN0Q2xpZW50UmVjaXZlKFJlbW90ZSkNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBIb29rOkNvbm5lY3RDbGllbnRSZWNpdmUoUmVtb3RlKQ0KCS0tLy8gQ2hlY2sgaWYgdGhlIFJlbW90ZSBjbGFzcyBpcyBhbGxvd2VkIGZvciByZWNlaXZpbmcNCglsb2NhbCBBbGxvd2VkID0gUHJvY2VzczpSZW1vdGVBbGxvd2VkKFJlbW90ZSwgIlJlY2VpdmUiKQ0KCWlmIG5vdCBBbGxvd2VkIHRoZW4gcmV0dXJuIGVuZA0KDQoJLS0vLyBDaGVjayBpZiB0aGUgT2JqZWN0IGhhcyBSZW1vdGUgY2xhc3MgZGF0YQ0KICAgIGxvY2FsIENsYXNzRGF0YSA9IFByb2Nlc3M6R2V0Q2xhc3NEYXRhKFJlbW90ZSkNCiAgICBsb2NhbCBJc1JlbW90ZUZ1bmN0aW9uID0gQ2xhc3NEYXRhLklzUmVtb3RlRnVuY3Rpb24NCglsb2NhbCBOb1JlY2l2ZUhvb2sgPSBDbGFzc0RhdGEuTm9SZWNpdmVIb29rDQogICAgbG9jYWwgTWV0aG9kID0gQ2xhc3NEYXRhLlJlY2VpdmVbMV0NCg0KCS0tLy8gQ2hlY2sgaWYgdGhlIFJlY2l2ZSBzaG91bGQgYmUgaG9va2VkDQoJaWYgTm9SZWNpdmVIb29rIHRoZW4gcmV0dXJuIGVuZA0KDQoJLS0vLyBOZXcgY2FsbGJhY2sgZnVuY3Rpb24NCglsb2NhbCBmdW5jdGlvbiBDYWxsYmFjayguLi4pDQogICAgICAgIHJldHVybiBQcm9jZXNzOlByb2Nlc3NSZW1vdGUoew0KICAgICAgICAgICAgTWV0aG9kID0gTWV0aG9kLA0KICAgICAgICAgICAgSXNSZWNlaXZlID0gdHJ1ZSwNCiAgICAgICAgICAgIE1ldGFNZXRob2QgPSAiQ29ubmVjdCIsDQoJCQlJc0V4cGxvaXQgPSBjaGVja2NhbGxlcigpDQogICAgICAgIH0sIFJlbW90ZSwgLi4uKQ0KCWVuZA0KDQoJLS0vLyBDb25uZWN0IHJlbW90ZQ0KCWlmIG5vdCBJc1JlbW90ZUZ1bmN0aW9uIHRoZW4NCiAgIAkJUmVtb3RlW01ldGhvZF06Q29ubmVjdChDYWxsYmFjaykNCgllbHNlIC0tIFJlbW90ZSBmdW5jdGlvbnMNCgkJc2VsZjpIb29rQ2xpZW50SW52b2tlKFJlbW90ZSwgTWV0aG9kLCBDYWxsYmFjaykNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBIb29rOkJlZ2luU2VydmljZShMaWJyYXJpZXMsIEV4dHJhRGF0YSwgQ2hhbm5lbElkLCAuLi4pDQoJLS0vLyBMaWJyYXJlaXMNCglsb2NhbCBSZXR1cm5TcG9vZnMgPSBMaWJyYXJpZXMuUmV0dXJuU3Bvb2ZzDQoJbG9jYWwgUHJvY2Vzc0xpYiA9IExpYnJhcmllcy5Qcm9jZXNzDQoJbG9jYWwgQ29tbXVuaWNhdGlvbiA9IExpYnJhcmllcy5Db21tdW5pY2F0aW9uDQoJbG9jYWwgR2VuZXJhdGlvbiA9IExpYnJhcmllcy5HZW5lcmF0aW9uDQoJbG9jYWwgQ29uZmlnID0gTGlicmFyaWVzLkNvbmZpZw0KDQoJLS0vLyBDaGVjayBmb3IgY29uZmlndXJhdGlvbiBvdmVyd3JpdGVzDQoJUHJvY2Vzc0xpYjpDaGVja0NvbmZpZyhDb25maWcpDQoNCgktLS8vIEluaXQgZGF0YQ0KCWxvY2FsIEluaXREYXRhID0gew0KCQlNb2R1bGVzID0gew0KCQkJUmV0dXJuU3Bvb2ZzID0gUmV0dXJuU3Bvb2ZzLA0KCQkJR2VuZXJhdGlvbiA9IEdlbmVyYXRpb24sDQoJCQlDb21tdW5pY2F0aW9uID0gQ29tbXVuaWNhdGlvbiwNCgkJCVByb2Nlc3MgPSBQcm9jZXNzTGliLA0KCQkJQ29uZmlnID0gQ29uZmlnLA0KCQkJSG9vayA9IHNlbGYNCgkJfSwNCgkJU2VydmljZXMgPSBzZXRtZXRhdGFibGUoe30sIHsNCgkJCV9faW5kZXggPSBmdW5jdGlvbihzZWxmLCBOYW1lOiBzdHJpbmcpOiBJbnN0YW5jZQ0KCQkJCWxvY2FsIFNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoTmFtZSkNCgkJCQlyZXR1cm4gY2xvbmVyZWYoU2VydmljZSkNCgkJCWVuZCwNCgkJfSkNCgl9DQoNCgktLS8vIEluaXQgbGlicmFyaWVzDQoJQ29tbXVuaWNhdGlvbjpJbml0KEluaXREYXRhKQ0KCVByb2Nlc3NMaWI6SW5pdChJbml0RGF0YSkNCg0KCS0tLy8gQ29tbXVuaWNhdGlvbiBjb25maWd1cmF0aW9uDQoJbG9jYWwgQ2hhbm5lbCwgSXNXcmFwcGVkID0gQ29tbXVuaWNhdGlvbjpHZXRDb21tQ2hhbm5lbChDaGFubmVsSWQpDQoJQ29tbXVuaWNhdGlvbjpTZXRDaGFubmVsKENoYW5uZWwpDQoJQ29tbXVuaWNhdGlvbjpBZGRUeXBlQ2FsbGJhY2tzKHsNCgkJWyJSZW1vdGVEYXRhIl0gPSBmdW5jdGlvbihJZDogc3RyaW5nLCBSZW1vdGVEYXRhKQ0KCQkJUHJvY2Vzc0xpYjpTZXRSZW1vdGVEYXRhKElkLCBSZW1vdGVEYXRhKQ0KCQllbmQsDQoJCVsiQWxsUmVtb3RlRGF0YSJdID0gZnVuY3Rpb24oS2V5OiBzdHJpbmcsIFZhbHVlKQ0KCQkJUHJvY2Vzc0xpYjpTZXRBbGxSZW1vdGVEYXRhKEtleSwgVmFsdWUpDQoJCWVuZCwNCgkJWyJVcGRhdGVTcG9vZnMiXSA9IGZ1bmN0aW9uKENvbnRlbnQ6IHN0cmluZykNCgkJCWxvY2FsIFNwb29mcyA9IGxvYWRzdHJpbmcoQ29udGVudCkoKQ0KCQkJUHJvY2Vzc0xpYjpTZXROZXdSZXR1cm5TcG9vZnMoU3Bvb2ZzKQ0KCQllbmQsDQoJCVsiQmVnaW5Ib29rcyJdID0gZnVuY3Rpb24oQ29uZmlnKQ0KCQkJaWYgQ29uZmlnLlBhdGNoRnVuY3Rpb25zIHRoZW4NCgkJCQlzZWxmOlBhdGNoRnVuY3Rpb25zKCkNCgkJCWVuZA0KCQkJc2VsZjpCZWdpbkhvb2tzKCkNCgkJCUNvbW11bmljYXRpb246Q29uc29sZVByaW50KCJIb29rcyBsb2FkZWQiKQ0KCQllbmQNCgl9KQ0KCQ0KCS0tLy8gUHJvY2VzcyBjb25maWd1cmF0aW9uDQoJUHJvY2Vzc0xpYjpTZXRDaGFubmVsKENoYW5uZWwsIElzV3JhcHBlZCkNCglQcm9jZXNzTGliOlNldEV4dHJhRGF0YShFeHRyYURhdGEpDQoNCgktLS8vIEhvb2sgY29uZmlndXJhdGlvbg0KCXNlbGY6SW5pdChJbml0RGF0YSkNCg0KCWlmIEV4dHJhRGF0YSBhbmQgRXh0cmFEYXRhLklzQWN0b3IgdGhlbg0KCQlDb21tdW5pY2F0aW9uOkNvbnNvbGVQcmludCgiQWN0b3IgY29ubmVjdGVkISIpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gSG9vazpMb2FkTWV0YUhvb2tzKEFjdG9yQ29kZTogc3RyaW5nLCBDaGFubmVsSWQ6IG51bWJlcikNCgktLS8vIEhvb2sgYWN0b3JzDQoJaWYgbm90IENvbmZpZ3VyYXRpb24uTm9BY3RvcnMgdGhlbg0KCQlzZWxmOlJ1bk9uQWN0b3JzKEFjdG9yQ29kZSwgQ2hhbm5lbElkKQ0KCWVuZA0KDQoJLS0vLyBIb29rIGN1cnJlbnQgdGhyZWFkDQoJc2VsZjpCZWdpblNlcnZpY2UoTW9kdWxlcywgbmlsLCBDaGFubmVsSWQpIA0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6TG9hZFJlY2VpdmVIb29rcygpDQoJbG9jYWwgTm9SZWNlaXZlSG9va2luZyA9IENvbmZpZy5Ob1JlY2VpdmVIb29raW5nDQoJbG9jYWwgQmxhY2tMaXN0ZWRTZXJ2aWNlcyA9IENvbmZpZy5CbGFja0xpc3RlZFNlcnZpY2VzDQoNCglpZiBOb1JlY2VpdmVIb29raW5nIHRoZW4gcmV0dXJuIGVuZA0KDQoJLS0vLyBSZW1vdGUgYWRkZWQNCglnYW1lLkRlc2NlbmRhbnRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKFJlbW90ZSkgLS0gVE9ETw0KCQlzZWxmOkNvbm5lY3RDbGllbnRSZWNpdmUoUmVtb3RlKQ0KCWVuZCkNCg0KCS0tLy8gQ29sbGVjdCByZW1vdGVzIHdpdGggbmlsIHBhcmVudHMNCglzZWxmOk11bHRpQ29ubmVjdChnZXRuaWxpbnN0YW5jZXMoKSkNCg0KCS0tLy8gU2VhcmNoIGZvciByZW1vdGVzDQoJZm9yIF8sIFNlcnZpY2UgaW4gbmV4dCwgZ2FtZTpHZXRDaGlsZHJlbigpIGRvDQoJCWlmIHRhYmxlLmZpbmQoQmxhY2tMaXN0ZWRTZXJ2aWNlcywgU2VydmljZS5DbGFzc05hbWUpIHRoZW4gY29udGludWUgZW5kDQoJCXNlbGY6TXVsdGlDb25uZWN0KFNlcnZpY2U6R2V0RGVzY2VuZGFudHMoKSkNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBIb29rOkxvYWRIb29rcyhBY3RvckNvZGU6IHN0cmluZywgQ2hhbm5lbElkOiBudW1iZXIpDQoJc2VsZjpMb2FkTWV0YUhvb2tzKEFjdG9yQ29kZSwgQ2hhbm5lbElkKQ0KCXNlbGY6TG9hZFJlY2VpdmVIb29rcygpDQplbmQNCg0KcmV0dXJuIEhvb2sNCg==]]
},Flags={'base64',
[[dHlwZSBGbGFnVmFsdWUgPSBib29sZWFufG51bWJlcnxhbnkNCnR5cGUgRmxhZyA9IHsNCiAgICBWYWx1ZTogRmxhZ1ZhbHVlLA0KICAgIExhYmVsOiBzdHJpbmcsDQogICAgQ2F0ZWdvcnk6IHN0cmluZw0KfQ0KdHlwZSBGbGFncyA9IHsNCiAgICBbc3RyaW5nXTogRmxhZw0KfQ0KdHlwZSB0YWJsZSA9IHsNCiAgICBbYW55XTogYW55DQp9DQoNCmxvY2FsIE1vZHVsZSA9IHsNCiAgICBGbGFncyA9IHsNCiAgICAgICAgLS0gUHJldmVudFJlbmFtaW5nID0gew0KICAgICAgICAtLSAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgLS0gICAgIExhYmVsID0gIk5vIHJlbmFtaW5nIiwNCiAgICAgICAgLS0gfSwNCiAgICAgICAgLS0gUHJldmVudFBhcmVudGluZyA9IHsNCiAgICAgICAgLS0gICAgIFZhbHVlID0gZmFsc2UsDQogICAgICAgIC0tICAgICBMYWJlbCA9ICJObyBwYXJlbnRpbmciLA0KICAgICAgICAtLSB9LA0KICAgICAgICBOb0NvbW1lbnRzID0gew0KICAgICAgICAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgICAgIExhYmVsID0gIk5vIGNvbW1lbnRzIiwNCiAgICAgICAgfSwNCiAgICAgICAgU2VsZWN0TmV3ZXN0ID0gew0KICAgICAgICAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgICAgIExhYmVsID0gIkF1dG8gc2VsZWN0IG5ld2VzdCIsDQogICAgICAgIH0sDQogICAgICAgIERlY29tcGlsZVBvcG91dCA9IHsgLS0gTG92cmUgU0hVU0gNCiAgICAgICAgICAgIFZhbHVlID0gZmFsc2UsDQogICAgICAgICAgICBMYWJlbCA9ICJQb3Atb3V0IGRlY29tcGlsZXMiLA0KICAgICAgICB9LA0KICAgICAgICBJZ25vcmVOaWwgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IHRydWUsDQogICAgICAgICAgICBMYWJlbCA9ICJJZ25vcmUgbmlsIHBhcmVudHMiLA0KICAgICAgICB9LA0KICAgICAgICBMb2dFeHBsb2l0ID0gew0KICAgICAgICAgICAgVmFsdWUgPSB0cnVlLA0KICAgICAgICAgICAgTGFiZWwgPSAiTG9nIGV4cGxvaXQgY2FsbHMiLA0KICAgICAgICB9LA0KICAgICAgICBMb2dSZWNpdmVzID0gew0KICAgICAgICAgICAgVmFsdWUgPSB0cnVlLA0KICAgICAgICAgICAgTGFiZWwgPSAiTG9nIHJlY2VpdmVzIiwNCiAgICAgICAgfSwNCiAgICAgICAgUGF1c2VkID0gew0KICAgICAgICAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgICAgIExhYmVsID0gIlBhdXNlZCIsDQogICAgICAgICAgICBLZXliaW5kID0gRW51bS5LZXlDb2RlLlENCiAgICAgICAgfSwNCiAgICAgICAgS2V5YmluZHNFbmFibGVkID0gew0KICAgICAgICAgICAgVmFsdWUgPSB0cnVlLA0KICAgICAgICAgICAgTGFiZWwgPSAiS2V5YmluZHMgRW5hYmxlZCINCiAgICAgICAgfSwNCiAgICAgICAgRmluZFN0cmluZ0Zvck5hbWUgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IHRydWUsDQogICAgICAgICAgICBMYWJlbCA9ICJGaW5kIGFyZyBmb3IgbmFtZSINCiAgICAgICAgfSwNCiAgICAgICAgVWlWaXNpYmxlID0gew0KICAgICAgICAgICAgVmFsdWUgPSB0cnVlLA0KICAgICAgICAgICAgTGFiZWwgPSAiVUkgVmlzaWJsZSIsDQogICAgICAgICAgICBLZXliaW5kID0gRW51bS5LZXlDb2RlLlANCiAgICAgICAgfSwNCiAgICAgICAgTm9UcmVlTm9kZXMgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IGZhbHNlLA0KICAgICAgICAgICAgTGFiZWwgPSAiTm8gZ3JvdXBpbmciDQogICAgICAgIH0sDQogICAgICAgIFRhYmxlQXJncyA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gZmFsc2UsDQogICAgICAgICAgICBMYWJlbCA9ICJUYWJsZSBhcmdzIg0KICAgICAgICB9LA0KICAgICAgICBOb1ZhcmlhYmxlcyA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gZmFsc2UsDQogICAgICAgICAgICBMYWJlbCA9ICJObyBjb21wcmVzc2lvbiINCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KZnVuY3Rpb24gTW9kdWxlOkdldEZsYWdWYWx1ZShOYW1lOiBzdHJpbmcpOiBGbGFnVmFsdWUNCiAgICBsb2NhbCBGbGFnID0gc2VsZjpHZXRGbGFnKE5hbWUpDQogICAgcmV0dXJuIEZsYWcuVmFsdWUNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6U2V0RmxhZ1ZhbHVlKE5hbWU6IHN0cmluZywgVmFsdWU6IEZsYWdWYWx1ZSkNCiAgICBsb2NhbCBGbGFnID0gc2VsZjpHZXRGbGFnKE5hbWUpDQogICAgRmxhZy5WYWx1ZSA9IFZhbHVlDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlNldEZsYWdDYWxsYmFjayhOYW1lOiBzdHJpbmcsIENhbGxiYWNrOiAoLi4uYW55KSAtPiAuLi5hbnkpDQogICAgbG9jYWwgRmxhZyA9IHNlbGY6R2V0RmxhZyhOYW1lKQ0KICAgIEZsYWcuQ2FsbGJhY2sgPSBDYWxsYmFjaw0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpTZXRGbGFnQ2FsbGJhY2tzKERpY3Q6IHt9KQ0KICAgIGZvciBOYW1lLCBDYWxsYmFjazogKC4uLmFueSkgLT4gLi4uYW55IGluIG5leHQsIERpY3QgZG8gDQogICAgICAgIHNlbGY6U2V0RmxhZ0NhbGxiYWNrKE5hbWUsIENhbGxiYWNrKQ0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpHZXRGbGFnKE5hbWU6IHN0cmluZyk6IEZsYWcNCiAgICBsb2NhbCBBbGxGbGFncyA9IHNlbGY6R2V0RmxhZ3MoKQ0KICAgIGxvY2FsIEZsYWcgPSBBbGxGbGFnc1tOYW1lXQ0KICAgIGFzc2VydChGbGFnLCAiRmxhZyBkb2VzIG5vdCBleGlzdCEiKQ0KICAgIHJldHVybiBGbGFnDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkFkZEZsYWcoTmFtZTogc3RyaW5nLCBGbGFnOiBGbGFnKQ0KICAgIGxvY2FsIEFsbEZsYWdzID0gc2VsZjpHZXRGbGFncygpDQogICAgQWxsRmxhZ3NbTmFtZV0gPSBGbGFnDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkdldEZsYWdzKCk6IEZsYWdzDQogICAgcmV0dXJuIHNlbGYuRmxhZ3MNCmVuZA0KDQpyZXR1cm4gTW9kdWxl]]
},Ui={'base64',
[[bG9jYWwgVWkgPSB7DQoJRGVmYXVsdEVkaXRvckNvbnRlbnQgPSBbPVstLVtbDQoJU2lnbWEgU3B5LCB3cml0dGVuIGJ5IGRlcHNvDQoJSG9va3MgcmV3cml0dGVuIGFuZCBtYW55IG1vcmUgZml4ZXMhDQoNCglEaXNjb3JkOiBodHRwczovL2Rpc2NvcmQuZ2cvYmtVa20ydlNidg0KXV1dPV0sDQoJTG9nTGltaXQgPSAxMDAsDQogICAgU2Vhc29uTGFiZWxzID0geyANCiAgICAgICAgSmFudWFyeSA9ICLim4QgJXMg4puEIiwgDQogICAgICAgIEZlYnJ1YXJ5ID0gIvCfjKjvuI8gJXMg8J+PgiIsIA0KICAgICAgICBNYXJjaCA9ICLwn4y5ICVz8J+MuiAiLCANCiAgICAgICAgQXByaWwgPSAi8J+QoyAlcyDinJ3vuI8iLCANCiAgICAgICAgTWF5ID0gIvCfkJ0gJXMg8J+MniIsIA0KICAgICAgICBKdW5lID0gIvCfjLIgJXMg8J+llSIsIA0KICAgICAgICBKdWx5ID0gIvCfjIogJXMg8J+MhSIsIA0KICAgICAgICBBdWd1c3QgPSAi4piA77iPICVzIPCfjJ4iLCANCiAgICAgICAgU2VwdGVtYmVyID0gIvCfjYEgJXMg8J+NgSIsIA0KICAgICAgICBPY3RvYmVyID0gIvCfjoMgJXMg8J+OgyIsIA0KICAgICAgICBOb3ZlbWJlciA9ICLwn42CICVzIPCfjYIiLCANCiAgICAgICAgRGVjZW1iZXIgPSAi8J+OhCAlcyDwn46BIg0KICAgIH0sDQoJU2NhbGVzID0gew0KCQlbIk1vYmlsZSJdID0gVURpbTIuZnJvbU9mZnNldCg0ODAsIDI4MCksDQoJCVsiRGVza3RvcCJdID0gVURpbTIuZnJvbU9mZnNldCg2MDAsIDQwMCksDQoJfSwNCiAgICBCYXNlQ29uZmlnID0gew0KICAgICAgICBUaGVtZSA9ICJTaWdtYVNweSIsDQogICAgICAgIE5vU2Nyb2xsID0gdHJ1ZSwNCiAgICB9LA0KCU9wdGlvblR5cGVzID0gew0KCQlib29sZWFuID0gIkNoZWNrYm94IiwNCgl9LA0KCURpc3BsYXlSZW1vdGVJbmZvID0gew0KCQkiTWV0YU1ldGhvZCIsDQoJCSJNZXRob2QiLA0KCQkiUmVtb3RlIiwNCgkJIkNhbGxpbmdTY3JpcHQiLA0KCQkiSXNBY3RvciIsDQoJCSJJZCINCgl9LA0KDQogICAgV2luZG93ID0gbmlsLA0KICAgIFJhbmRvbVNlZWQgPSBSYW5kb20ubmV3KHRpY2soKSksDQoJTG9ncyA9IHNldG1ldGF0YWJsZSh7fSwge19fbW9kZSA9ICJrIn0pLA0KCUxvZ1F1ZXVlID0gc2V0bWV0YXRhYmxlKHt9LCB7X19tb2RlID0gInYifSksDQp9IA0KDQp0eXBlIHRhYmxlID0gew0KCVthbnldOiBhbnkNCn0NCg0KdHlwZSBMb2cgPSB7DQoJUmVtb3RlOiBJbnN0YW5jZSwNCglNZXRob2Q6IHN0cmluZywNCglBcmdzOiB0YWJsZSwNCglJc1JlY2VpdmU6IGJvb2xlYW4/LA0KCU1ldGFNZXRob2Q6IHN0cmluZz8sDQoJT3JpZ25hbEZ1bmM6ICgoLi4uYW55KSAtPiAuLi5hbnkpPywNCglDYWxsaW5nU2NyaXB0OiBJbnN0YW5jZT8sDQoJQ2FsbGluZ0Z1bmN0aW9uOiAoKC4uLmFueSkgLT4gLi4uYW55KT8sDQoJQ2xhc3NEYXRhOiB0YWJsZT8sDQoJUmV0dXJuVmFsdWVzOiB0YWJsZT8sDQoJUmVtb3RlRGF0YTogdGFibGU/LA0KCUlkOiBzdHJpbmcsDQoJU2VsZWN0YWJsZTogdGFibGUsDQoJSGVhZGVyRGF0YTogdGFibGUsDQoJVmFsdWVTd2FwczogdGFibGUsDQoJVGltZXN0YW1wOiBudW1iZXIsDQoJSXNFeHBsb2l0OiBib29sZWFuDQp9DQoNCi0tLy8gQ29tcGF0aWJpbGl0eQ0KbG9jYWwgU2V0Q2xpcGJvYXJkID0gc2V0Y2xpcGJvYXJkIG9yIHRvY2xpcGJvYXJkIG9yIHNldF9jbGlwYm9hcmQNCg0KLS0vLyBMaWJyYXJpZXMNCmxvY2FsIFJlR3VpID0gbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoJ2h0dHBzOi8vZ2l0aHViLmNvbS9zb2Jha2FkZXAvRGVhci1SZUd1aS9ibG9iL21haW4vUmVHdWkubHVhJyksICJSZUd1aSIpKCkNCg0KLS0vLyBNb2R1bGVzDQpsb2NhbCBGbGFncw0KbG9jYWwgR2VuZXJhdGlvbg0KbG9jYWwgUHJvY2Vzcw0KbG9jYWwgSG9vayANCmxvY2FsIENvbmZpZw0KbG9jYWwgQ29tbXVuaWNhdGlvbg0KbG9jYWwgRmlsZXMNCg0KbG9jYWwgQWN0aXZlRGF0YSA9IG5pbA0KbG9jYWwgUmVtb3Rlc0NvdW50ID0gMA0KDQpsb2NhbCBUZXh0Rm9udCA9IEZvbnQuZnJvbUVudW0oRW51bS5Gb250LkNvZGUpDQpsb2NhbCBGb250U3VjY2VzcyA9IGZhbHNlDQpsb2NhbCBDb21tQ2hhbm5lbA0KDQpmdW5jdGlvbiBVaTpJbml0KERhdGEpDQogICAgbG9jYWwgTW9kdWxlcyA9IERhdGEuTW9kdWxlcw0KDQoJLS0vLyBNb2R1bGVzDQoJRmxhZ3MgPSBNb2R1bGVzLkZsYWdzDQoJR2VuZXJhdGlvbiA9IE1vZHVsZXMuR2VuZXJhdGlvbg0KCVByb2Nlc3MgPSBNb2R1bGVzLlByb2Nlc3MNCglIb29rID0gTW9kdWxlcy5Ib29rDQoJQ29uZmlnID0gTW9kdWxlcy5Db25maWcNCglDb21tdW5pY2F0aW9uID0gTW9kdWxlcy5Db21tdW5pY2F0aW9uDQoJRmlsZXMgPSBNb2R1bGVzLkZpbGVzDQoNCgktLS8vIFJlR3VpDQoJc2VsZjpMb2FkRm9udCgpDQoJc2VsZjpMb2FkUmVHdWkoKQ0KCXNlbGY6Q2hlY2tTY2FsZSgpDQplbmQNCg0KZnVuY3Rpb24gVWk6U2V0Q29tbUNoYW5uZWwoTmV3Q29tbUNoYW5uZWw6IEJpbmRhYmxlRXZlbnQpDQoJQ29tbUNoYW5uZWwgPSBOZXdDb21tQ2hhbm5lbA0KZW5kDQoNCmZ1bmN0aW9uIFVpOkNoZWNrU2NhbGUoKQ0KCWxvY2FsIEJhc2VDb25maWcgPSBzZWxmLkJhc2VDb25maWcNCglsb2NhbCBTY2FsZXMgPSBzZWxmLlNjYWxlcw0KDQoJbG9jYWwgSXNNb2JpbGUgPSBSZUd1aTpJc01vYmlsZURldmljZSgpDQoJbG9jYWwgRGV2aWNlID0gSXNNb2JpbGUgYW5kICJNb2JpbGUiIG9yICJEZXNrdG9wIg0KDQoJQmFzZUNvbmZpZy5TaXplID0gU2NhbGVzW0RldmljZV0NCmVuZA0KDQpmdW5jdGlvbiBVaTpTZXRDbGlwYm9hcmQoQ29udGVudDogc3RyaW5nKQ0KCVNldENsaXBib2FyZChDb250ZW50KQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlR1cm5TZWFzb25hbChUZXh0OiBzdHJpbmcpOiBzdHJpbmcNCiAgICBsb2NhbCBTZWFzb25MYWJlbHMgPSBzZWxmLlNlYXNvbkxhYmVscw0KICAgIGxvY2FsIE1vbnRoID0gb3MuZGF0ZSgiJUIiKQ0KICAgIGxvY2FsIEJhc2UgPSBTZWFzb25MYWJlbHNbTW9udGhdDQoNCiAgICByZXR1cm4gQmFzZTpmb3JtYXQoVGV4dCkNCmVuZA0KDQpmdW5jdGlvbiBVaTpMb2FkRm9udCgpDQoJbG9jYWwgRm9udEZpbGUgPSBzZWxmLkZvbnRKc29uRmlsZQ0KDQoJLS0vLyBHZXQgRm9udEZhY2UgQXNzZXRJZA0KCWxvY2FsIEFzc2V0SWQgPSBGaWxlczpMb2FkQ3VzdG9tYXNzZXQoRm9udEZpbGUpDQoJaWYgbm90IEFzc2V0SWQgdGhlbiByZXR1cm4gZW5kDQoNCgktLS8vIENyZWF0ZSBjdXN0b20gRm9udEZhY2UNCglsb2NhbCBOZXdGb250ID0gRm9udC5uZXcoQXNzZXRJZCkNCglUZXh0Rm9udCA9IE5ld0ZvbnQNCglGb250U3VjY2VzcyA9IHRydWUNCmVuZA0KDQpmdW5jdGlvbiBVaTpTZXRGb250RmlsZShGb250RmlsZTogc3RyaW5nKQ0KCXNlbGYuRm9udEpzb25GaWxlID0gRm9udEZpbGUNCmVuZA0KDQpmdW5jdGlvbiBVaTpGb250V2FzU3VjY2Vzc2Z1bCgpDQoJaWYgRm9udFN1Y2Nlc3MgdGhlbiByZXR1cm4gZW5kDQoNCgktLS8vIEVycm9yIG1lc3NhZ2UNCglzZWxmOlNob3dNb2RhbCh7DQoJCSJVbmZvcnR1bmF0ZWx5IHlvdXIgZXhlY3V0b3Igd2FzIHVuYWJsZSB0byBkb3dubG9hZCB0aGUgZm9udCBhbmQgdGhlcmVmb3JlIHN3aXRjaGVkIHRvIHRoZSBEYXJrIHRoZW1lIiwNCgkJIlxuSWYgeW91IHdvdWxkIGxpa2UgdG8gdXNlIHRoZSBJbUd1aSB0aGVtZSwgXG5wbGVhc2UgZG93bmxvYWQgdGhlIGZvbnQgKGFzc2V0cy9Qcm9nZ3lDbGVhbi50dGYpIiwNCgkJImFuZCBwdXQgcHV0IGl0IGluIHlvdXIgd29ya3NwYWNlIGZvbGRlclxuKFNpZ21hIFNweS9hc3NldHMpIg0KCX0pDQplbmQNCg0KZnVuY3Rpb24gVWk6TG9hZFJlR3VpKCkNCgktLWxvY2FsIFRoZW1lQ29uZmlnID0gQ29uZmlnLlRoZW1lQ29uZmlnDQoJLS1UaGVtZUNvbmZpZy5UZXh0Rm9udCA9IFRleHRGb250DQoNCgktLS8vIFJlR3VpDQoJLS1SZUd1aTpEZWZpbmVUaGVtZSgiU2lnbWFTcHkiLCBUaGVtZUNvbmZpZykNCmVuZA0KDQp0eXBlIENyZWF0ZUJ1dHRvbnMgPSB7DQoJQmFzZTogdGFibGU/LA0KCUJ1dHRvbnM6IHRhYmxlLA0KCU5vVGFibGU6IGJvb2xlYW4/DQp9DQpmdW5jdGlvbiBVaTpDcmVhdGVCdXR0b25zKFBhcmVudCwgRGF0YTogQ3JlYXRlQnV0dG9ucykNCglsb2NhbCBCYXNlID0gRGF0YS5CYXNlIG9yIHt9DQoJbG9jYWwgQnV0dG9ucyA9IERhdGEuQnV0dG9ucw0KCWxvY2FsIE5vVGFibGUgPSBEYXRhLk5vVGFibGUNCg0KCS0tLy8gQ3JlYXRlIHRhYmxlIGxheW91dA0KCWlmIG5vdCBOb1RhYmxlIHRoZW4NCgkJUGFyZW50ID0gUGFyZW50OlRhYmxlKHsNCgkJCU1heENvbHVtbnMgPSAzDQoJCX0pOk5leHRSb3coKQ0KCWVuZA0KDQoJLS0vLyBDcmVhdGUgYnV0dG9ucw0KCWZvciBfLCBCdXR0b24gaW4gbmV4dCwgQnV0dG9ucyBkbw0KCQlsb2NhbCBDb250YWluZXIgPSBQYXJlbnQNCgkJaWYgbm90IE5vVGFibGUgdGhlbg0KCQkJQ29udGFpbmVyID0gUGFyZW50Ok5leHRDb2x1bW4oKQ0KCQllbmQNCg0KCQlSZUd1aTpDaGVja0NvbmZpZyhCdXR0b24sIEJhc2UpDQoJCUNvbnRhaW5lcjpCdXR0b24oQnV0dG9uKQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIFVpOkNyZWF0ZVdpbmRvdyhXaW5kb3dDb25maWcpDQogICAgbG9jYWwgQmFzZUNvbmZpZyA9IHNlbGYuQmFzZUNvbmZpZw0KCWxvY2FsIENvbmZpZyA9IFByb2Nlc3M6RGVlcENsb25lVGFibGUoQmFzZUNvbmZpZykNCglQcm9jZXNzOk1lcmdlKENvbmZpZywgV2luZG93Q29uZmlnKQ0KDQoJLS0vLyBDcmVhdGUgV2luZG93DQoJbG9jYWwgV2luZG93ID0gUmVHdWk6V2luZG93KENvbmZpZykNCg0KCS0tLy8gU3dpdGNoIHRvIERhcmtUaGVtZSBpbnN0ZWFkIG9mIHRoZSBJbUd1aSB0aGVtZSBpZiB0aGUgZm9udCBjYW5ub3QgYmUgbG9hZGVkDQoJaWYgbm90IEZvbnRTdWNjZXNzIHRoZW4gDQoJCVdpbmRvdzpTZXRUaGVtZSgiRGFya1RoZW1lIikNCgllbmQNCgkNCgktLS8vIENyZWF0ZSBXaW5kb3cNCglyZXR1cm4gV2luZG93DQplbmQNCg0KdHlwZSBBc2tDb25maWcgPSB7DQoJVGl0bGU6IHN0cmluZywNCglDb250ZW50OiB0YWJsZSwNCglPcHRpb25zOiB0YWJsZQ0KfQ0KZnVuY3Rpb24gVWk6QXNrVXNlcihDb25maWc6IEFza0NvbmZpZyk6IHN0cmluZw0KCWxvY2FsIFdpbmRvdyA9IHNlbGYuV2luZG93DQoJbG9jYWwgQW5zd2VyZWQgPSBmYWxzZQ0KDQoJLS0vLyBDcmVhdGUgbW9kYWwNCglsb2NhbCBNb2RhbFdpbmRvdyA9IFdpbmRvdzpQb3B1cE1vZGFsKHsNCgkJVGl0bGUgPSBDb25maWcuVGl0bGUNCgl9KQ0KCU1vZGFsV2luZG93OkxhYmVsKHsNCgkJVGV4dCA9IHRhYmxlLmNvbmNhdChDb25maWcuQ29udGVudCwgIlxuIiksDQoJCVRleHRXcmFwcGVkID0gdHJ1ZQ0KCX0pDQoJTW9kYWxXaW5kb3c6U2VwYXJhdG9yKCkNCg0KCS0tLy8gQW5zd2Vycw0KCWxvY2FsIFJvdyA9IE1vZGFsV2luZG93OlJvdyh7DQoJCUV4cGFuZGVkID0gdHJ1ZQ0KCX0pDQoJZm9yIF8sIEFuc3dlciBpbiBuZXh0LCBDb25maWcuT3B0aW9ucyBkbw0KCQlSb3c6QnV0dG9uKHsNCgkJCVRleHQgPSBBbnN3ZXIsDQoJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQlBbnN3ZXJlZCA9IEFuc3dlcg0KCQkJCU1vZGFsV2luZG93OkNsb3NlUG9wdXAoKQ0KCQkJZW5kLA0KCQl9KQ0KCWVuZA0KDQoJcmVwZWF0IHdhaXQoKSB1bnRpbCBBbnN3ZXJlZA0KCXJldHVybiBBbnN3ZXJlZA0KZW5kDQoNCmZ1bmN0aW9uIFVpOkNyZWF0ZU1haW5XaW5kb3coKQ0KCWxvY2FsIFdpbmRvdyA9IHNlbGY6Q3JlYXRlV2luZG93KCkNCglzZWxmLldpbmRvdyA9IFdpbmRvdw0KDQoJLS0vLyBDaGVjayBpZiB0aGUgZm9udCB3YXMgc3VjY2Vzc2Z1bGx5IGRvd25sb2FkZWQNCglzZWxmOkZvbnRXYXNTdWNjZXNzZnVsKCkNCglzZWxmOkF1cmFDb3VudGVyU2VydmljZSgpDQoNCgktLS8vIFVpVmlzaWJsZSBmbGFnIGNhbGxiYWNrDQoJRmxhZ3M6U2V0RmxhZ0NhbGxiYWNrKCJVaVZpc2libGUiLCBmdW5jdGlvbihzZWxmLCBWaXNpYmxlKQ0KCQlXaW5kb3c6U2V0VmlzaWJsZShWaXNpYmxlKQ0KCWVuZCkNCg0KCXJldHVybiBXaW5kb3cNCmVuZA0KDQpmdW5jdGlvbiBVaTpTaG93TW9kYWwoTGluZXM6IHRhYmxlKQ0KCWxvY2FsIFdpbmRvdyA9IHNlbGYuV2luZG93DQoJbG9jYWwgTWVzc2FnZSA9IHRhYmxlLmNvbmNhdChMaW5lcywgIlxuIikNCg0KCS0tLy8gTW9kYWwgV2luZG93DQoJbG9jYWwgTW9kYWxXaW5kb3cgPSBXaW5kb3c6UG9wdXBNb2RhbCh7DQoJCVRpdGxlID0gIlNpZ21hIFNweSINCgl9KQ0KCU1vZGFsV2luZG93OkxhYmVsKHsNCgkJVGV4dCA9IE1lc3NhZ2UsDQoJCVJpY2hUZXh0ID0gdHJ1ZSwNCgkJVGV4dFdyYXBwZWQgPSB0cnVlDQoJfSkNCglNb2RhbFdpbmRvdzpCdXR0b24oew0KCQlUZXh0ID0gIk9rYXkiLA0KCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCU1vZGFsV2luZG93OkNsb3NlUG9wdXAoKQ0KCQllbmQsDQoJfSkNCmVuZA0KDQpmdW5jdGlvbiBVaTpTaG93VW5zdXBwb3J0ZWRFeGVjdXRvcihOYW1lOiBzdHJpbmcpDQoJVWk6U2hvd01vZGFsKHsNCgkJIlVuZm9ydHVuYXRlbHkgU2lnbWEgU3B5IGlzIG5vdCBzdXBwb3J0ZWQgb24geW91ciBleGVjdXRvciIsDQoJCSJUaGUgYmVzdCBmcmVlIG9wdGlvbiBpcyBTd2lmdCAoZGlzY29yZC5nZy9nZXRzd2lmdGdnKSIsDQoJCWBcbllvdXIgZXhlY3V0b3I6IHtOYW1lfWANCgl9KQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlNob3dVbnN1cHBvcnRlZChGdW5jTmFtZTogc3RyaW5nKQ0KCVVpOlNob3dNb2RhbCh7DQoJCSJVbmZvcnR1bmF0ZWx5IFNpZ21hIFNweSBpcyBub3Qgc3VwcG9ydGVkIG9uIHlvdXIgZXhlY3V0b3IiLA0KCQlgXG5NaXNzaW5nIGZ1bmN0aW9uOiB7RnVuY05hbWV9YA0KCX0pDQplbmQNCg0KZnVuY3Rpb24gVWk6Q3JlYXRlT3B0aW9uc0ZvckRpY3QoUGFyZW50LCBEaWN0OiB0YWJsZSwgQ2FsbGJhY2spDQoJbG9jYWwgT3B0aW9ucyA9IHt9DQoNCgktLS8vIERpY3RvbmFyeSB3cmFwDQoJZm9yIEtleSwgVmFsdWUgaW4gbmV4dCwgRGljdCBkbw0KCQlPcHRpb25zW0tleV0gPSB7DQoJCQlWYWx1ZSA9IFZhbHVlLA0KCQkJTGFiZWwgPSBLZXksDQoJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKF8sIFZhbHVlKQ0KCQkJCURpY3RbS2V5XSA9IFZhbHVlDQoNCgkJCQktLS8vIEludm9rZSBjYWxsYmFjaw0KCQkJCWlmIG5vdCBDYWxsYmFjayB0aGVuIHJldHVybiBlbmQNCgkJCQlDYWxsYmFjaygpDQoJCQllbmQNCgkJfQ0KCWVuZA0KDQoJLS0vLyBDcmVhdGUgZWxlbWVudHMNCglzZWxmOkNyZWF0ZUVsZW1lbnRzKFBhcmVudCwgT3B0aW9ucykNCmVuZA0KDQpmdW5jdGlvbiBVaTpDaGVja0tleWJpbmRMYXlvdXQoQ29udGFpbmVyLCBLZXlDb2RlOiBFbnVtLktleUNvZGUsIENhbGxiYWNrKQ0KCWlmIG5vdCBLZXlDb2RlIHRoZW4gcmV0dXJuIENvbnRhaW5lciBlbmQNCg0KCS0tLy8gQ3JlYXRlIFJvdyBsYXlvdXQNCglDb250YWluZXIgPSBDb250YWluZXI6Um93KHsNCgkJSG9yaXpvbnRhbEZsZXggPSBFbnVtLlVJRmxleEFsaWdubWVudC5TcGFjZUJldHdlZW4NCgl9KQ0KDQoJLS0vLyBBZGQgS2V5YmluZCBlbGVtZW50DQoJQ29udGFpbmVyOktleWJpbmQoew0KCQlMYWJlbCA9ICIiLA0KCQlWYWx1ZSA9IEtleUNvZGUsDQoJCUxheW91dE9yZGVyID0gMiwNCgkJSWdub3JlR2FtZVByb2Nlc3NlZCA9IGZhbHNlLA0KCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCS0tLy8gQ2hlY2sgaWYga2V5YmluZHMgYXJlIGVuYWJsZWQNCgkJCWxvY2FsIEVuYWJsZWQgPSBGbGFnczpHZXRGbGFnVmFsdWUoIktleWJpbmRzRW5hYmxlZCIpDQoJCQlpZiBub3QgRW5hYmxlZCB0aGVuIHJldHVybiBlbmQNCg0KCQkJLS0vLyBJbnZva2UgY2FsbGJhY2sNCgkJCUNhbGxiYWNrKCkNCgkJZW5kLA0KCX0pDQoNCglyZXR1cm4gQ29udGFpbmVyDQplbmQNCg0KZnVuY3Rpb24gVWk6Q3JlYXRlRWxlbWVudHMoUGFyZW50LCBPcHRpb25zKQ0KCWxvY2FsIE9wdGlvblR5cGVzID0gc2VsZi5PcHRpb25UeXBlcw0KCQ0KCS0tLy8gQ3JlYXRlIHRhYmxlIGxheW91dA0KCWxvY2FsIFRhYmxlID0gUGFyZW50OlRhYmxlKHsNCgkJTWF4Q29sdW1ucyA9IDMNCgl9KTpOZXh0Um93KCkNCg0KCWZvciBOYW1lLCBEYXRhIGluIE9wdGlvbnMgZG8NCgkJbG9jYWwgVmFsdWUgPSBEYXRhLlZhbHVlDQoJCWxvY2FsIFR5cGUgPSB0eXBlb2YoVmFsdWUpDQoNCgkJLS0vLyBBZGQgbWlzc2luZyB2YWx1ZXMgaW50byBvcHRpb25zIHRhYmxlDQoJCVJlR3VpOkNoZWNrQ29uZmlnKERhdGEsIHsNCgkJCUNsYXNzID0gT3B0aW9uVHlwZXNbVHlwZV0sDQoJCQlMYWJlbCA9IE5hbWUsDQoJCX0pDQoJCQ0KCQktLS8vIENoZWNrIGlmIGEgZWxlbWVudCB0eXBlIGV4aXN0cyBmb3IgdmFsdWUgdHlwZQ0KCQlsb2NhbCBDbGFzcyA9IERhdGEuQ2xhc3MNCgkJYXNzZXJ0KENsYXNzLCBgTm8ge1R5cGV9IHR5cGUgZXhpc3RzIGZvciBvcHRpb25gKQ0KDQoJCWxvY2FsIENvbnRhaW5lciA9IFRhYmxlOk5leHRDb2x1bW4oKQ0KCQlsb2NhbCBDaGVja2JveCA9IG5pbA0KDQoJCS0tLy8gQ2hlY2sgZm9yIGEga2V5YmluZCBsYXlvdXQNCgkJbG9jYWwgS2V5YmluZCA9IERhdGEuS2V5YmluZA0KCQlDb250YWluZXIgPSBzZWxmOkNoZWNrS2V5YmluZExheW91dChDb250YWluZXIsIEtleWJpbmQsIGZ1bmN0aW9uKCkNCgkJCUNoZWNrYm94OlRvZ2dsZSgpDQoJCWVuZCkNCgkJDQoJCS0tLy8gQ3JlYXRlIGNvbHVtbiBhbmQgZWxlbWVudA0KCQlDaGVja2JveCA9IENvbnRhaW5lcltDbGFzc10oQ29udGFpbmVyLCBEYXRhKQ0KCWVuZA0KZW5kDQoNCi0tLy8gQm9paWlpIHdoYXQgZGlkIHlvdSBzYXkgYWJvdXQgU2lnbWEgU3B5IPCfkoDwn5KADQpmdW5jdGlvbiBVaTpEaXNwbGF5QXVyYSgpDQogICAgbG9jYWwgV2luZG93ID0gc2VsZi5XaW5kb3cNCiAgICBsb2NhbCBSYW5kID0gc2VsZi5SYW5kb21TZWVkDQoNCgktLS8vIEF1cmEgKGJvaWlpaWkpDQogICAgbG9jYWwgQVVSQSA9IFJhbmQ6TmV4dEludGVnZXIoMSwgOTk5OTk5OSkNCiAgICBsb2NhbCBBVVJBREVMQVkgPSBSYW5kOk5leHRJbnRlZ2VyKDEsIDUpDQoNCgktLS8vIFRpdGxlDQoJbG9jYWwgVGl0bGUgPSBgU2lnbWEgU3B5IHwgQVVSQToge0FVUkF9YA0KCWxvY2FsIFNlYXNvbmFsID0gc2VsZjpUdXJuU2Vhc29uYWwoVGl0bGUpDQogICAgV2luZG93OlNldFRpdGxlKFNlYXNvbmFsKQ0KDQogICAgd2FpdChBVVJBREVMQVkpDQplbmQNCg0KZnVuY3Rpb24gVWk6QXVyYUNvdW50ZXJTZXJ2aWNlKCkNCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgd2hpbGUgdHJ1ZSBkbw0KICAgICAgICAgICAgc2VsZjpEaXNwbGF5QXVyYSgpDQogICAgICAgIGVuZA0KICAgIGVuZCkNCmVuZA0KDQpmdW5jdGlvbiBVaTpDcmVhdGVXaW5kb3dDb250ZW50KFdpbmRvdykNCiAgICAtLS8vIFdpbmRvdyBncm91cA0KICAgIGxvY2FsIExheW91dCA9IFdpbmRvdzpMaXN0KHsNCiAgICAgICAgVWlQYWRkaW5nID0gMiwNCiAgICAgICAgSG9yaXpvbnRhbEZsZXggPSBFbnVtLlVJRmxleEFsaWdubWVudC5GaWxsLA0KICAgICAgICBWZXJ0aWNhbEZsZXggPSBFbnVtLlVJRmxleEFsaWdubWVudC5GaWxsLA0KICAgICAgICBGaWxsRGlyZWN0aW9uID0gRW51bS5GaWxsRGlyZWN0aW9uLlZlcnRpY2FsLA0KICAgICAgICBGaWxsID0gdHJ1ZQ0KICAgIH0pDQoNCgktLS8vIFJlbW90ZXMgbGlzdA0KICAgIHNlbGYuUmVtb3Rlc0xpc3QgPSBMYXlvdXQ6Q2FudmFzKHsNCiAgICAgICAgU2Nyb2xsID0gdHJ1ZSwNCiAgICAgICAgVWlQYWRkaW5nID0gNSwNCiAgICAgICAgQXV0b21hdGljU2l6ZSA9IEVudW0uQXV0b21hdGljU2l6ZS5Ob25lLA0KICAgICAgICBGbGV4TW9kZSA9IEVudW0uVUlGbGV4TW9kZS5Ob25lLA0KICAgICAgICBTaXplID0gVURpbTIubmV3KDAsIDEzMCwgMSwgMCkNCiAgICB9KQ0KDQoJLS0vLyBUYWIgYm94DQoJbG9jYWwgSW5mb1NlbGVjdG9yID0gTGF5b3V0OlRhYlNlbGVjdG9yKHsNCiAgICAgICAgTm9BbmltYXRpb24gPSB0cnVlLA0KICAgICAgICBTaXplID0gVURpbTIubmV3KDEsIC0xMzAsIDAuNCwgMCksDQogICAgfSkNCg0KCXNlbGYuSW5mb1NlbGVjdG9yID0gSW5mb1NlbGVjdG9yDQoJc2VsZi5DYW52YXNMYXlvdXQgPSBMYXlvdXQNCg0KCS0tLy8gTWFrZSB0YWJzDQoJc2VsZjpNYWtlRWRpdG9yVGFiKEluZm9TZWxlY3RvcikNCglzZWxmOk1ha2VPcHRpb25zVGFiKEluZm9TZWxlY3RvcikNCgkNCglpZiBDb25maWcuRGVidWcgdGhlbg0KCQlzZWxmOkNvbnNvbGVUYWIoSW5mb1NlbGVjdG9yKQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIFVpOkNvbnNvbGVUYWIoSW5mb1NlbGVjdG9yKQ0KCWxvY2FsIFRhYiA9IEluZm9TZWxlY3RvcjpDcmVhdGVUYWIoew0KCQlOYW1lID0gIkNvbnNvbGUiDQoJfSkNCg0KCWxvY2FsIENvbnNvbGUNCglsb2NhbCBCdXR0b25zUm93ID0gVGFiOlJvdygpDQoNCglCdXR0b25zUm93OkJ1dHRvbih7DQoJCVRleHQgPSAiQ2xlYXIiLA0KCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCUNvbnNvbGU6Q2xlYXIoKQ0KCQllbmQNCgl9KQ0KCUJ1dHRvbnNSb3c6QnV0dG9uKHsNCgkJVGV4dCA9ICJDb3B5IiwNCgkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQl0b2NsaXBib2FyZChDb25zb2xlOkdldFZhbHVlKCkpDQoJCWVuZA0KCX0pDQoJQnV0dG9uc1JvdzpCdXR0b24oew0KCQlUZXh0ID0gIlBhdXNlIiwNCgkJQ2FsbGJhY2sgPSBmdW5jdGlvbihzZWxmKQ0KCQkJbG9jYWwgRW5hYmxlZCA9IG5vdCBDb25zb2xlLkVuYWJsZWQNCgkJCWxvY2FsIFRleHQgPSBFbmFibGVkIGFuZCAiUGF1c2UiIG9yICJQYXVzZWQiDQoJCQlzZWxmLlRleHQgPSBUZXh0DQoNCgkJCS0tLy8gVXBkYXRlIGNvbnNvbGUNCgkJCUNvbnNvbGUuRW5hYmxlZCA9IEVuYWJsZWQNCgkJZW5kLA0KCX0pDQoJQnV0dG9uc1JvdzpFeHBhbmQoKQ0KDQoJLS0vLyBDcmVhdGUgY29uc29sZQ0KCUNvbnNvbGUgPSBUYWI6Q29uc29sZSh7DQoJCVRleHQgPSAiLS0gQ3JlYXRlZCBieSBkZXBzbyIsDQoJCVJlYWRPbmx5ID0gdHJ1ZSwNCgkJQm9yZGVyID0gZmFsc2UsDQoJCUZpbGwgPSB0cnVlLA0KCQlFbmFibGVkID0gdHJ1ZSwNCgkJQXV0b1Njcm9sbCA9IHRydWUsDQoJCVJpY2hUZXh0ID0gdHJ1ZSwNCgkJTWF4TGluZXMgPSA1MA0KCX0pDQoNCglzZWxmLkNvbnNvbGUgPSBDb25zb2xlDQplbmQNCg0KZnVuY3Rpb24gVWk6Q29uc29sZUxvZyguLi46IHN0cmluZz8pDQoJbG9jYWwgQ29uc29sZSA9IHNlbGYuQ29uc29sZQ0KCWlmIG5vdCBDb25zb2xlIHRoZW4gcmV0dXJuIGVuZA0KDQoJQ29uc29sZTpBcHBlbmRUZXh0KC4uLikNCmVuZA0KDQpmdW5jdGlvbiBVaTpNYWtlT3B0aW9uc1RhYihJbmZvU2VsZWN0b3IpDQoJbG9jYWwgVGFiID0gSW5mb1NlbGVjdG9yOkNyZWF0ZVRhYih7DQoJCU5hbWUgPSAiT3B0aW9ucyINCgl9KQ0KDQoJLS0vLyBBZGQgZ2xvYmFsIG9wdGlvbnMNCglUYWI6U2VwYXJhdG9yKHtUZXh0PSJMb2dzIn0pDQoJc2VsZjpDcmVhdGVCdXR0b25zKFRhYiwgew0KCQlCYXNlID0gew0KCQkJU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyMCksDQoJCQlBdXRvbWF0aWNTaXplID0gRW51bS5BdXRvbWF0aWNTaXplLlksDQoJCX0sDQoJCUJ1dHRvbnMgPSB7DQoJCQl7DQoJCQkJVGV4dCA9ICJDbGVhciBsb2dzIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJbG9jYWwgVGFiID0gQWN0aXZlRGF0YSBhbmQgQWN0aXZlRGF0YS5UYWIgb3IgbmlsDQoNCgkJCQkJLS0vLyBSZW1vdmUgdGhlIFJlbW90ZSB0YWINCgkJCQkJaWYgVGFiIHRoZW4NCgkJCQkJCUluZm9TZWxlY3RvcjpSZW1vdmVUYWIoVGFiKQ0KCQkJCQllbmQNCg0KCQkJCQktLS8vIENsZWFyIGFsbCBsb2cgZWxlbWVudHMNCgkJCQkJQWN0aXZlRGF0YSA9IG5pbA0KCQkJCQlzZWxmOkNsZWFyTG9ncygpDQoJCQkJZW5kLA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIkNsZWFyIGJsb2NrcyIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCVByb2Nlc3M6VXBkYXRlQWxsUmVtb3RlRGF0YSgiQmxvY2tlZCIsIGZhbHNlKQ0KCQkJCWVuZCwNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJDbGVhciBleGNsdWRlcyIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCVByb2Nlc3M6VXBkYXRlQWxsUmVtb3RlRGF0YSgiRXhjbHVkZWQiLCBmYWxzZSkNCgkJCQllbmQsDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiSm9pbiBEaXNjb3JkIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJUHJvY2VzczpQcm9tcHREaXNjb3JkSW52aXRlKCJzOW5nbVVEV2diIikNCgkJCQkJc2VsZjpTZXRDbGlwYm9hcmQoImh0dHBzOi8vZGlzY29yZC5nZy9zOW5nbVVEV2diIikNCgkJCQllbmQsDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiQ29weSBHaXRodWIiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlzZWxmOlNldENsaXBib2FyZCgiaHR0cHM6Ly9naXRodWIuY29tL2RlcHRoc28vU2lnbWEtU3B5IikNCgkJCQllbmQsDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiRWRpdCBTcG9vZnMiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlzZWxmOkVkaXRGaWxlKCJSZXR1cm4gc3Bvb2ZzLmx1YSIsIHRydWUsIGZ1bmN0aW9uKFdpbmRvdywgQ29udGVudDogc3RyaW5nKQ0KCQkJCQkJV2luZG93OkNsb3NlKCkNCgkJCQkJCUNvbW1DaGFubmVsOkZpcmUoIlVwZGF0ZVNwb29mcyIsIENvbnRlbnQpDQoJCQkJCWVuZCkNCgkJCQllbmQsDQoJCQl9DQoJCX0NCgl9KQ0KDQoJLS0vLyBGbGFnIG9wdGlvbnMNCglUYWI6U2VwYXJhdG9yKHtUZXh0PSJTZXR0aW5ncyJ9KQ0KCXNlbGY6Q3JlYXRlRWxlbWVudHMoVGFiLCBGbGFnczpHZXRGbGFncygpKQ0KDQoJc2VsZjpBZGREZXRhaWxzU2VjdGlvbihUYWIpDQplbmQNCg0KZnVuY3Rpb24gVWk6QWRkRGV0YWlsc1NlY3Rpb24oT3B0aW9uc1RhYikNCglPcHRpb25zVGFiOlNlcGFyYXRvcih7VGV4dD0iSW5mb3JtYXRpb24ifSkNCglPcHRpb25zVGFiOkJ1bGxldFRleHQoew0KCQlSb3dzID0gew0KCQkJIlNpZ21hIHNweSAtIFdyaXR0ZW4gYnkgZGVwc28hIiwNCgkJCSJMaWJyYXJpZXM6IFJvYmxveC1QYXJzZXIsIERlYXItUmVHdWkiLA0KCQkJIlRoYW5rIHlvdSBzeW4ubHVhIGZvciBzdWdnZXN0aW5nIEkgbWFrZSB0aGlzIg0KCQl9DQoJfSkNCmVuZA0KDQpsb2NhbCBmdW5jdGlvbiBNYWtlQWN0aXZlRGF0YUNhbGxiYWNrKE5hbWU6IHN0cmluZykNCglyZXR1cm4gZnVuY3Rpb24oLi4uKQ0KCQlpZiBub3QgQWN0aXZlRGF0YSB0aGVuIHJldHVybiBlbmQNCgkJcmV0dXJuIEFjdGl2ZURhdGFbTmFtZV0oQWN0aXZlRGF0YSwgLi4uKQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIFVpOk1ha2VFZGl0b3JUYWIoSW5mb1NlbGVjdG9yKQ0KCWxvY2FsIERlZmF1bHQgPSBzZWxmLkRlZmF1bHRFZGl0b3JDb250ZW50DQoJbG9jYWwgU3ludGF4Q29sb3JzID0gQ29uZmlnLlN5bnRheENvbG9ycw0KDQoJLS0vLyBDcmVhdGUgdGFiDQoJbG9jYWwgRWRpdG9yVGFiID0gSW5mb1NlbGVjdG9yOkNyZWF0ZVRhYih7DQoJCU5hbWUgPSAiRWRpdG9yIg0KCX0pDQoNCgktLS8vIElERQ0KCWxvY2FsIENvZGVFZGl0b3IgPSBFZGl0b3JUYWI6Q29kZUVkaXRvcih7DQoJCUZpbGwgPSB0cnVlLA0KCQlFZGl0YWJsZSA9IHRydWUsDQoJCUZvbnRTaXplID0gMTMsDQoJCUNvbG9ycyA9IFN5bnRheENvbG9ycywNCgkJRm9udEZhY2UgPSBUZXh0Rm9udCwNCgkJVGV4dCA9IERlZmF1bHQNCgl9KQ0KDQoJLS0vLyBCdXR0b25zDQoJbG9jYWwgQnV0dG9uc1JvdyA9IEVkaXRvclRhYjpSb3coKQ0KCXNlbGY6Q3JlYXRlQnV0dG9ucyhCdXR0b25zUm93LCB7DQoJCU5vVGFibGUgPSB0cnVlLA0KCQlCdXR0b25zID0gew0KCQkJew0KCQkJCVRleHQgPSAiQ29weSIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCWxvY2FsIFNjcmlwdCA9IENvZGVFZGl0b3I6R2V0VGV4dCgpDQoJCQkJCXNlbGY6U2V0Q2xpcGJvYXJkKFNjcmlwdCkNCgkJCQllbmQNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJSdW4iLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlsb2NhbCBTY3JpcHQgPSBDb2RlRWRpdG9yOkdldFRleHQoKQ0KCQkJCQlsb2NhbCBGdW5jLCBFcnJvciA9IGxvYWRzdHJpbmcoU2NyaXB0LCAiU2lnbWFTcHktVVNFUlNDUklQVCIpDQoNCgkJCQkJLS0vLyBTeW50YXggY2hlY2sNCgkJCQkJaWYgbm90IEZ1bmMgdGhlbg0KCQkJCQkJc2VsZjpTaG93TW9kYWwoeyJFcnJvciBydW5uaW5nIHNjcmlwdCFcbiIsIEVycm9yfSkNCgkJCQkJCXJldHVybg0KCQkJCQllbmQNCg0KCQkJCQlGdW5jKCkNCgkJCQllbmQNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJHZXQgcmV0dXJuIiwNCgkJCQlDYWxsYmFjayA9IE1ha2VBY3RpdmVEYXRhQ2FsbGJhY2soIkdldFJldHVybiIpDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiU2NyaXB0IiwNCgkJCQlDYWxsYmFjayA9IE1ha2VBY3RpdmVEYXRhQ2FsbGJhY2soIlNjcmlwdE9wdGlvbnMiKQ0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIkJ1aWxkIiwNCgkJCQlDYWxsYmFjayA9IE1ha2VBY3RpdmVEYXRhQ2FsbGJhY2soIkJ1aWxkU2NyaXB0IikNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJQb3Atb3V0IiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJbG9jYWwgU2NyaXB0ID0gQ29kZUVkaXRvcjpHZXRUZXh0KCkNCgkJCQkJbG9jYWwgVGlsZSA9IEFjdGl2ZURhdGEgYW5kIEFjdGl2ZURhdGEuVGFzayBvciAiU2lnbWEgU3B5Ig0KCQkJCQlzZWxmOk1ha2VFZGl0b3JQb3BvdXRXaW5kb3coU2NyaXB0LCB7DQoJCQkJCQlUaXRsZSA9IFRpbGUNCgkJCQkJfSkNCgkJCQllbmQNCgkJCX0sDQoJCX0NCgl9KQ0KCQ0KCXNlbGYuQ29kZUVkaXRvciA9IENvZGVFZGl0b3INCmVuZA0KDQpmdW5jdGlvbiBVaTpTaG91bGRGb2N1cyhUYWIpOiBib29sZWFuDQoJbG9jYWwgSW5mb1NlbGVjdG9yID0gc2VsZi5JbmZvU2VsZWN0b3INCglsb2NhbCBBY3RpdmVUYWIgPSBJbmZvU2VsZWN0b3IuQWN0aXZlVGFiDQoNCgktLS8vIElmIHRoZXJlIGlzIGFuIGVtcHR5IHRhYg0KCWlmIG5vdCBBY3RpdmVUYWIgdGhlbg0KCQlyZXR1cm4gdHJ1ZQ0KCWVuZA0KDQoJcmV0dXJuIEluZm9TZWxlY3RvcjpDb21wYXJlVGFicyhBY3RpdmVUYWIsIFRhYikNCmVuZA0KDQpmdW5jdGlvbiBVaTpNYWtlRWRpdG9yUG9wb3V0V2luZG93KENvbnRlbnQ6IHN0cmluZywgV2luZG93Q29uZmlnOiB0YWJsZSkNCglsb2NhbCBXaW5kb3cgPSBzZWxmOkNyZWF0ZVdpbmRvdyhXaW5kb3dDb25maWcpDQoJbG9jYWwgQnV0dG9ucyA9IFdpbmRvd0NvbmZpZy5CdXR0b25zIG9yIHt9DQoJbG9jYWwgQ29sb3JzID0gQ29uZmlnLlN5bnRheENvbG9ycw0KDQoJbG9jYWwgQ29kZUVkaXRvciA9IFdpbmRvdzpDb2RlRWRpdG9yKHsNCgkJVGV4dCA9IENvbnRlbnQsDQoJCUVkaXRhYmxlID0gdHJ1ZSwNCgkJRmlsbCA9IHRydWUsDQoJCUZvbnRTaXplID0gMTMsDQoJCUNvbG9ycyA9IENvbG9ycywNCgkJRm9udEZhY2UgPSBUZXh0Rm9udA0KCX0pDQoNCgktLS8vIERlZmF1bHQgYnV0dG9ucw0KCXRhYmxlLmluc2VydChCdXR0b25zLCB7DQoJCVRleHQgPSAiQ29weSIsDQoJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJbG9jYWwgU2NyaXB0ID0gQ29kZUVkaXRvcjpHZXRUZXh0KCkNCgkJCXNlbGY6U2V0Q2xpcGJvYXJkKFNjcmlwdCkNCgkJZW5kDQoJfSkNCg0KCS0tLy8gQnV0dG9ucw0KCWxvY2FsIEJ1dHRvbnNSb3cgPSBXaW5kb3c6Um93KCkNCglzZWxmOkNyZWF0ZUJ1dHRvbnMoQnV0dG9uc1Jvdywgew0KCQlOb1RhYmxlID0gdHJ1ZSwNCgkJQnV0dG9ucyA9IEJ1dHRvbnMNCgl9KQ0KDQoJV2luZG93OkNlbnRlcigpDQoJcmV0dXJuIENvZGVFZGl0b3IsIFdpbmRvdw0KZW5kDQoNCmZ1bmN0aW9uIFVpOkVkaXRGaWxlKEZpbGVQYXRoOiBzdHJpbmcsIEluRm9sZGVyOiBib29sZWFuLCBPblNhdmVGdW5jOiAoKHRhYmxlLCBzdHJpbmcpIC0+IG5pbCk/KQ0KCWxvY2FsIEZvbGRlciA9IEZpbGVzLkZvbGRlck5hbWUNCglsb2NhbCBDb2RlRWRpdG9yLCBXaW5kb3cNCg0KCS0tLy8gUmVsYXRpdmUgdG8gU2lnbWEgU3B5IGZvbGRlcg0KCWlmIEluRm9sZGVyIHRoZW4NCgkJRmlsZVBhdGggPSBge0ZvbGRlcn0ve0ZpbGVQYXRofWANCgllbmQNCg0KCS0tLy8gR2V0IGZpbGUgY29udGVudA0KCWxvY2FsIENvbnRlbnQgPSByZWFkZmlsZShGaWxlUGF0aCkNCglDb250ZW50ID0gQ29udGVudDpnc3ViKCJcclxuIiwgIlxuIikNCgkNCglsb2NhbCBCdXR0b25zID0gew0KCQl7DQoJCQlUZXh0ID0gIlNhdmUiLA0KCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJbG9jYWwgU2NyaXB0ID0gQ29kZUVkaXRvcjpHZXRUZXh0KCkNCgkJCQlsb2NhbCBTdWNjZXNzLCBFcnJvciA9IGxvYWRzdHJpbmcoU2NyaXB0LCAiU2lnbWFTcHktRWRpdG9yIikNCg0KCQkJCS0tLy8gU3ludGF4IGNoZWNrDQoJCQkJaWYgbm90IFN1Y2Nlc3MgdGhlbg0KCQkJCQlzZWxmOlNob3dNb2RhbCh7IkVycm9yIHNhdmluZyBmaWxlIVxuIiwgRXJyb3J9KQ0KCQkJCQlyZXR1cm4NCgkJCQllbmQNCgkJCQkNCgkJCQktLS8vIFNhdmUgY29udGVudHMNCgkJCQl3cml0ZWZpbGUoRmlsZVBhdGgsIFNjcmlwdCkNCg0KCQkJCS0tLy8gSW52b2tlIG9uIHNhdmUgZnVuY3Rpb24NCgkJCQlpZiBPblNhdmVGdW5jIHRoZW4NCgkJCQkJT25TYXZlRnVuYyhXaW5kb3csIFNjcmlwdCkNCgkJCQllbmQNCgkJCWVuZA0KCQl9DQoJfQ0KDQoJLS0vLyBDcmVhdGUgRWRpdG9yIFdpbmRvdw0KCUNvZGVFZGl0b3IsIFdpbmRvdyA9IHNlbGY6TWFrZUVkaXRvclBvcG91dFdpbmRvdyhDb250ZW50LCB7DQoJCVRpdGxlID0gYEVkaXRpbmc6IHtGaWxlUGF0aH1gLA0KCQlCdXR0b25zID0gQnV0dG9ucw0KCX0pDQplbmQNCg0KdHlwZSBNZW51T3B0aW9ucyA9IHsNCglbc3RyaW5nXTogKEd1aUJ1dHRvbiwgLi4uYW55KSAtPiBuaWwNCn0NCmZ1bmN0aW9uIFVpOk1ha2VCdXR0b25NZW51KEJ1dHRvbjogSW5zdGFuY2UsIFVucGFjazogdGFibGUsIE9wdGlvbnM6IE1lbnVPcHRpb25zKQ0KCWxvY2FsIFdpbmRvdyA9IHNlbGYuV2luZG93DQoJbG9jYWwgUG9wdXAgPSBXaW5kb3c6UG9wdXBDYW52YXMoew0KCQlSZWxhdGl2ZVRvID0gQnV0dG9uLA0KCQlNYXhTaXplWCA9IDUwMCwNCgl9KQ0KDQoJLS0vLyBDcmVhdGUgU2VsZWN0YWJsZXMgZm9yIHN0cmluZywgZnVuY3Rpb24NCglmb3IgTmFtZSwgRnVuYyBpbiBPcHRpb25zIGRvDQoJCSBQb3B1cDpTZWxlY3RhYmxlKHsNCgkJCVRleHQgPSBOYW1lLA0KCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJRnVuYyhQcm9jZXNzOlVucGFjayhVbnBhY2spKQ0KCQkJZW5kLA0KCQl9KQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIFVpOlJlbW92ZVByZXZpb3VzVGFiKFRpdGxlOiBzdHJpbmcpOiBib29sZWFuDQoJLS0vLyBObyBwcmV2aW91cyB0YWJzDQoJaWYgbm90IEFjdGl2ZURhdGEgdGhlbiANCgkJcmV0dXJuIGZhbHNlIA0KCWVuZA0KDQoJLS0vLyBUYWJTZWxlY3Rvcg0KCWxvY2FsIEluZm9TZWxlY3RvciA9IHNlbGYuSW5mb1NlbGVjdG9yDQoNCgktLS8vIFByZXZpb3VzIGVsZW1lbnRzDQoJbG9jYWwgUHJldmlvdXNUYWIgPSBBY3RpdmVEYXRhLlRhYg0KCWxvY2FsIFByZXZpb3VzU2VsZWN0YWJsZSA9IEFjdGl2ZURhdGEuU2VsZWN0YWJsZQ0KDQoJLS0vLyBSZW1vdmUgcHJldmlvdXMgdGFiIGFuZCBzZXQgc2VsZWN0YWJsZSBmb2N1cw0KCWxvY2FsIFRhYkZvY3VzZWQgPSBzZWxmOlNob3VsZEZvY3VzKFByZXZpb3VzVGFiKQ0KCUluZm9TZWxlY3RvcjpSZW1vdmVUYWIoUHJldmlvdXNUYWIpDQoJUHJldmlvdXNTZWxlY3RhYmxlOlNldFNlbGVjdGVkKGZhbHNlKQ0KDQoJLS0vLyBDcmVhdGUgbmV3IHRhYg0KCXJldHVybiBUYWJGb2N1c2VkDQplbmQNCg0KZnVuY3Rpb24gVWk6TWFrZVRhYmxlSGVhZGVycyhUYWJsZSwgUm93czogdGFibGUpDQoJbG9jYWwgSGVhZGVyUm93ID0gVGFibGU6SGVhZGVyUm93KCkNCglmb3IgXywgQ2F0YWdvcnkgaW4gUm93cyBkbw0KCQlsb2NhbCBDb2x1bW4gPSBIZWFkZXJSb3c6TmV4dENvbHVtbigpDQoJCUNvbHVtbjpMYWJlbCh7VGV4dD1DYXRhZ29yeX0pDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gVWk6RGVjb21waWxlKEVkaXRvcjogdGFibGUsIFNjcmlwdDogU2NyaXB0KQ0KCWxvY2FsIEhlYWRlciA9ICItLUJPT0lJSUkgVEhJUyBJUyBTTyBUVUZGIEZMSVBQWSBTS0lCSURJIEFVUkEgKFNJR01BIFNQWSkiDQoJRWRpdG9yOlNldFRleHQoIi0tRGVjb21waWxpbmcuLi4gKzk5OTk5OTkgQVVSQSAobWFuZ28gcGhvbmspIikNCg0KCS0tLy8gRGVjb21waWxlIHNjcmlwdA0KCWxvY2FsIERlY29tcGlsZWQsIElzRXJyb3IgPSBQcm9jZXNzOkRlY29tcGlsZShTY3JpcHQpDQoNCgktLS8vIEFkZCBoZWFkZXIgZm9yIHN1Y2Nlc3NmdWwgZGVjb21waWxhdGlvbnMNCglpZiBub3QgSXNFcnJvciB0aGVuDQoJCURlY29tcGlsZWQgPSBge0hlYWRlcn1cbntEZWNvbXBpbGVkfWANCgllbmQNCg0KCUVkaXRvcjpTZXRUZXh0KERlY29tcGlsZWQpDQplbmQNCg0KdHlwZSBEaXNwbGF5VGFibGVDb25maWcgPSB7DQoJUm93czogdGFibGUsDQoJRmxhZ3M6IHRhYmxlPywNCglUb0Rpc3BsYXk6IHRhYmxlLA0KCVRhYmxlOiB0YWJsZQ0KfQ0KZnVuY3Rpb24gVWk6RGlzcGxheVRhYmxlKFBhcmVudCwgQ29uZmlnOiBEaXNwbGF5VGFibGVDb25maWcpOiB0YWJsZQ0KCS0tLy8gQ29uZmlndXJhdGlvbg0KCWxvY2FsIFJvd3MgPSBDb25maWcuUm93cw0KCWxvY2FsIEZsYWdzID0gQ29uZmlnLkZsYWdzDQoJbG9jYWwgRGF0YVRhYmxlID0gQ29uZmlnLlRhYmxlDQoJbG9jYWwgVG9EaXNwbGF5ID0gQ29uZmlnLlRvRGlzcGxheQ0KDQoJRmxhZ3MuTWF4Q29sdW1ucyA9ICNSb3dzDQoNCgktLS8vIENyZWF0ZSB0YWJsZQ0KCWxvY2FsIFRhYmxlID0gUGFyZW50OlRhYmxlKEZsYWdzKQ0KDQoJLS0vLyBUYWJsZSBoZWFkZXJzDQoJc2VsZjpNYWtlVGFibGVIZWFkZXJzKFRhYmxlLCBSb3dzKQ0KDQoJLS0vLyBUYWJsZSBsYXlvdXQNCglmb3IgUm93SW5kZXgsIE5hbWUgaW4gVG9EaXNwbGF5IGRvDQoJCWxvY2FsIFJvdyA9IFRhYmxlOlJvdygpDQoJCQ0KCQktLS8vIENyZWF0ZSBDb2x1bW5zDQoJCWZvciBDb3VudCwgQ2F0YWdvcnkgaW4gUm93cyBkbw0KCQkJbG9jYWwgQ29sdW1uID0gUm93Ok5leHRDb2x1bW4oKQ0KCQkJDQoJCQktLS8vIFZhbHVlIHRleHQNCgkJCWxvY2FsIFZhbHVlID0gQ2F0YWdvcnkgPT0gIk5hbWUiIGFuZCBOYW1lIG9yIERhdGFUYWJsZVtOYW1lXQ0KCQkJaWYgbm90IFZhbHVlIHRoZW4gY29udGludWUgZW5kDQoNCgkJCS0tLy8gQ3JlYXRlIGZpbHRlcmVkIGxhYmVsDQoJCQlsb2NhbCBTdHJpbmcgPSBzZWxmOkZpbHRlck5hbWUoYHtWYWx1ZX1gLCAxNTApDQoJCQlDb2x1bW46TGFiZWwoe1RleHQ9U3RyaW5nfSkNCgkJZW5kDQoJZW5kDQoNCglyZXR1cm4gVGFibGUNCmVuZA0KDQpmdW5jdGlvbiBVaTpTZXRGb2N1c2VkUmVtb3RlKERhdGEpDQoJLS0vLyBVbnBhY2sgcmVtb3RlIGRhdGENCglsb2NhbCBSZW1vdGUgPSBEYXRhLlJlbW90ZQ0KCWxvY2FsIE1ldGhvZCA9IERhdGEuTWV0aG9kDQoJbG9jYWwgSXNSZWNlaXZlID0gRGF0YS5Jc1JlY2VpdmUNCglsb2NhbCBTY3JpcHQgPSBEYXRhLkNhbGxpbmdTY3JpcHQNCglsb2NhbCBDbGFzc0RhdGEgPSBEYXRhLkNsYXNzRGF0YQ0KCWxvY2FsIEhlYWRlckRhdGEgPSBEYXRhLkhlYWRlckRhdGENCglsb2NhbCBWYWx1ZVN3YXBzID0gRGF0YS5WYWx1ZVN3YXBzDQoJbG9jYWwgQXJncyA9IERhdGEuQXJncw0KCWxvY2FsIElkID0gRGF0YS5JZA0KDQoJLS0vLyBGbGFncw0KCWxvY2FsIFRhYmxlQXJncyA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiVGFibGVBcmdzIikNCglsb2NhbCBOb1ZhcmlhYmxlcyA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiTm9WYXJpYWJsZXMiKQ0KDQoJLS0vLyBVbnBhY2sgaW5mbw0KCWxvY2FsIFJlbW90ZURhdGEgPSBQcm9jZXNzOkdldFJlbW90ZURhdGEoSWQpDQoJbG9jYWwgSXNSZW1vdGVGdW5jdGlvbiA9IENsYXNzRGF0YS5Jc1JlbW90ZUZ1bmN0aW9uDQoJbG9jYWwgUmVtb3RlTmFtZSA9IHNlbGY6RmlsdGVyTmFtZShge1JlbW90ZX1gLCA1MCkNCg0KCS0tLy8gVUkgZGF0YQ0KCWxvY2FsIENvZGVFZGl0b3IgPSBzZWxmLkNvZGVFZGl0b3INCglsb2NhbCBUb0Rpc3BsYXkgPSBzZWxmLkRpc3BsYXlSZW1vdGVJbmZvDQoJbG9jYWwgSW5mb1NlbGVjdG9yID0gc2VsZi5JbmZvU2VsZWN0b3INCg0KCWxvY2FsIFRhYkZvY3VzZWQgPSBzZWxmOlJlbW92ZVByZXZpb3VzVGFiKCkNCglsb2NhbCBUYWIgPSBJbmZvU2VsZWN0b3I6Q3JlYXRlVGFiKHsNCgkJTmFtZSA9IHNlbGY6RmlsdGVyTmFtZShgUmVtb3RlOiB7UmVtb3RlTmFtZX1gLCA1MCksDQoJCUZvY3VzZWQgPSBUYWJGb2N1c2VkDQoJfSkNCg0KCS0tLy8gQ3JlYXRlIG5ldyBwYXJzZXINCglsb2NhbCBNb2R1bGUgPSBHZW5lcmF0aW9uOk5ld1BhcnNlcih7DQoJCU5vVmFyaWFibGVzID0gTm9WYXJpYWJsZXMNCgl9KQ0KCWxvY2FsIFBhcnNlciA9IE1vZHVsZS5QYXJzZXINCglsb2NhbCBGb3JtYXR0ZXIgPSBNb2R1bGUuRm9ybWF0dGVyDQoJRm9ybWF0dGVyOlNldFZhbHVlU3dhcHMoVmFsdWVTd2FwcykNCg0KCS0tLy8gU2V0IHRoaXMgbG9nIHRvIGJlIHNlbGVjdGVkDQoJQWN0aXZlRGF0YSA9IERhdGENCglEYXRhLlRhYiA9IFRhYg0KCURhdGEuU2VsZWN0YWJsZTpTZXRTZWxlY3RlZCh0cnVlKQ0KDQoJbG9jYWwgZnVuY3Rpb24gU2V0SURFVGV4dChDb250ZW50OiBzdHJpbmcsIFRhc2s6IHN0cmluZz8pDQoJCURhdGEuVGFzayA9IFRhc2sgb3IgIlNpZ21hIFNweSINCgkJQ29kZUVkaXRvcjpTZXRUZXh0KENvbnRlbnQpDQoJZW5kDQoJbG9jYWwgZnVuY3Rpb24gRGF0YUNvbm5lY3Rpb24oTmFtZSwgLi4uKQ0KCQlsb2NhbCBBcmdzID0gey4uLn0NCgkJcmV0dXJuIGZ1bmN0aW9uKCkNCgkJCXJldHVybiBEYXRhW05hbWVdKERhdGEsIFByb2Nlc3M6VW5wYWNrKEFyZ3MpKQ0KCQllbmQNCgllbmQNCglsb2NhbCBmdW5jdGlvbiBTY3JpcHRDaGVjayhTY3JpcHQsIE5vTWlzc2luZ0NoZWNrOiBib29sZWFuKTogYm9vbGVhbj8NCgkJLS0vLyBSZWplY3QgY2xpZW50IGV2ZW50cw0KCQlpZiBJc1JlY2VpdmUgdGhlbiANCgkJCVVpOlNob3dNb2RhbCh7DQoJCQkJIlJlY2lldmVzIGRvIG5vdCBoYXZlIGEgc2NyaXB0IGJlY2F1c2UgaXQncyBhIENvbm5lY3Rpb24iDQoJCQl9KQ0KCQkJcmV0dXJuIA0KCQllbmQNCg0KCQktLS8vIENoZWNrIGlmIHNjcmlwdCBleGlzdHMNCgkJaWYgbm90IFNjcmlwdCBhbmQgbm90IE5vTWlzc2luZ0NoZWNrIHRoZW4gDQoJCQlVaTpTaG93TW9kYWwoeyJUaGUgU2NyaXB0IGhhcyBiZWVuIGRlc3Ryb3llZCBieSB0aGUgZ2FtZSAoLTk5OTk5OTkgQVVSQSkifSkNCgkJCXJldHVybg0KCQllbmQNCg0KCQlyZXR1cm4gdHJ1ZQ0KCWVuZA0KDQoJLS0vLyBGdW5jdGlvbnMNCglmdW5jdGlvbiBEYXRhOlNjcmlwdE9wdGlvbnMoQnV0dG9uOiBHdWlCdXR0b24pDQoJCVVpOk1ha2VCdXR0b25NZW51KEJ1dHRvbiwge3NlbGZ9LCB7DQoJCQlbIkNhbGxlciBJbmZvIl0gPSBEYXRhQ29ubmVjdGlvbigiR2VuZXJhdGVJbmZvIiksDQoJCQlbIkRlY29tcGlsZSJdID0gRGF0YUNvbm5lY3Rpb24oIkRlY29tcGlsZSIsICJTb3VyY2VTY3JpcHQiKSwNCgkJCVsiRGVjb21waWxlIENhbGxpbmciXSA9IERhdGFDb25uZWN0aW9uKCJEZWNvbXBpbGUiLCAiQ2FsbGluZ1NjcmlwdCIpLA0KCQkJWyJSZXBlYXQgQ2FsbCJdID0gRGF0YUNvbm5lY3Rpb24oIlJlcGVhdENhbGwiKSwNCgkJCVsiU2F2ZSBCeXRlY29kZSJdID0gRGF0YUNvbm5lY3Rpb24oIlNhdmVCeXRlY29kZSIpLA0KCQl9KQ0KCWVuZA0KCWZ1bmN0aW9uIERhdGE6QnVpbGRTY3JpcHQoQnV0dG9uOiBHdWlCdXR0b24pDQoJCVVpOk1ha2VCdXR0b25NZW51KEJ1dHRvbiwge3NlbGZ9LCB7DQoJCQlbIlNhdmUiXSA9IERhdGFDb25uZWN0aW9uKCJTYXZlU2NyaXB0IiksDQoJCQlbIkNhbGwgUmVtb3RlIl0gPSBEYXRhQ29ubmVjdGlvbigiTWFrZVNjcmlwdCIsICJSZW1vdGUiKSwNCgkJCVsiQmxvY2sgUmVtb3RlIl0gPSBEYXRhQ29ubmVjdGlvbigiTWFrZVNjcmlwdCIsICJCbG9jayIpLA0KCQkJWyJSZXBlYXQgRm9yIl0gPSBEYXRhQ29ubmVjdGlvbigiTWFrZVNjcmlwdCIsICJSZXBlYXQiKSwNCgkJCVsiU3BhbSBSZW1vdGUiXSA9IERhdGFDb25uZWN0aW9uKCJNYWtlU2NyaXB0IiwgIlNwYW0iKQ0KCQl9KQ0KCWVuZA0KCWZ1bmN0aW9uIERhdGE6U2F2ZVNjcmlwdCgpDQoJCWxvY2FsIEZpbGVQYXRoID0gR2VuZXJhdGlvbjpUaW1lU3RhbXBGaWxlKHNlbGYuVGFzaykNCgkJd3JpdGVmaWxlKEZpbGVQYXRoLCBDb2RlRWRpdG9yOkdldFRleHQoKSkNCg0KCQlVaTpTaG93TW9kYWwoeyJTYXZlZCBzY3JpcHQgdG8iLCBGaWxlUGF0aH0pDQoJZW5kDQoJZnVuY3Rpb24gRGF0YTpTYXZlQnl0ZWNvZGUoKQ0KCQktLS8vIFByb2JsZW0gY2hlY2sNCgkJaWYgbm90IFNjcmlwdENoZWNrKFNjcmlwdCwgdHJ1ZSkgdGhlbiByZXR1cm4gZW5kDQoNCgkJLS0vLyBnZXRzY3JpcHRieXRlY29kZQ0KICAgIAlsb2NhbCBTdWNjZXNzLCBCeXRlY29kZSA9IHBjYWxsKGdldHNjcmlwdGJ5dGVjb2RlLCBTY3JpcHQpDQoJCWlmIG5vdCBTdWNjZXNzIHRoZW4NCgkJCVVpOlNob3dNb2RhbCh7IkZhaWxlZCB0byBnZXQgU2NyaXB0ZSBieXRlY29kZSAoLTk5OTk5OTkgQVVSQSkifSkNCgkJCXJldHVybg0KCQllbmQNCg0KCQktLS8vIFNhdmUgZmlsZQ0KCQlsb2NhbCBQYXRoQmFzZSA9IGB7U2NyaXB0fSAlcy50eHRgDQoJCWxvY2FsIEZpbGVQYXRoID0gR2VuZXJhdGlvbjpUaW1lU3RhbXBGaWxlKFBhdGhCYXNlKQ0KCQl3cml0ZWZpbGUoRmlsZVBhdGgsIEJ5dGVjb2RlKQ0KDQoJCVVpOlNob3dNb2RhbCh7IlNhdmVkIGJ5dGVjb2RlIHRvIiwgRmlsZVBhdGh9KQ0KCWVuZA0KCWZ1bmN0aW9uIERhdGE6TWFrZVNjcmlwdChTY3JpcHRUeXBlOiBzdHJpbmcpDQoJCWxvY2FsIFNjcmlwdCA9IEdlbmVyYXRpb246UmVtb3RlU2NyaXB0KE1vZHVsZSwgc2VsZiwgU2NyaXB0VHlwZSkNCgkJU2V0SURFVGV4dChTY3JpcHQsIGBFZGl0aW5nOiB7UmVtb3RlTmFtZX0ubHVhYCkNCgllbmQNCglmdW5jdGlvbiBEYXRhOlJlcGVhdENhbGwoKQ0KCQlsb2NhbCBTaWduYWwgPSBIb29rOkluZGV4KFJlbW90ZSwgTWV0aG9kKQ0KDQoJCWlmIElzUmVjZWl2ZSB0aGVuDQoJCQlmaXJlc2lnbmFsKFNpZ25hbCwgUHJvY2VzczpVbnBhY2soQXJncykpDQoJCWVsc2UNCgkJCVNpZ25hbChSZW1vdGUsIFByb2Nlc3M6VW5wYWNrKEFyZ3MpKQ0KCQllbmQNCgllbmQNCglmdW5jdGlvbiBEYXRhOkdldFJldHVybigpDQoJCWxvY2FsIFJldHVyblZhbHVlcyA9IHNlbGYuUmV0dXJuVmFsdWVzDQoNCgkJLS0vLyBFcnJvciBtZXNzYWdlcw0KCQlpZiBub3QgSXNSZW1vdGVGdW5jdGlvbiB0aGVuDQoJCQlVaTpTaG93TW9kYWwoeyJUaGUgUmVtb3RlIGlzIG5vdCBhIFJlbW90ZSBGdW5jdGlvbiAoLTk5OTk5OTkgQVVSQSkifSkNCgkJCXJldHVybg0KCQllbmQNCgkJaWYgbm90IFJldHVyblZhbHVlcyB0aGVuDQoJCQlVaTpTaG93TW9kYWwoeyJObyByZXR1cm4gdmFsdWVzICgtOTk5OTk5OSBBVVJBKSJ9KQ0KCQkJcmV0dXJuDQoJCWVuZA0KDQoJCS0tLy8gR2VuZXJhdGUgc2NyaXB0DQoJCWxvY2FsIFNjcmlwdCA9IEdlbmVyYXRpb246VGFibGVTY3JpcHQoTW9kdWxlLCBSZXR1cm5WYWx1ZXMpDQoJCVNldElERVRleHQoU2NyaXB0LCBgUmV0dXJuIFZhbHVlcyBmb3I6IHtSZW1vdGVOYW1lfWApDQoJZW5kDQoJZnVuY3Rpb24gRGF0YTpHZW5lcmF0ZUluZm8oKQ0KCQktLS8vIFByb2JsZW0gY2hlY2sNCgkJaWYgbm90IFNjcmlwdENoZWNrKG5pbCwgdHJ1ZSkgdGhlbiByZXR1cm4gZW5kDQoNCgkJLS0vLyBHZW5lcmF0ZSBzY3JpcHQNCgkJbG9jYWwgU2NyaXB0ID0gR2VuZXJhdGlvbjpBZHZhbmNlZEluZm8oTW9kdWxlLCBzZWxmKQ0KCQlTZXRJREVUZXh0KFNjcmlwdCwgYEFkdmFuY2VkIEluZm8gZm9yOiB7UmVtb3RlTmFtZX1gKQ0KCWVuZA0KCWZ1bmN0aW9uIERhdGE6RGVjb21waWxlKFdoaWNoU2NyaXB0OiBzdHJpbmcpDQoJCWxvY2FsIERlY29tcGlsZVBvcG91dCA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiRGVjb21waWxlUG9wb3V0IikNCgkJbG9jYWwgVG9EZWNvbXBpbGUgPSBEYXRhW1doaWNoU2NyaXB0XQ0KCQlsb2NhbCBFZGl0b3IgPSBDb2RlRWRpdG9yDQoNCgkJLS0vLyBQcm9ibGVtIGNoZWNrDQoJCWlmIG5vdCBTY3JpcHRDaGVjayhUb0RlY29tcGlsZSwgdHJ1ZSkgdGhlbiByZXR1cm4gZW5kDQoJCWxvY2FsIFRhc2sgPSBVaTpGaWx0ZXJOYW1lKGBWaWV3aW5nOiB7VG9EZWNvbXBpbGV9Lmx1YWAsIDIwMCkNCgkJDQoJCS0tLy8gQXV0b21hdGljYWxseSBQb3Atb3V0IHRoZSBlZGl0b3IgZm9yIGRlY29tcGlsaW5nIGlmIGVuYWJsZWQNCgkJaWYgRGVjb21waWxlUG9wb3V0IHRoZW4NCgkJCUVkaXRvciA9IFVpOk1ha2VFZGl0b3JQb3BvdXRXaW5kb3coIiIsIHsNCgkJCQlUaXRsZSA9IFRhc2sNCgkJCX0pDQoJCWVuZA0KDQoJCVVpOkRlY29tcGlsZShFZGl0b3IsIFRvRGVjb21waWxlKQ0KCWVuZA0KCQ0KCS0tLy8gUmVtb3RlT3B0aW9ucw0KCXNlbGY6Q3JlYXRlT3B0aW9uc0ZvckRpY3QoVGFiLCBSZW1vdGVEYXRhLCBmdW5jdGlvbigpDQoJCVByb2Nlc3M6VXBkYXRlUmVtb3RlRGF0YShJZCwgUmVtb3RlRGF0YSkNCgllbmQpDQoNCgktLS8vIEluc3RhbmNlIG9wdGlvbnMNCglzZWxmOkNyZWF0ZUJ1dHRvbnMoVGFiLCB7DQoJCUJhc2UgPSB7DQoJCQlTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDIwKSwNCgkJCUF1dG9tYXRpY1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuWSwNCgkJfSwNCgkJQnV0dG9ucyA9IHsNCgkJCXsNCgkJCQlUZXh0ID0gIkNvcHkgc2NyaXB0IHBhdGgiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlTZXRDbGlwYm9hcmQoUGFyc2VyOk1ha2VQYXRoU3RyaW5nKHsNCgkJCQkJCU9iamVjdCA9IFNjcmlwdCwNCgkJCQkJCU5vVmFyaWFibGVzID0gdHJ1ZQ0KCQkJCQl9KSkNCgkJCQllbmQsDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiQ29weSByZW1vdGUgcGF0aCIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCVNldENsaXBib2FyZChQYXJzZXI6TWFrZVBhdGhTdHJpbmcoew0KCQkJCQkJT2JqZWN0ID0gUmVtb3RlLA0KCQkJCQkJTm9WYXJpYWJsZXMgPSB0cnVlDQoJCQkJCX0pKQ0KCQkJCWVuZCwNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJSZW1vdmUgbG9nIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJSW5mb1NlbGVjdG9yOlJlbW92ZVRhYihUYWIpDQoJCQkJCURhdGEuU2VsZWN0YWJsZTpSZW1vdmUoKQ0KCQkJCQlIZWFkZXJEYXRhOlJlbW92ZSgpDQoJCQkJCUFjdGl2ZURhdGEgPSBuaWwNCgkJCQllbmQsDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiRHVtcCBsb2dzIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJbG9jYWwgTG9ncyA9IEhlYWRlckRhdGEuRW50cmllcw0KCQkJCQlsb2NhbCBGaWxlUGF0aCA9IEdlbmVyYXRpb246RHVtcExvZ3MoTG9ncykNCgkJCQkJc2VsZjpTaG93TW9kYWwoeyJTYXZlZCBkdW1wIHRvIiwgRmlsZVBhdGh9KQ0KCQkJCWVuZCwNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJWaWV3IENvbm5lY3Rpb25zIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJbG9jYWwgTWV0aG9kID0gQ2xhc3NEYXRhLlJlY2VpdmVbMV0NCgkJCQkJbG9jYWwgU2lnbmFsID0gUmVtb3RlW01ldGhvZF0NCgkJCQkJc2VsZjpWaWV3Q29ubmVjdGlvbnMoUmVtb3RlTmFtZSwgU2lnbmFsKQ0KCQkJCWVuZCwNCgkJCX0NCgkJfQ0KCX0pDQoNCgktLS8vIFJlbW90ZSBpbmZvcm1hdGlvbiB0YWJsZQ0KCXNlbGY6RGlzcGxheVRhYmxlKFRhYiwgew0KCQlSb3dzID0geyJOYW1lIiwgIlZhbHVlIn0sDQoJCVRhYmxlID0gRGF0YSwNCgkJVG9EaXNwbGF5ID0gVG9EaXNwbGF5LA0KCQlGbGFncyA9IHsNCgkJCUJvcmRlciA9IHRydWUsDQoJCQlSb3dCYWNrZ3JvdW5kID0gdHJ1ZSwNCgkJCU1heENvbHVtbnMgPSAyDQoJCX0NCgl9KQ0KCQ0KCS0tLy8gQXJndW1lbnRzIHRhYmxlIHNjcmlwdA0KCWlmIFRhYmxlQXJncyB0aGVuDQoJCWxvY2FsIFBhcnNlZCA9IEdlbmVyYXRpb246VGFibGVTY3JpcHQoTW9kdWxlLCBBcmdzKQ0KCQlTZXRJREVUZXh0KFBhcnNlZCwgYEFyZ3VtZW50cyBmb3Ige1JlbW90ZU5hbWV9YCkNCgkJcmV0dXJuDQoJZW5kDQoNCgktLS8vIFJlbW90ZSBjYWxsIHNjcmlwdA0KCURhdGE6TWFrZVNjcmlwdCgiUmVtb3RlIikNCmVuZA0KDQpmdW5jdGlvbiBVaTpWaWV3Q29ubmVjdGlvbnMoUmVtb3RlTmFtZTogc3RyaW5nLCBTaWduYWw6IFJCWFNjcmlwdENvbm5lY3Rpb24pDQoJbG9jYWwgV2luZG93ID0gc2VsZjpDcmVhdGVXaW5kb3coew0KCQlUaXRsZSA9IGBDb25uZWN0aW9ucyBmb3I6IHtSZW1vdGVOYW1lfWAsDQoJCVNpemUgPSBVRGltMi5mcm9tT2Zmc2V0KDQ1MCwgMjUwKQ0KCX0pDQoNCglsb2NhbCBUb0Rpc3BsYXkgPSB7DQoJCSJFbmFibGVkIiwNCgkJIkx1YUNvbm5lY3Rpb24iLA0KCQkiU2NyaXB0Ig0KCX0NCg0KCS0tLy8gR2V0IEZpbHRlcmVkIGNvbm5lY3Rpb25zDQoJbG9jYWwgQ29ubmVjdGlvbnMgPSBQcm9jZXNzOkZpbHRlckNvbm5lY3Rpb25zKFNpZ25hbCwgVG9EaXNwbGF5KQ0KDQoJLS0vLyBUYWJsZQ0KCWxvY2FsIFRhYmxlID0gV2luZG93OlRhYmxlKHsNCgkJQm9yZGVyID0gdHJ1ZSwNCgkJUm93QmFja2dyb3VuZCA9IHRydWUsDQoJCU1heENvbHVtbnMgPSAzDQoJfSkNCg0KCWxvY2FsIEJ1dHRvbnNGb3JWYWx1ZXMgPSB7DQoJCVsiU2NyaXB0Il0gPSBmdW5jdGlvbihSb3csIFZhbHVlKQ0KCQkJUm93OkJ1dHRvbih7DQoJCQkJVGV4dCA9ICJEZWNvbXBpbGUiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlsb2NhbCBUYXNrID0gc2VsZjpGaWx0ZXJOYW1lKGBWaWV3aW5nOiB7VmFsdWV9Lmx1YWAsIDIwMCkNCgkJCQkJbG9jYWwgRWRpdG9yID0gc2VsZjpNYWtlRWRpdG9yUG9wb3V0V2luZG93KG5pbCwgew0KCQkJCQkJVGl0bGUgPSBUYXNrDQoJCQkJCX0pDQoJCQkJCXNlbGY6RGVjb21waWxlKEVkaXRvciwgVmFsdWUpDQoJCQkJZW5kDQoJCQl9KQ0KCQllbmQsDQoJCVsiRW5hYmxlZCJdID0gZnVuY3Rpb24oUm93LCBFbmFibGVkLCBDb25uZWN0aW9uKQ0KCQkJUm93OkJ1dHRvbih7DQoJCQkJVGV4dCA9IEVuYWJsZWQgYW5kICJEaXNhYmxlIiBvciAiRW5hYmxlIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKHNlbGYpDQoJCQkJCUVuYWJsZWQgPSBub3QgRW5hYmxlZA0KCQkJCQlzZWxmLlRleHQgPSBFbmFibGVkIGFuZCAiRGlzYWJsZSIgb3IgIkVuYWJsZSINCg0KCQkJCQktLS8vIEVuYWJsZSBvciBkaXNhYmxlIHRoZSBjb25uZWN0aW9uDQoJCQkJCWlmIEVuYWJsZWQgdGhlbg0KCQkJCQkJQ29ubmVjdGlvbjpFbmFibGUoKQ0KCQkJCQllbHNlDQoJCQkJCQlDb25uZWN0aW9uOkRpc2FibGUoKQ0KCQkJCQllbmQNCgkJCQllbmQNCgkJCX0pDQoJCWVuZA0KCX0NCg0KCS0tLy8gTWFrZSBoZWFkZXJzIG9uIHRoZSB0YWJsZQ0KCXNlbGY6TWFrZVRhYmxlSGVhZGVycyhUYWJsZSwgVG9EaXNwbGF5KQ0KDQoJZm9yIF8sIENvbm5lY3Rpb24gaW4gQ29ubmVjdGlvbnMgZG8NCgkJbG9jYWwgUm93ID0gVGFibGU6Um93KCkNCg0KCQlmb3IgXywgUHJvcGVydHkgaW4gVG9EaXNwbGF5IGRvDQoJCQlsb2NhbCBDb2x1bW4gPSBSb3c6TmV4dENvbHVtbigpDQoJCQlsb2NhbCBDb2x1bW5Sb3cgPSBDb2x1bW46Um93KCkNCg0KCQkJbG9jYWwgVmFsdWUgPSBDb25uZWN0aW9uW1Byb3BlcnR5XQ0KCQkJbG9jYWwgQ2FsbGJhY2sgPSBCdXR0b25zRm9yVmFsdWVzW1Byb3BlcnR5XQ0KDQoJCQktLS8vIFZhbHVlIGxhYmVsDQoJCQlDb2x1bW5Sb3c6TGFiZWwoe1RleHQ9YHtWYWx1ZX1gfSkNCg0KCQkJLS0vLyBBZGQgYnV0dG9ucw0KCQkJaWYgQ2FsbGJhY2sgdGhlbg0KCQkJCUNhbGxiYWNrKENvbHVtblJvdywgVmFsdWUsIENvbm5lY3Rpb24pDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoNCgktLS8vIENlbnRlciBXaW5kb3cNCglXaW5kb3c6Q2VudGVyKCkNCmVuZA0KDQpmdW5jdGlvbiBVaTpHZXRSZW1vdGVIZWFkZXIoRGF0YTogTG9nKQ0KCWxvY2FsIExvZ0xpbWl0ID0gc2VsZi5Mb2dMaW1pdA0KCWxvY2FsIExvZ3MgPSBzZWxmLkxvZ3MNCglsb2NhbCBSZW1vdGVzTGlzdCA9IHNlbGYuUmVtb3Rlc0xpc3QNCg0KCS0tLy8gUmVtb3RlIGluZm8NCglsb2NhbCBJZCA9IERhdGEuSWQNCglsb2NhbCBSZW1vdGUgPSBEYXRhLlJlbW90ZQ0KCWxvY2FsIFJlbW90ZU5hbWUgPSBzZWxmOkZpbHRlck5hbWUoYHtSZW1vdGV9YCwgMzApDQoNCgktLS8vIE5vVHJlZU5vZGVzDQoJbG9jYWwgTm9UcmVlTm9kZXMgPSBGbGFnczpHZXRGbGFnVmFsdWUoIk5vVHJlZU5vZGVzIikNCg0KCS0tLy8gQ2hlY2sgZm9yIGV4aXN0aW5nIFRyZWVOb2RlDQoJbG9jYWwgRXhpc3RpbmcgPSBMb2dzW0lkXQ0KCWlmIEV4aXN0aW5nIHRoZW4gcmV0dXJuIEV4aXN0aW5nIGVuZA0KDQoJLS0vLyBIZWFkZXIgZGF0YQ0KCWxvY2FsIEhlYWRlckRhdGEgPSB7CQ0KCQlMb2dDb3VudCA9IDAsDQoJCURhdGEgPSBEYXRhLA0KCQlFbnRyaWVzID0ge30NCgl9DQoNCgktLS8vIEluY3JlbWVudCB0cmVlbm9kZSBjb3VudA0KCVJlbW90ZXNDb3VudCArPSAxDQoNCgktLS8vIENyZWF0ZSBuZXcgdHJlZW5vZGUgZWxlbWVudA0KCWlmIG5vdCBOb1RyZWVOb2RlcyB0aGVuDQoJCUhlYWRlckRhdGEuVHJlZU5vZGUgPSBSZW1vdGVzTGlzdDpUcmVlTm9kZSh7DQoJCQlMYXlvdXRPcmRlciA9IC0xICogUmVtb3Rlc0NvdW50LA0KCQkJVGl0bGUgPSBSZW1vdGVOYW1lDQoJCX0pDQoJZW5kDQoNCglmdW5jdGlvbiBIZWFkZXJEYXRhOkNoZWNrTGltaXQoKQ0KCQlsb2NhbCBFbnRyaWVzID0gc2VsZi5FbnRyaWVzDQoJCWlmICNFbnRyaWVzIDwgTG9nTGltaXQgdGhlbiByZXR1cm4gZW5kDQoJCQkNCgkJLS0vLyBHZXQgYW5kIHJlbW92ZSBsYXN0IGVsZW1lbnQNCgkJbG9jYWwgTG9nID0gdGFibGUucmVtb3ZlKEVudHJpZXMsIDEpDQoJCUxvZy5TZWxlY3RhYmxlOlJlbW92ZSgpDQoJZW5kDQoNCglmdW5jdGlvbiBIZWFkZXJEYXRhOkxvZ0FkZGVkKERhdGEpDQoJCS0tLy8gSW5jcmVtZW50IGxvZyBjb3VudA0KCQlzZWxmLkxvZ0NvdW50ICs9IDENCgkJc2VsZjpDaGVja0xpbWl0KCkNCg0KCQktLS8vIEFkZCBlbnRyeQ0KCQlsb2NhbCBFbnRyaWVzID0gc2VsZi5FbnRyaWVzDQoJCXRhYmxlLmluc2VydChFbnRyaWVzLCBEYXRhKQ0KCQkNCgkJcmV0dXJuIHNlbGYNCgllbmQNCg0KCWZ1bmN0aW9uIEhlYWRlckRhdGE6UmVtb3ZlKCkNCgkJLS0vLyBSZW1vdmUgVHJlZU5vZGUNCgkJbG9jYWwgVHJlZU5vZGUgPSBzZWxmLlRyZWVOb2RlDQoJCWlmIFRyZWVOb2RlIHRoZW4NCgkJCVRyZWVOb2RlOlJlbW92ZSgpDQoJCWVuZA0KDQoJCS0tLy8gQ2xlYXIgdGFibGVzIGZyb20gbWVtb3J5DQoJCUxvZ3NbSWRdID0gbmlsDQoJCXRhYmxlLmNsZWFyKEhlYWRlckRhdGEpDQoJZW5kDQoNCglMb2dzW0lkXSA9IEhlYWRlckRhdGENCglyZXR1cm4gSGVhZGVyRGF0YQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkNsZWFyTG9ncygpDQoJbG9jYWwgTG9ncyA9IHNlbGYuTG9ncw0KCWxvY2FsIFJlbW90ZXNMaXN0ID0gc2VsZi5SZW1vdGVzTGlzdA0KDQoJLS0vLyBDbGVhciBhbGwgZWxlbWVudHMNCglSZW1vdGVzQ291bnQgPSAwDQoJUmVtb3Rlc0xpc3Q6Q2xlYXJDaGlsZEVsZW1lbnRzKCkNCg0KCS0tLy8gQ2xlYXIgbG9ncyBmcm9tIG1lbW9yeQ0KCXRhYmxlLmNsZWFyKExvZ3MpDQplbmQNCg0KZnVuY3Rpb24gVWk6UXVldWVMb2coRGF0YSkNCglsb2NhbCBMb2dRdWV1ZSA9IHNlbGYuTG9nUXVldWUNCglQcm9jZXNzOk1lcmdlKERhdGEsIHsNCgkJQXJncyA9IFByb2Nlc3M6RGVlcENsb25lVGFibGUoRGF0YS5BcmdzKSwNCgl9KQ0KDQoJaWYgRGF0YS5SZXR1cm5WYWx1ZXMgdGhlbg0KICAgICAgICBEYXRhLlJldHVyblZhbHVlcyA9IFByb2Nlc3M6RGVlcENsb25lVGFibGUoRGF0YS5SZXR1cm5WYWx1ZXMpDQogICAgZW5kDQoJDQogICAgdGFibGUuaW5zZXJ0KExvZ1F1ZXVlLCBEYXRhKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlByb2Nlc3NMb2dRdWV1ZSgpDQoJbG9jYWwgUXVldWUgPSBzZWxmLkxvZ1F1ZXVlDQogICAgaWYgI1F1ZXVlIDw9IDAgdGhlbiByZXR1cm4gZW5kDQoNCgktLS8vIENyZWF0ZSBhIGxvZyBlbGVtZW50IGZvciBlYWNoIGluIHRoZSBRdWV1ZQ0KICAgIGZvciBJbmRleCwgRGF0YSBpbiBuZXh0LCBRdWV1ZSBkbw0KICAgICAgICBzZWxmOkNyZWF0ZUxvZyhEYXRhKQ0KICAgICAgICB0YWJsZS5yZW1vdmUoUXVldWUsIEluZGV4KQ0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIFVpOkJlZ2luTG9nU2VydmljZSgpDQoJY29yb3V0aW5lLndyYXAoZnVuY3Rpb24oKQ0KCQl3aGlsZSB0cnVlIGRvDQoJCQlzZWxmOlByb2Nlc3NMb2dRdWV1ZSgpDQoJCQl0YXNrLndhaXQoKQ0KCQllbmQNCgllbmQpKCkNCmVuZA0KDQpmdW5jdGlvbiBVaTpGaWx0ZXJOYW1lKE5hbWU6IHN0cmluZywgQ2hhcmFjdGVyTGltaXQ6IG51bWJlcj8pOiBzdHJpbmcNCglsb2NhbCBUcmltbWVkID0gTmFtZTpzdWIoMSwgQ2hhcmFjdGVyTGltaXQgb3IgMjApDQoJbG9jYWwgRmlsdHJlZCA9IFRyaW1tZWQ6Z3N1YigiW1xuXHJdIiwgIiIpDQoJRmlsdHJlZCA9IEdlbmVyYXRpb246TWFrZVByaW50YWJsZShGaWx0cmVkKQ0KDQoJcmV0dXJuIEZpbHRyZWQNCmVuZA0KDQpmdW5jdGlvbiBVaTpDcmVhdGVMb2coRGF0YTogTG9nKQ0KCS0tLy8gVW5wYWNrIGxvZyBkYXRhDQogICAgbG9jYWwgUmVtb3RlID0gRGF0YS5SZW1vdGUNCglsb2NhbCBNZXRob2QgPSBEYXRhLk1ldGhvZA0KICAgIGxvY2FsIEFyZ3MgPSBEYXRhLkFyZ3MNCiAgICBsb2NhbCBJc1JlY2VpdmUgPSBEYXRhLklzUmVjZWl2ZQ0KCWxvY2FsIElkID0gRGF0YS5JZA0KCWxvY2FsIFRpbWVzdGFtcCA9IERhdGEuVGltZXN0YW1wDQoJbG9jYWwgSXNFeHBsb2l0ID0gRGF0YS5Jc0V4cGxvaXQNCgkNCglsb2NhbCBJc05pbFBhcmVudCA9IEhvb2s6SW5kZXgoUmVtb3RlLCAiUGFyZW50IikgPT0gbmlsDQoJbG9jYWwgUmVtb3RlRGF0YSA9IFByb2Nlc3M6R2V0UmVtb3RlRGF0YShJZCkNCg0KCS0tLy8gUGF1c2VkDQoJbG9jYWwgUGF1c2VkID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJQYXVzZWQiKQ0KCWlmIFBhdXNlZCB0aGVuIHJldHVybiBlbmQNCg0KCS0tLy8gQ2hlY2sgY2FsbGVyIChJZ25vcmUgZXhwbG9pdCBjYWxscykNCglsb2NhbCBMb2dFeHBsb2l0ID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJMb2dFeHBsb2l0IikNCglpZiBub3QgTG9nRXhwbG9pdCBhbmQgSXNFeHBsb2l0IHRoZW4gcmV0dXJuIGVuZA0KDQoJLS0vLyBJZ25vcmVOaWwNCglsb2NhbCBJZ25vcmVOaWwgPSBGbGFnczpHZXRGbGFnVmFsdWUoIklnbm9yZU5pbCIpDQoJaWYgSWdub3JlTmlsIGFuZCBJc05pbFBhcmVudCB0aGVuIHJldHVybiBlbmQNCg0KICAgIC0tLy8gTG9nUmVjaXZlcyBjaGVjaw0KCWxvY2FsIExvZ1JlY2l2ZXMgPSBGbGFnczpHZXRGbGFnVmFsdWUoIkxvZ1JlY2l2ZXMiKQ0KCWlmIG5vdCBMb2dSZWNpdmVzIGFuZCBJc1JlY2VpdmUgdGhlbiByZXR1cm4gZW5kDQoNCglsb2NhbCBTZWxlY3ROZXdlc3QgPSBGbGFnczpHZXRGbGFnVmFsdWUoIlNlbGVjdE5ld2VzdCIpDQoJbG9jYWwgTm9UcmVlTm9kZXMgPSBGbGFnczpHZXRGbGFnVmFsdWUoIk5vVHJlZU5vZGVzIikNCg0KICAgIC0tLy8gRXhjbHVkZWQgY2hlY2sNCiAgICBpZiBSZW1vdGVEYXRhLkV4Y2x1ZGVkIHRoZW4gcmV0dXJuIGVuZA0KDQoJLS0vLyBEZXNlcmlhbGl6ZSBhcmd1bWVudHMNCglBcmdzID0gQ29tbXVuaWNhdGlvbjpEZXNlcmlhbGl6ZVRhYmxlKEFyZ3MpDQoNCgktLS8vIERlZXAgY2xvbmUgZGF0YQ0KCWxvY2FsIENsb25lZEFyZ3MgPSBQcm9jZXNzOkRlZXBDbG9uZVRhYmxlKEFyZ3MpDQoJRGF0YS5BcmdzID0gQ2xvbmVkQXJncw0KCURhdGEuVmFsdWVTd2FwcyA9IEdlbmVyYXRpb246TWFrZVZhbHVlU3dhcHNUYWJsZShUaW1lc3RhbXApDQoNCgktLS8vIEdlbmVyYXRlIGxvZyB0aXRsZQ0KCWxvY2FsIENvbG9yID0gQ29uZmlnLk1ldGhvZENvbG9yc1tNZXRob2Q6bG93ZXIoKV0NCglsb2NhbCBUZXh0ID0gTm9UcmVlTm9kZXMgYW5kIGB7UmVtb3RlfSB8IHtNZXRob2R9YCBvciBNZXRob2QNCg0KCS0tLy8gRmluZFN0cmluZ0Zvck5hbWUgY2hlY2sNCglsb2NhbCBGaW5kU3RyaW5nID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJGaW5kU3RyaW5nRm9yTmFtZSIpDQoJaWYgRmluZFN0cmluZyB0aGVuDQoJCWZvciBfLCBBcmcgaW4gbmV4dCwgQ2xvbmVkQXJncyBkbw0KCQkJaWYgdHlwZW9mKEFyZykgPT0gInN0cmluZyIgdGhlbg0KCQkJCWxvY2FsIEZpbHRyZWQgPSBzZWxmOkZpbHRlck5hbWUoQXJnKQ0KCQkJCVRleHQgPSBge0ZpbHRyZWR9IHwge1RleHR9YA0KCQkJCWJyZWFrDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoNCgktLS8vIEZldGNoIEhlYWRlckRhdGEgYnkgdGhlIFJlbW90ZUlEIHVzZWQgZm9yIHN0YWNraW5nDQoJbG9jYWwgSGVhZGVyID0gc2VsZjpHZXRSZW1vdGVIZWFkZXIoRGF0YSkNCglsb2NhbCBSZW1vdGVzTGlzdCA9IHNlbGYuUmVtb3Rlc0xpc3QNCg0KCWxvY2FsIExvZ0NvdW50ID0gSGVhZGVyLkxvZ0NvdW50DQoJbG9jYWwgVHJlZU5vZGUgPSBIZWFkZXIuVHJlZU5vZGUgDQoJbG9jYWwgUGFyZW50ID0gVHJlZU5vZGUgb3IgUmVtb3Rlc0xpc3QNCg0KCS0tLy8gSW5jcmVhc2UgbG9nIGNvdW50IC0gVHJlZU5vZGVzIGFyZSBpbiBHZXRSZW1vdGVIZWFkZXIgZnVuY3Rpb24NCglpZiBOb1RyZWVOb2RlcyB0aGVuDQoJCVJlbW90ZXNDb3VudCArPSAxDQoJCUxvZ0NvdW50ID0gUmVtb3Rlc0NvdW50DQoJZW5kDQoNCiAgICAtLS8vIENyZWF0ZSBmb2N1cyBidXR0b24NCglEYXRhLkhlYWRlckRhdGEgPSBIZWFkZXINCglEYXRhLlNlbGVjdGFibGUgPSBQYXJlbnQ6U2VsZWN0YWJsZSh7DQoJCVRleHQgPSBUZXh0LA0KICAgICAgICBMYXlvdXRPcmRlciA9IC0xICogTG9nQ291bnQsDQoJCVRleHRDb2xvcjMgPSBDb2xvciwNCgkJVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQsDQoJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJc2VsZjpTZXRGb2N1c2VkUmVtb3RlKERhdGEpDQoJCWVuZCwNCiAgICB9KQ0KDQoJSGVhZGVyOkxvZ0FkZGVkKERhdGEpDQoNCgktLS8vIEF1dG8gc2VsZWN0IGNoZWNrDQoJbG9jYWwgR3JvdXBTZWxlY3RlZCA9IEFjdGl2ZURhdGEgYW5kIEFjdGl2ZURhdGEuSGVhZGVyRGF0YSA9PSBIZWFkZXINCglpZiBTZWxlY3ROZXdlc3QgYW5kIEdyb3VwU2VsZWN0ZWQgdGhlbg0KCQlzZWxmOlNldEZvY3VzZWRSZW1vdGUoRGF0YSkNCgllbmQNCmVuZA0KDQoNCnJldHVybiBVaQ0K]]
},Generation={'base64',
[[dHlwZSB0YWJsZSA9IHsNCglbYW55XTogYW55DQp9DQoNCnR5cGUgUmVtb3RlRGF0YSA9IHsNCglSZW1vdGU6IEluc3RhbmNlLA0KCUlzUmVjZWl2ZTogYm9vbGVhbj8sDQoJTWV0YU1ldGhvZDogc3RyaW5nLA0KCUFyZ3M6IHRhYmxlLA0KCU1ldGhvZDogc3RyaW5nLA0KICAgIFRyYW5zZmVyVHlwZTogc3RyaW5nLA0KCVZhbHVlUmVwbGFjZW1lbnRzOiB0YWJsZSwNCglOb1ZhcmlhYmxlczogYm9vbGVhbj8NCn0NCg0KLS0vLyBNb2R1bGUNCmxvY2FsIEdlbmVyYXRpb24gPSB7DQoJRHVtcEJhc2VOYW1lID0gIlNpZ21hU3B5LUR1bXAgJXMubHVhIiwgLS0gIi0tIEdlbmVyYXRlZCB3aXRoIHNpZ21hIHNweSBCT0lJSUlJSUlJSSAoKzk5OTk5OTkgQVVSQSlcbiINCglIZWFkZXIgPSAiLS0gR2VuZXJhdGVkIHdpdGggU2lnbWEgU3B5IEdpdGh1YjogaHR0cHM6Ly9naXRodWIuY29tL2RlcHRoc28vU2lnbWEtU3B5XG4iLA0KCVNjcmlwdFRlbXBsYXRlcyA9IHsNCgkJWyJSZW1vdGUiXSA9IHsNCgkJCXsiJVJlbW90ZUNhbGwlIn0NCgkJfSwNCgkJWyJTcGFtIl0gPSB7DQoJCQl7IndoaWxlIHdhaXQoKSBkbyJ9LA0KCQkJeyIlUmVtb3RlQ2FsbCUiLCAyfSwNCgkJCXsiZW5kIn0NCgkJfSwNCgkJWyJSZXBlYXQiXSA9IHsNCgkJCXsiZm9yIEluZGV4ID0gMSwgMTAgZG8ifSwNCgkJCXsiJVJlbW90ZUNhbGwlIiwgMn0sDQoJCQl7ImVuZCJ9DQoJCX0sDQoJCVsiQmxvY2siXSA9IHsNCgkJCVsiX19pbmRleCJdID0gew0KCQkJCXsibG9jYWwgT2xkOyBPbGQgPSBob29rZnVuY3Rpb24oJVNpZ25hbCUsIGZ1bmN0aW9uKHNlbGYsIC4uLikifSwNCgkJCQl7ImlmIHNlbGYgPT0gJVJlbW90ZSUgdGhlbiIsIDJ9LA0KCQkJCXsicmV0dXJuIiwgM30sDQoJCQkJeyJlbmQiLCAyfSwNCgkJCQl7InJldHVybiBPbGQoc2VsZiwgLi4uKSIsIDJ9LA0KCQkJCXsiZW5kKSJ9DQoJCQl9LA0KCQkJWyJfX25hbWVjYWxsIl0gPSB7DQoJCQkJeyJsb2NhbCBPbGQ7IE9sZCA9IGhvb2ttZXRhbWV0aG9kKGdhbWUsIFwiX19uYW1lY2FsbFwiLCBmdW5jdGlvbihzZWxmLCAuLi4pIn0sDQoJCQkJeyJsb2NhbCBNZXRob2QgPSBnZXRuYW1lY2FsbG1ldGhvZCgpIiwgMn0sDQoJCQkJeyJpZiBzZWxmID09ICVSZW1vdGUlIGFuZCBNZXRob2QgPT0gXCIlTWV0aG9kJVwiIHRoZW4iLCAyfSwNCgkJCQl7InJldHVybiIsIDN9LA0KCQkJCXsiZW5kIiwgMn0sDQoJCQkJeyJyZXR1cm4gT2xkKHNlbGYsIC4uLikiLCAyfSwNCgkJCQl7ImVuZCkifQ0KCQkJfSwNCgkJCVsiQ29ubmVjdCJdID0gew0KCQkJCXsiZm9yIF8sIENvbm5lY3Rpb24gaW4gZ2V0Y29ubmVjdGlvbnMoJVNpZ25hbCUpIGRvIn0sDQoJCQkJeyJDb25uZWN0aW9uOkRpc2FibGUoKSIsIDJ9LA0KCQkJCXsiZW5kIn0NCgkJCX0NCgkJfQ0KCX0NCn0NCg0KLS0vLyBNb2R1bGVzDQpsb2NhbCBDb25maWcNCmxvY2FsIEhvb2sNCmxvY2FsIFBhcnNlck1vZHVsZQ0KbG9jYWwgRmxhZ3MNCmxvY2FsIFRoaXNTY3JpcHQgPSBzY3JpcHQNCg0KbG9jYWwgZnVuY3Rpb24gTWVyZ2UoQmFzZTogdGFibGUsIE5ldzogdGFibGU/KQ0KCWlmIG5vdCBOZXcgdGhlbiByZXR1cm4gZW5kDQoJZm9yIEtleSwgVmFsdWUgaW4gbmV4dCwgTmV3IGRvDQoJCUJhc2VbS2V5XSA9IFZhbHVlDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpJbml0KERhdGE6IHRhYmxlKQ0KICAgIGxvY2FsIE1vZHVsZXMgPSBEYXRhLk1vZHVsZXMNCglsb2NhbCBDb25maWd1cmF0aW9uID0gTW9kdWxlcy5Db25maWd1cmF0aW9uDQoNCgktLS8vIE1vZHVsZXMNCglDb25maWcgPSBNb2R1bGVzLkNvbmZpZw0KCUhvb2sgPSBNb2R1bGVzLkhvb2sNCglGbGFncyA9IE1vZHVsZXMuRmxhZ3MNCgkNCgktLS8vIEltcG9ydCBwYXJzZXINCglsb2NhbCBQYXJzZXJVcmwgPSBDb25maWd1cmF0aW9uLlBhcnNlclVybA0KCXNlbGY6TG9hZFBhcnNlcihQYXJzZXJVcmwpDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpNYWtlUHJpbnRhYmxlKFN0cmluZzogc3RyaW5nKTogc3RyaW5nDQoJbG9jYWwgRm9ybWF0dGVyID0gUGFyc2VyTW9kdWxlLk1vZHVsZXMuRm9ybWF0dGVyDQoJcmV0dXJuIEZvcm1hdHRlcjpNYWtlUHJpbnRhYmxlKFN0cmluZykNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOlRpbWVTdGFtcEZpbGUoRmlsZVBhdGg6IHN0cmluZyk6IHN0cmluZw0KCWxvY2FsIFRpbWVTdGFtcCA9IG9zLmRhdGUoIiVZLSVtLSVkXyVILSVNLSVTIikNCglsb2NhbCBGb3JtYXR0ZWQgPSBGaWxlUGF0aDpmb3JtYXQoVGltZVN0YW1wKQ0KCXJldHVybiBGb3JtYXR0ZWQNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOldyaXRlRHVtcChDb250ZW50OiBzdHJpbmcpOiBzdHJpbmcNCglsb2NhbCBEdW1wQmFzZU5hbWUgPSBzZWxmLkR1bXBCYXNlTmFtZQ0KCWxvY2FsIEZpbGVQYXRoID0gc2VsZjpUaW1lU3RhbXBGaWxlKER1bXBCYXNlTmFtZSkNCg0KCS0tLy8gV3JpdGUgdG8gZmlsZQ0KCXdyaXRlZmlsZShGaWxlUGF0aCwgQ29udGVudCkNCg0KCXJldHVybiBGaWxlUGF0aA0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246TG9hZFBhcnNlcihNb2R1bGVVcmw6IHN0cmluZykNCglQYXJzZXJNb2R1bGUgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldChNb2R1bGVVcmwpLCAiUGFyc2VyIikoKQ0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246TWFrZVZhbHVlU3dhcHNUYWJsZSgpOiB0YWJsZQ0KCWxvY2FsIEZvcm1hdHRlciA9IFBhcnNlck1vZHVsZS5Nb2R1bGVzLkZvcm1hdHRlcg0KCXJldHVybiBGb3JtYXR0ZXI6TWFrZVJlcGxhY2VtZW50cygpDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpTZXRTd2Fwc0NhbGxiYWNrKENhbGxiYWNrOiAoSW50ZXJmYWNlOiB0YWJsZSkgLT4gKCkpDQoJc2VsZi5Td2Fwc0NhbGxiYWNrID0gQ2FsbGJhY2sNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkdldEJhc2UoTW9kdWxlKTogKHN0cmluZywgYm9vbGVhbikNCglsb2NhbCBOb0NvbW1lbnRzID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJOb0NvbW1lbnRzIikNCglsb2NhbCBIZWFkZXIgPSBzZWxmLkhlYWRlcg0KDQoJbG9jYWwgQ29kZSA9IE5vQ29tbWVudHMgYW5kICIiIG9yIEhlYWRlcg0KDQoJLS0vLyBHZW5lcmF0ZSB2YXJpYWJsZXMgY29kZQ0KCWxvY2FsIFZhcmlhYmxlcyA9IE1vZHVsZS5QYXJzZXI6TWFrZVZhcmlhYmxlQ29kZSh7DQoJCSJTZXJ2aWNlcyIsICJSZW1vdGUiLCAiVmFyaWFibGVzIg0KCX0sIE5vQ29tbWVudHMpDQoNCglsb2NhbCBOb1ZhcmlhYmxlcyA9IFZhcmlhYmxlcyA9PSAiIg0KCUNvZGUgLi49IFZhcmlhYmxlcw0KDQoJcmV0dXJuIENvZGUsIE5vVmFyaWFibGVzDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpHZXRTd2FwcygpDQoJbG9jYWwgRnVuYyA9IHNlbGYuU3dhcHNDYWxsYmFjaw0KCWxvY2FsIFN3YXBzID0ge30NCg0KCWxvY2FsIEludGVyZmFjZSA9IHt9DQoJZnVuY3Rpb24gSW50ZXJmYWNlOkFkZFN3YXAoT2JqZWN0OiBJbnN0YW5jZSwgRGF0YTogdGFibGUpDQoJCWlmIG5vdCBPYmplY3QgdGhlbiByZXR1cm4gZW5kDQoJCVN3YXBzW09iamVjdF0gPSBEYXRhDQoJZW5kDQoNCgktLS8vIEludm9rZSBHZXRTd2FwcyBmdW5jdGlvbg0KCUZ1bmMoSW50ZXJmYWNlKQ0KDQoJcmV0dXJuIFN3YXBzDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpQaWNrVmFyaWFibGVOYW1lKCk6IHN0cmluZw0KCWxvY2FsIE5hbWVzID0gQ29uZmlnLlZhcmlhYmxlTmFtZXMNCglyZXR1cm4gTmFtZXNbbWF0aC5yYW5kb20oMSwgI05hbWVzKV0NCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOk5ld1BhcnNlcihFeHRyYTogdGFibGU/KQ0KCWxvY2FsIFZhcmlhYmxlTmFtZSA9IHNlbGY6UGlja1ZhcmlhYmxlTmFtZSgpDQoJbG9jYWwgU3dhcHMgPSBzZWxmOkdldFN3YXBzKCkNCg0KCWxvY2FsIENvbmZpZ3VyYXRpb24gPSB7DQoJCVZhcmlhYmxlQmFzZSA9IFZhcmlhYmxlTmFtZSwNCgkJU3dhcHMgPSBTd2FwcywNCgkJSW5kZXhGdW5jID0gZnVuY3Rpb24oLi4uKQ0KCQkJcmV0dXJuIEhvb2s6SW5kZXgoLi4uKQ0KCQllbmQsDQoJfQ0KDQoJLS0vLyBNZXJnZSBleHRyYSBjb25maWd1cmF0aW9uDQoJTWVyZ2UoQ29uZmlndXJhdGlvbiwgRXh0cmEpDQoNCgktLS8vIENyZWF0ZSBuZXcgcGFyc2VyIGluc3RhbmNlDQoJcmV0dXJuIFBhcnNlck1vZHVsZTpOZXcoQ29uZmlndXJhdGlvbikNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkluZGVudChJbmRlbnRTdHJpbmc6IHN0cmluZywgTGluZTogc3RyaW5nKQ0KCXJldHVybiBge0luZGVudFN0cmluZ317TGluZX1gDQplbmQNCg0KdHlwZSBDYWxsSW5mbyA9IHsNCglBcmd1bWVudHM6IHRhYmxlLA0KCUluZGVudDogbnVtYmVyLA0KCVJlbW90ZVZhcmlhYmxlOiBzdHJpbmcsDQoJTW9kdWxlOiB0YWJsZQ0KfQ0KZnVuY3Rpb24gR2VuZXJhdGlvbjpDYWxsUmVtb3RlU2NyaXB0KERhdGEsIEluZm86IENhbGxJbmZvKTogc3RyaW5nDQoJbG9jYWwgSXNSZWNlaXZlID0gRGF0YS5Jc1JlY2VpdmUNCglsb2NhbCBNZXRob2QgPSBEYXRhLk1ldGhvZA0KCWxvY2FsIEFyZ3MgPSBEYXRhLkFyZ3MNCg0KCWxvY2FsIFJlbW90ZVZhcmlhYmxlID0gSW5mby5SZW1vdGVWYXJpYWJsZQ0KCWxvY2FsIEluZGVudCA9IEluZm8uSW5kZW50IG9yIDANCglsb2NhbCBNb2R1bGUgPSBJbmZvLk1vZHVsZQ0KDQoJbG9jYWwgVmFyaWFibGVzID0gTW9kdWxlLlZhcmlhYmxlcw0KCWxvY2FsIFBhcnNlciA9IE1vZHVsZS5QYXJzZXINCglsb2NhbCBOb1ZhcmlhYmxlcyA9IERhdGEuTm9WYXJpYWJsZXMNCg0KCWxvY2FsIEluZGVudFN0cmluZyA9IHNlbGY6TWFrZUluZGVudChJbmRlbnQpDQoNCgktLS8vIFBhcnNlIGFyZ3VtZW50cw0KCWxvY2FsIFBhcnNlZEFyZ3MsIEl0ZW1zQ291bnQsIElzQXJyYXkgPSBQYXJzZXI6UGFyc2VUYWJsZUludG9TdHJpbmcoew0KCQlOb0JyYWNrZXRzID0gdHJ1ZSwNCgkJTm9WYXJpYWJsZXMgPSBOb1ZhcmlhYmxlcywNCgkJVGFibGUgPSBBcmdzLA0KCQlJbmRlbnQgPSBJbmRlbnQNCgl9KQ0KDQoJLS0vLyBDcmVhdGUgdGFibGUgdmFyaWFibGUgaWYgbm90IGFuIGFycmF5DQoJaWYgbm90IElzQXJyYXkgb3IgTm9WYXJpYWJsZXMgdGhlbg0KCQlQYXJzZWRBcmdzID0gVmFyaWFibGVzOk1ha2VWYXJpYWJsZSh7DQoJCQlWYWx1ZSA9ICgieyVzfSIpOmZvcm1hdChQYXJzZWRBcmdzKSwNCgkJCUNvbW1lbnQgPSBub3QgSXNBcnJheSBhbmQgIkFyZ3VtZW50cyBhcmVuJ3Qgb3JkZXJlZCIgb3IgbmlsLA0KCQkJTmFtZSA9ICJSZW1vdGVBcmdzIiwNCgkJCUNsYXNzID0gIlJlbW90ZSINCgkJfSkNCgllbmQNCg0KCS0tLy8gV3JhcCBpbiBhIHVucGFjayBpZiB0aGUgdGFibGUgaXMgYSBkaWN0DQoJaWYgSXRlbXNDb3VudCA+IDAgYW5kIG5vdCBJc0FycmF5IHRoZW4NCgkJUGFyc2VkQXJncyA9IGB1bnBhY2soe1BhcnNlZEFyZ3N9LCAxLCB0YWJsZS5tYXhuKHtQYXJzZWRBcmdzfSkpYA0KCWVuZA0KDQoJLS0vLyBGaXJlc2lnbmFsIHNjcmlwdCBmb3IgY2xpZW50IHJlY2lldmVzDQoJaWYgSXNSZWNlaXZlIHRoZW4NCgkJbG9jYWwgU2Vjb25kID0gSXRlbXNDb3VudCA8PSAwIGFuZCAiIiBvciBgLCB7UGFyc2VkQXJnc31gDQoJCWxvY2FsIFNpZ25hbCA9IGB7UmVtb3RlVmFyaWFibGV9LntNZXRob2R9YA0KDQoJCWxvY2FsIENvZGUgPSBgLS0gVGhpcyBkYXRhIHdhcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXJgDQoJCVBhcnNlZEFyZ3MgPSBzZWxmOkluZGVudChJbmRlbnRTdHJpbmcsIENvZGUpDQoJCUNvZGUgLi49IGBcbntJbmRlbnRTdHJpbmd9ZmlyZXNpZ25hbCh7U2lnbmFsfXtTZWNvbmR9KWANCgkJDQoJCXJldHVybiBDb2RlDQoJZW5kDQoJDQoJLS0vLyBSZW1vdGUgaW52b2tlIHNjcmlwdA0KCXJldHVybiBge1JlbW90ZVZhcmlhYmxlfTp7TWV0aG9kfSh7UGFyc2VkQXJnc30pYA0KZW5kDQoNCi0tLy8gVmFyaWFibGVzOiAlVmFyaWFibGVOYW1lJQ0KZnVuY3Rpb24gR2VuZXJhdGlvbjpBcHBseVZhcmlhYmxlcyhTdHJpbmc6IHN0cmluZywgVmFyaWFibGVzOiB0YWJsZSwgLi4uKTogc3RyaW5nDQoJZm9yIFZhcmlhYmxlLCBWYWx1ZSBpbiBWYXJpYWJsZXMgZG8NCgkJLS0vLyBJbnZva2UgdmFsdWUgZnVuY3Rpb24NCgkJaWYgdHlwZW9mKFZhbHVlKSA9PSAiZnVuY3Rpb24iIHRoZW4NCgkJCVZhbHVlID0gVmFsdWUoLi4uKQ0KCQllbmQNCg0KCQlTdHJpbmcgPSBTdHJpbmc6Z3N1YihgJSV7VmFyaWFibGV9JSVgLCBmdW5jdGlvbigpDQoJCQlyZXR1cm4gVmFsdWUNCgkJZW5kKQ0KCWVuZA0KCXJldHVybiBTdHJpbmcNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOk1ha2VJbmRlbnQoSW5kZW50OiBudW1iZXIpDQoJcmV0dXJuIHN0cmluZy5yZXAoIgkiLCBJbmRlbnQpDQplbmQNCg0KdHlwZSBTY3JpcHREYXRhID0gew0KCVZhcmlhYmxlczogdGFibGUsDQoJTWV0YU1ldGhvZDogc3RyaW5nDQp9DQpmdW5jdGlvbiBHZW5lcmF0aW9uOk1ha2VDYWxsQ29kZShTY3JpcHRUeXBlOiBzdHJpbmcsIERhdGE6IFNjcmlwdERhdGEpOiBzdHJpbmcNCglsb2NhbCBTY3JpcHRUZW1wbGF0ZXMgPSBzZWxmLlNjcmlwdFRlbXBsYXRlcw0KCWxvY2FsIFRlbXBsYXRlID0gU2NyaXB0VGVtcGxhdGVzW1NjcmlwdFR5cGVdDQoNCglhc3NlcnQoVGVtcGxhdGUsIGB7U2NyaXB0VHlwZX0gaXMgbm90IGEgdmFsaWQgc2NyaXB0IHR5cGUhYCkNCg0KCWxvY2FsIFZhcmlhYmxlcyA9IERhdGEuVmFyaWFibGVzDQoJbG9jYWwgTWV0YU1ldGhvZCA9IERhdGEuTWV0YU1ldGhvZA0KCWxvY2FsIE1ldGFNZXRob2RzID0geyJfX2luZGV4IiwgIl9fbmFtZWNhbGwiLCAiQ29ubmVjdCJ9DQoNCglsb2NhbCBmdW5jdGlvbiBDb21waWxlKFRlbXBsYXRlOiB0YWJsZSk6IHN0cmluZw0KCQlsb2NhbCBPdXQgPSAiIg0KDQoJCWZvciBLZXksIFZhbHVlIGluIG5leHQsIFRlbXBsYXRlIGRvDQoJCQktLS8vIE1ldGFNZXRob2QgY2hlY2sNCgkJCWxvY2FsIElzTWV0YVR5cGVPbmx5ID0gdGFibGUuZmluZChNZXRhTWV0aG9kcywgS2V5KQ0KCQkJaWYgSXNNZXRhVHlwZU9ubHkgdGhlbg0KCQkJCWlmIEtleSA9PSBNZXRhTWV0aG9kIHRoZW4NCgkJCQkJbG9jYWwgTGluZSA9IENvbXBpbGUoVmFsdWUpDQoJCQkJCU91dCAuLj0gTGluZQ0KCQkJCWVuZA0KCQkJCWNvbnRpbnVlDQoJCQllbmQNCg0KCQkJLS0vLyBJbmZvcm1hdGlvbg0KCQkJbG9jYWwgQ29udGVudCwgSW5kZW50ID0gVmFsdWVbMV0sIFZhbHVlWzJdIG9yIDANCgkJCUluZGVudCA9IG1hdGguY2xhbXAoSW5kZW50LTEsIDAsIDk5OTkpDQoNCgkJCS0tLy8gTWFrZSBsaW5lDQoJCQlsb2NhbCBMaW5lID0gc2VsZjpBcHBseVZhcmlhYmxlcyhDb250ZW50LCBWYXJpYWJsZXMsIEluZGVudCkNCgkJCWxvY2FsIEluZGVudFN0cmluZyA9IHNlbGY6TWFrZUluZGVudChJbmRlbnQpDQoNCgkJCS0tLy8gQXBwZW5kIHRvIGNvZGUNCgkJCU91dCAuLj0gYHtJbmRlbnRTdHJpbmd9e0xpbmV9XG5gDQoJCWVuZA0KDQoJCXJldHVybiBPdXQNCgllbmQNCgkNCglyZXR1cm4gQ29tcGlsZShUZW1wbGF0ZSkNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOlJlbW90ZVNjcmlwdChNb2R1bGUsIERhdGE6IFJlbW90ZURhdGEsIFNjcmlwdFR5cGU6IHN0cmluZyk6IHN0cmluZw0KCS0tLy8gVW5wYWNrIGRhdGENCglsb2NhbCBSZW1vdGUgPSBEYXRhLlJlbW90ZQ0KCWxvY2FsIEFyZ3MgPSBEYXRhLkFyZ3MNCglsb2NhbCBNZXRob2QgPSBEYXRhLk1ldGhvZA0KCWxvY2FsIE1ldGFNZXRob2QgPSBEYXRhLk1ldGFNZXRob2QNCg0KCS0tLy8gUmVtb3RlIGluZm8NCglsb2NhbCBDbGFzc05hbWUgPSBIb29rOkluZGV4KFJlbW90ZSwgIkNsYXNzTmFtZSIpDQoJbG9jYWwgSXNOaWxQYXJlbnQgPSBIb29rOkluZGV4KFJlbW90ZSwgIlBhcmVudCIpID09IG5pbA0KCQ0KCWxvY2FsIFZhcmlhYmxlcyA9IE1vZHVsZS5WYXJpYWJsZXMNCglsb2NhbCBGb3JtYXR0ZXIgPSBNb2R1bGUuRm9ybWF0dGVyDQoJDQoJLS0vLyBQcmUtcmVuZGVyIHZhcmlhYmxlcw0KCVZhcmlhYmxlczpQcmVyZW5kZXJWYXJpYWJsZXMoQXJncywgeyJJbnN0YW5jZSJ9KQ0KDQoJLS0vLyBDcmVhdGUgcmVtb3RlIHZhcmlhYmxlDQoJbG9jYWwgUmVtb3RlVmFyaWFibGUgPSBWYXJpYWJsZXM6TWFrZVZhcmlhYmxlKHsNCgkJVmFsdWUgPSBGb3JtYXR0ZXI6Rm9ybWF0KFJlbW90ZSwgew0KCQkJTm9WYXJpYWJsZXMgPSB0cnVlDQoJCX0pLA0KCQlDb21tZW50ID0gYHtDbGFzc05hbWV9IHtJc05pbFBhcmVudCBhbmQgInwgUmVtb3RlIHBhcmVudCBpcyBuaWwiIG9yICIifWAsDQoJCU5hbWUgPSBGb3JtYXR0ZXI6TWFrZU5hbWUoUmVtb3RlKSwNCgkJTG9va3VwID0gUmVtb3RlLA0KCQlDbGFzcyA9ICJSZW1vdGUiDQoJfSkNCg0KCS0tLy8gR2VuZXJhdGUgY2FsbCBzY3JpcHQNCglsb2NhbCBDYWxsQ29kZSA9IHNlbGY6TWFrZUNhbGxDb2RlKFNjcmlwdFR5cGUsIHsNCgkJVmFyaWFibGVzID0gew0KCQkJWyJSZW1vdGVDYWxsIl0gPSBmdW5jdGlvbihJbmRlbnQ6IG51bWJlcikNCgkJCQlyZXR1cm4gc2VsZjpDYWxsUmVtb3RlU2NyaXB0KERhdGEsIHsNCgkJCQkJUmVtb3RlVmFyaWFibGUgPSBSZW1vdGVWYXJpYWJsZSwNCgkJCQkJSW5kZW50ID0gSW5kZW50LA0KCQkJCQlNb2R1bGUgPSBNb2R1bGUNCgkJCQl9KQ0KCQkJZW5kLA0KCQkJWyJSZW1vdGUiXSA9IFJlbW90ZVZhcmlhYmxlLA0KCQkJWyJNZXRob2QiXSA9IE1ldGhvZCwNCgkJCVsiU2lnbmFsIl0gPSBge1JlbW90ZVZhcmlhYmxlfS57TWV0aG9kfWANCgkJfSwNCgkJTWV0YU1ldGhvZCA9IE1ldGFNZXRob2QNCgl9KQ0KCQ0KCS0tLy8gTWFrZSBjb2RlDQoJbG9jYWwgQ29kZSA9IHNlbGY6R2V0QmFzZShNb2R1bGUpDQoJcmV0dXJuIGB7Q29kZX1cbntDYWxsQ29kZX1gDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpDb25uZWN0aW9uc1RhYmxlKFNpZ25hbDogUkJYU2NyaXB0U2lnbmFsKTogdGFibGUNCglsb2NhbCBDb25uZWN0aW9ucyA9IGdldGNvbm5lY3Rpb25zKFNpZ25hbCkNCglsb2NhbCBEYXRhQXJyYXkgPSB7fQ0KDQoJZm9yIF8sIENvbm5lY3Rpb24gaW4gbmV4dCwgQ29ubmVjdGlvbnMgZG8NCgkJbG9jYWwgRnVuY3Rpb24gPSBDb25uZWN0aW9uLkZ1bmN0aW9uDQoJCWxvY2FsIFNjcmlwdCA9IHJhd2dldChnZXRmZW52KEZ1bmN0aW9uKSwgInNjcmlwdCIpDQoNCgkJLS0vLyBTa2lwIGlmIHNlbGYNCgkJaWYgU2NyaXB0ID09IFRoaXNTY3JpcHQgdGhlbiBjb250aW51ZSBlbmQNCg0KCQktLS8vIENvbm5lY3Rpb24gZGF0YQ0KCQlsb2NhbCBEYXRhID0gew0KCQkJRnVuY3Rpb24gPSBGdW5jdGlvbiwNCgkJCVN0YXRlID0gQ29ubmVjdGlvbi5TdGF0ZSwNCgkJCVNjcmlwdCA9IFNjcmlwdA0KCQl9DQoNCgkJdGFibGUuaW5zZXJ0KERhdGFBcnJheSwgRGF0YSkNCgllbmQNCg0KCXJldHVybiBEYXRhQXJyYXkNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOlRhYmxlU2NyaXB0KE1vZHVsZSwgVGFibGU6IHRhYmxlKTogc3RyaW5nDQoJLS0vLyBQcmUtcmVuZGVyIHZhcmlhYmxlcw0KCU1vZHVsZS5WYXJpYWJsZXM6UHJlcmVuZGVyVmFyaWFibGVzKFRhYmxlLCB7Ikluc3RhbmNlIn0pDQoNCgktLS8vIFBhcnNlIGFyZ3VtZW50cw0KCWxvY2FsIFBhcnNlZFRhYmxlID0gTW9kdWxlLlBhcnNlcjpQYXJzZVRhYmxlSW50b1N0cmluZyh7DQoJCVRhYmxlID0gVGFibGUNCgl9KQ0KDQoJLS0vLyBHZW5lcmF0ZSBzY3JpcHQNCglsb2NhbCBDb2RlLCBOb1ZhcmlhYmxlcyA9IHNlbGY6R2V0QmFzZShNb2R1bGUpDQoJbG9jYWwgU2VwZXJhdG9yID0gTm9WYXJpYWJsZXMgYW5kICIiIG9yICJcbiINCglDb2RlIC4uPSBge1NlcGVyYXRvcn1yZXR1cm4ge1BhcnNlZFRhYmxlfWANCg0KCXJldHVybiBDb2RlDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpNYWtlVHlwZXNUYWJsZShUYWJsZTogdGFibGUpOiB0YWJsZQ0KCWxvY2FsIFR5cGVzID0ge30NCg0KCWZvciBLZXksIFZhbHVlIGluIG5leHQsIFRhYmxlIGRvDQoJCWxvY2FsIFR5cGUgPSB0eXBlb2YoVmFsdWUpDQoJCWlmIFR5cGUgPT0gInRhYmxlIiB0aGVuDQoJCQlUeXBlID0gc2VsZjpNYWtlVHlwZXNUYWJsZShWYWx1ZSkNCgkJZW5kDQoNCgkJVHlwZXNbS2V5XSA9IFR5cGUNCgllbmQNCg0KCXJldHVybiBUeXBlcw0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246Q29ubmVjdGlvbkluZm8oUmVtb3RlOiBJbnN0YW5jZSwgQ2xhc3NEYXRhOiB0YWJsZSk6IHRhYmxlPw0KCWxvY2FsIFJlY2VpdmVNZXRob2RzID0gQ2xhc3NEYXRhLlJlY2VpdmUNCglpZiBub3QgUmVjZWl2ZU1ldGhvZHMgdGhlbiByZXR1cm4gZW5kDQoNCglsb2NhbCBDb25uZWN0aW9ucyA9IHt9DQoJZm9yIF8sIE1ldGhvZDogc3RyaW5nIGluIG5leHQsIFJlY2VpdmVNZXRob2RzIGRvDQoJCXBjYWxsKGZ1bmN0aW9uKCkgLS0gVE9ETzogR0VUQ0FMTEJBQ0tWQUxVRQ0KCQkJbG9jYWwgU2lnbmFsID0gSG9vazpJbmRleChSZW1vdGUsIE1ldGhvZCkNCgkJCUNvbm5lY3Rpb25zW01ldGhvZF0gPSBzZWxmOkNvbm5lY3Rpb25zVGFibGUoU2lnbmFsKQ0KCQllbmQpDQoJZW5kDQoNCglyZXR1cm4gQ29ubmVjdGlvbnMNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkFkdmFuY2VkSW5mbyhNb2R1bGUsIERhdGE6IHRhYmxlKTogc3RyaW5nDQoJLS0vLyBVbnBhY2sgcmVtb3RlIGRhdGENCglsb2NhbCBGdW5jdGlvbiA9IERhdGEuQ2FsbGluZ0Z1bmN0aW9uDQoJbG9jYWwgQ2xhc3NEYXRhID0gRGF0YS5DbGFzc0RhdGENCglsb2NhbCBSZW1vdGUgPSBEYXRhLlJlbW90ZQ0KCWxvY2FsIEFyZ3MgPSBEYXRhLkFyZ3MNCgkNCgktLS8vIEFkdmFuY2VkIGluZm8gdGFibGUgYmFzZQ0KCWxvY2FsIEZ1bmN0aW9uSW5mbyA9IHsNCgkJWyJDYWxsZXIiXSA9IHsNCgkJCVsiU291cmNlU2NyaXB0Il0gPSBEYXRhLlNvdXJjZVNjcmlwdCwNCgkJCVsiQ2FsbGluZ1NjcmlwdCJdID0gRGF0YS5DYWxsaW5nU2NyaXB0LA0KCQkJWyJDYWxsaW5nRnVuY3Rpb24iXSA9IEZ1bmN0aW9uDQoJCX0sDQoJCVsiUmVtb3RlIl0gPSB7DQoJCQlbIlJlbW90ZSJdID0gUmVtb3RlLA0KCQkJWyJSZW1vdGVJRCJdID0gRGF0YS5JZCwNCgkJCVsiTWV0aG9kIl0gPSBEYXRhLk1ldGhvZCwNCgkJCVsiQ29ubmVjdGlvbnMiXSA9IHNlbGY6Q29ubmVjdGlvbkluZm8oUmVtb3RlLCBDbGFzc0RhdGEpDQoJCX0sDQoJCVsiQXJndW1lbnRzIl0gPSB7DQoJCQlbIkxlbmd0aCJdID0gI0FyZ3MsDQoJCQlbIlR5cGVzIl0gPSBzZWxmOk1ha2VUeXBlc1RhYmxlKEFyZ3MpLA0KCQl9LA0KCQlbIk1ldGFNZXRob2QiXSA9IERhdGEuTWV0YU1ldGhvZCwNCgkJWyJJc0FjdG9yIl0gPSBEYXRhLklzQWN0b3IsDQoJfQ0KDQoJLS0vLyBTb21lIGNsb3N1cmVzIG1heSBub3QgYmUgbHVhDQoJaWYgRnVuY3Rpb24gYW5kIGlzbGNsb3N1cmUoRnVuY3Rpb24pIHRoZW4NCgkJRnVuY3Rpb25JbmZvWyJVcFZhbHVlcyJdID0gZGVidWcuZ2V0dXB2YWx1ZXMoRnVuY3Rpb24pDQoJCUZ1bmN0aW9uSW5mb1siQ29uc3RhbnRzIl0gPSBkZWJ1Zy5nZXRjb25zdGFudHMoRnVuY3Rpb24pDQoJZW5kDQoNCgktLS8vIEdlbmVyYXRlIHNjcmlwdA0KCXJldHVybiBzZWxmOlRhYmxlU2NyaXB0KE1vZHVsZSwgRnVuY3Rpb25JbmZvKQ0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246RHVtcExvZ3MoTG9nczogdGFibGUpOiBzdHJpbmcNCglsb2NhbCBCYXNlRGF0YQ0KCWxvY2FsIFBhcnNlZCA9IHsNCgkJUmVtb3RlID0gbmlsLA0KCQlDYWxscyA9IHt9DQoJfQ0KDQoJLS0vLyBDcmVhdGUgbmV3IHBhcnNlciBpbnN0YW5jZQ0KCWxvY2FsIE1vZHVsZSA9IEdlbmVyYXRpb246TmV3UGFyc2VyKCkNCg0KCWZvciBfLCBEYXRhIGluIExvZ3MgZG8NCgkJbG9jYWwgQ2FsbHMgPSBQYXJzZWQuQ2FsbHMNCgkJbG9jYWwgVGFibGUgPSB7DQoJCQlBcmdzID0gRGF0YS5BcmdzLA0KCQkJVGltZXN0YW1wID0gRGF0YS5UaW1lc3RhbXAsDQoJCQlSZXR1cm5WYWx1ZXMgPSBEYXRhLlJldHVyblZhbHVlcywNCgkJCU1ldGhvZCA9IERhdGEuTWV0aG9kLA0KCQkJTWV0YU1ldGhvZCA9IERhdGEuTWV0YU1ldGhvZCwNCgkJCUNhbGxpbmdTY3JpcHQgPSBEYXRhLkNhbGxpbmdTY3JpcHQsDQoJCX0NCg0KCQktLS8vIEFwcGVuZA0KCQl0YWJsZS5pbnNlcnQoQ2FsbHMsIFRhYmxlKQ0KDQoJCS0tLy8gU2V0IEJhc2VEYXRhDQoJCWlmIG5vdCBCYXNlRGF0YSB0aGVuDQoJCQlCYXNlRGF0YSA9IERhdGENCgkJZW5kDQoJZW5kDQoNCgktLS8vIEJhc2VkYXRhIG1lcmdlDQoJUGFyc2VkLlJlbW90ZSA9IEJhc2VEYXRhLlJlbW90ZQ0KDQoJLS0vLyBDb21waWxlIGFuZCBzYXZlDQoJbG9jYWwgT3V0cHV0ID0gc2VsZjpUYWJsZVNjcmlwdChNb2R1bGUsIFBhcnNlZCkNCglsb2NhbCBGaWxlUGF0aCA9IHNlbGY6V3JpdGVEdW1wKE91dHB1dCkNCgkNCglyZXR1cm4gRmlsZVBhdGgNCmVuZA0KDQpyZXR1cm4gR2VuZXJhdGlvbg0K]]
},Communication={'base64',
[[dHlwZSB0YWJsZSA9IHsNCiAgICBbYW55XTogYW55DQp9DQoNCi0tLy8gTW9kdWxlDQpsb2NhbCBNb2R1bGUgPSB7DQogICAgQ29tbUNhbGxiYWNrcyA9IHt9DQp9DQoNCmxvY2FsIENvbW1XcmFwcGVyID0ge30NCkNvbW1XcmFwcGVyLl9faW5kZXggPSBDb21tV3JhcHBlcg0KDQotLS8vIFNlcmlhbGl6ZXIgY2FjaGUNCmxvY2FsIFNlcmlhbGl6ZUNhY2hlID0gc2V0bWV0YXRhYmxlKHt9LCB7X19tb2RlID0gImsifSkNCmxvY2FsIERlc2VyaWFsaXplQ2FjaGUgPSBzZXRtZXRhdGFibGUoe30sIHtfX21vZGUgPSAiayJ9KQ0KDQotLS8vIFNlcnZpY2VzDQpsb2NhbCBDb3JlR3VpDQoNCi0tLy8gTW9kdWxlcw0KbG9jYWwgSG9vaw0KbG9jYWwgQ2hhbm5lbA0KbG9jYWwgQ29uZmlnDQpsb2NhbCBQcm9jZXNzDQoNCmZ1bmN0aW9uIE1vZHVsZTpJbml0KERhdGEpDQogICAgbG9jYWwgTW9kdWxlcyA9IERhdGEuTW9kdWxlcw0KICAgIGxvY2FsIFNlcnZpY2VzID0gRGF0YS5TZXJ2aWNlcw0KDQogICAgSG9vayA9IE1vZHVsZXMuSG9vaw0KICAgIFByb2Nlc3MgPSBNb2R1bGVzLlByb2Nlc3MNCiAgICBDb25maWcgPSBNb2R1bGVzLkNvbmZpZyBvciBDb25maWcNCiAgICBDb3JlR3VpID0gU2VydmljZXMuQ29yZUd1aQ0KZW5kDQoNCmZ1bmN0aW9uIENvbW1XcmFwcGVyOkZpcmUoLi4uKQ0KICAgIGxvY2FsIFF1ZXVlID0gc2VsZi5RdWV1ZQ0KICAgIHRhYmxlLmluc2VydChRdWV1ZSwgey4uLn0pDQplbmQNCg0KZnVuY3Rpb24gQ29tbVdyYXBwZXI6UHJvY2Vzc0FyZ3VtZW50cyhBcmd1bWVudHMpIA0KICAgIGxvY2FsIENoYW5uZWwgPSBzZWxmLkNoYW5uZWwNCiAgICBDaGFubmVsOkZpcmUoUHJvY2VzczpVbnBhY2soQXJndW1lbnRzKSkNCmVuZA0KDQpmdW5jdGlvbiBDb21tV3JhcHBlcjpQcm9jZXNzUXVldWUoKQ0KICAgIGxvY2FsIFF1ZXVlID0gc2VsZi5RdWV1ZQ0KDQogICAgZm9yIEluZGV4ID0gMSwgI1F1ZXVlIGRvDQogICAgICAgIGxvY2FsIEFyZ3VtZW50cyA9IHRhYmxlLnJlbW92ZShRdWV1ZSkNCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgc2VsZjpQcm9jZXNzQXJndW1lbnRzKEFyZ3VtZW50cykgDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBDb21tV3JhcHBlcjpCZWdpblF1ZXVlU2VydmljZSgpDQogICAgY29yb3V0aW5lLndyYXAoZnVuY3Rpb24oKQ0KICAgICAgICB3aGlsZSB3YWl0KCkgZG8NCiAgICAgICAgICAgIHNlbGY6UHJvY2Vzc1F1ZXVlKCkNCiAgICAgICAgZW5kDQogICAgZW5kKSgpDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOk5ld0NvbW1XcmFwKENoYW5uZWw6IEJpbmRhYmxlRXZlbnQpDQogICAgbG9jYWwgQmFzZSA9IHsNCiAgICAgICAgUXVldWUgPSBzZXRtZXRhdGFibGUoe30sIHtfX21vZGUgPSAidiJ9KSwNCiAgICAgICAgQ2hhbm5lbCA9IENoYW5uZWwsDQogICAgICAgIEV2ZW50ID0gQ2hhbm5lbC5FdmVudA0KICAgIH0NCg0KICAgIC0tLy8gQ3JlYXRlIG5ldyB3cmFwcGVyIGNsYXNzDQogICAgbG9jYWwgV3JhcHBlZCA9IHNldG1ldGF0YWJsZShCYXNlLCBDb21tV3JhcHBlcikNCiAgICBXcmFwcGVkOkJlZ2luUXVldWVTZXJ2aWNlKCkNCg0KICAgIHJldHVybiBXcmFwcGVkDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOk1ha2VEZWJ1Z0lkSGFuZGxlcigpOiBCaW5kYWJsZUZ1bmN0aW9uDQogICAgLS0vLyBVc2luZyBCaW5kYWJsZUZ1bmN0aW9uIGFzIGl0IGRvZXMgbm90IHJlcXVpcmUgYSB0aHJlYWQgcGVybWlzc2lvbiBjaGFuZ2UNCiAgICBsb2NhbCBSZW1vdGUgPSBJbnN0YW5jZS5uZXcoIkJpbmRhYmxlRnVuY3Rpb24iKQ0KICAgIGZ1bmN0aW9uIFJlbW90ZS5Pbkludm9rZShPYmplY3Q6IEluc3RhbmNlKTogc3RyaW5nDQogICAgICAgIHJldHVybiBPYmplY3Q6R2V0RGVidWdJZCgpDQogICAgZW5kDQoNCiAgICBzZWxmLkRlYnVnSWRSZW1vdGUgPSBSZW1vdGUNCiAgICBzZWxmLkRlYnVnSWRJbnZva2UgPSBSZW1vdGUuSW52b2tlDQoNCiAgICByZXR1cm4gUmVtb3RlDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkdldERlYnVnSWQoT2JqZWN0OiBJbnN0YW5jZSk6IHN0cmluZw0KICAgIGxvY2FsIEludm9rZSA9IHNlbGYuRGVidWdJZEludm9rZQ0KICAgIGxvY2FsIFJlbW90ZSA9IHNlbGYuRGVidWdJZFJlbW90ZQ0KCXJldHVybiBJbnZva2UoUmVtb3RlLCBPYmplY3QpDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkdldEhpZGRlblBhcmVudCgpOiBJbnN0YW5jZQ0KICAgIC0tLy8gVXNlIGdldGh1aSBpZiBpdCBleGlzdHMNCiAgICBpZiBnZXRodWkgdGhlbiByZXR1cm4gZ2V0aHVpKCkgZW5kDQogICAgcmV0dXJuIENvcmVHdWkNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6Q3JlYXRlQ29tbUNoYW5uZWwoKTogKG51bWJlciwgQmluZGFibGVFdmVudCkNCiAgICAtLS8vIFVzZSBuYXRpdmUgaWYgaXQgZXhpc3RzDQogICAgbG9jYWwgRm9yY2UgPSBDb25maWcuRm9yY2VVc2VDdXN0b21Db21tDQogICAgaWYgY3JlYXRlX2NvbW1fY2hhbm5lbCBhbmQgbm90IEZvcmNlIHRoZW4NCiAgICAgICAgcmV0dXJuIGNyZWF0ZV9jb21tX2NoYW5uZWwoKQ0KICAgIGVuZA0KDQogICAgbG9jYWwgUGFyZW50ID0gc2VsZjpHZXRIaWRkZW5QYXJlbnQoKQ0KICAgIGxvY2FsIENoYW5uZWxJZCA9IG1hdGgucmFuZG9tKDEsIDEwMDAwMDAwKQ0KDQogICAgLS0vLyBCaW5kYWJsZUV2ZW50DQogICAgbG9jYWwgQ2hhbm5lbCA9IEluc3RhbmNlLm5ldygiQmluZGFibGVFdmVudCIsIFBhcmVudCkNCiAgICBDaGFubmVsLk5hbWUgPSBDaGFubmVsSWQNCg0KICAgIHJldHVybiBDaGFubmVsSWQsIENoYW5uZWwNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6R2V0Q29tbUNoYW5uZWwoQ2hhbm5lbElkOiBudW1iZXIpOiBCaW5kYWJsZUV2ZW50Pw0KICAgIC0tLy8gVXNlIG5hdGl2ZSBpZiBpdCBleGlzdHMNCiAgICBsb2NhbCBGb3JjZSA9IENvbmZpZy5Gb3JjZVVzZUN1c3RvbUNvbW0NCiAgICBpZiBnZXRfY29tbV9jaGFubmVsIGFuZCBub3QgRm9yY2UgdGhlbg0KICAgICAgICBsb2NhbCBDaGFubmVsID0gZ2V0X2NvbW1fY2hhbm5lbChDaGFubmVsSWQpDQogICAgICAgIHJldHVybiBDaGFubmVsLCBmYWxzZQ0KICAgIGVuZA0KDQogICAgbG9jYWwgUGFyZW50ID0gc2VsZjpHZXRIaWRkZW5QYXJlbnQoKQ0KICAgIGxvY2FsIENoYW5uZWwgPSBQYXJlbnQ6RmluZEZpcnN0Q2hpbGQoQ2hhbm5lbElkKQ0KDQogICAgLS0vLyBXcmFwIHRoZSBjaGFubmVsIChQcmV2ZW50cyB0aHJlYWQgcGVybWlzc2lvbiBlcnJvcnMpDQogICAgbG9jYWwgV3JhcHBlZCA9IHNlbGY6TmV3Q29tbVdyYXAoQ2hhbm5lbCkNCiAgICByZXR1cm4gV3JhcHBlZCwgdHJ1ZQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpDaGVja1ZhbHVlKFZhbHVlLCBJbmJvdW5kOiBib29sZWFuPykNCiAgICAgLS0vLyBObyBzZXJpYWxpemluZyAgbmVlZGVkDQogICAgaWYgdHlwZW9mKFZhbHVlKSB+PSAidGFibGUiIHRoZW4gDQogICAgICAgIHJldHVybiBWYWx1ZSANCiAgICBlbmQNCiAgIA0KICAgIC0tLy8gRGVzZXJpYWxpemUNCiAgICBpZiBJbmJvdW5kIHRoZW4NCiAgICAgICAgcmV0dXJuIHNlbGY6RGVzZXJpYWxpemVUYWJsZShWYWx1ZSkNCiAgICBlbmQNCg0KICAgIC0tLy8gU2VyaWFsaXplDQogICAgcmV0dXJuIHNlbGY6U2VyaWFsaXplVGFibGUoVmFsdWUpDQplbmQNCg0KbG9jYWwgVGljayA9IDANCmZ1bmN0aW9uIE1vZHVsZTpXYWl0Q2hlY2soKQ0KICAgIFRpY2sgKz0gMQ0KICAgIGlmIFRpY2sgPiA0MCB0aGVuDQogICAgICAgIFRpY2sgPSAwIC0tIEkgY291bGQgdXNlIG1vZHVsdXMgaGVyZSBidXQgdGhlIGludGVyZ2VyIHdpbGwgYmUgbWFzc2l2ZQ0KICAgICAgICB3YWl0KCkNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6TWFrZVBhY2tldChJbmRleCwgVmFsdWUpOiB0YWJsZQ0KICAgIHNlbGY6V2FpdENoZWNrKCkNCiAgICByZXR1cm4gew0KICAgICAgICBJbmRleCA9IHNlbGY6Q2hlY2tWYWx1ZShJbmRleCksIA0KICAgICAgICBWYWx1ZSA9IHNlbGY6Q2hlY2tWYWx1ZShWYWx1ZSkNCiAgICB9DQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlJlYWRQYWNrZXQoUGFja2V0OiB0YWJsZSk6IChhbnksIGFueSkNCiAgICBpZiB0eXBlb2YoUGFja2V0KSB+PSAidGFibGUiIHRoZW4gcmV0dXJuIFBhY2tldCBlbmQNCiAgICANCiAgICBsb2NhbCBLZXkgPSBzZWxmOkNoZWNrVmFsdWUoUGFja2V0LkluZGV4LCB0cnVlKQ0KICAgIGxvY2FsIFZhbHVlID0gc2VsZjpDaGVja1ZhbHVlKFBhY2tldC5WYWx1ZSwgdHJ1ZSkNCiAgICBzZWxmOldhaXRDaGVjaygpDQoNCiAgICByZXR1cm4gS2V5LCBWYWx1ZQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpTZXJpYWxpemVUYWJsZShUYWJsZTogdGFibGUpOiB0YWJsZQ0KICAgIC0tLy8gQ2hlY2sgY2FjaGUgZm9yIGV4aXN0aW5nDQogICAgbG9jYWwgQ2FjaGVkID0gU2VyaWFsaXplQ2FjaGVbVGFibGVdDQogICAgaWYgQ2FjaGVkIHRoZW4gcmV0dXJuIENhY2hlZCBlbmQNCg0KICAgIGxvY2FsIFNlcmlhbGl6ZWQgPSB7fQ0KICAgIFNlcmlhbGl6ZUNhY2hlW1RhYmxlXSA9IFNlcmlhbGl6ZWQNCg0KICAgIGZvciBJbmRleCwgVmFsdWUgaW4gbmV4dCwgVGFibGUgZG8NCiAgICAgICAgbG9jYWwgUGFja2V0ID0gc2VsZjpNYWtlUGFja2V0KEluZGV4LCBWYWx1ZSkNCiAgICAgICAgdGFibGUuaW5zZXJ0KFNlcmlhbGl6ZWQsIFBhY2tldCkNCiAgICBlbmQNCg0KICAgIHJldHVybiBTZXJpYWxpemVkDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkRlc2VyaWFsaXplVGFibGUoU2VyaWFsaXplZDogdGFibGUpOiB0YWJsZQ0KICAgIC0tLy8gQ2hlY2sgZm9yIGNhY2hlZA0KICAgIGxvY2FsIENhY2hlZCA9IERlc2VyaWFsaXplQ2FjaGVbU2VyaWFsaXplZF0NCiAgICBpZiBDYWNoZWQgdGhlbiByZXR1cm4gQ2FjaGVkIGVuZA0KDQogICAgbG9jYWwgVGFibGUgPSB7fQ0KICAgIERlc2VyaWFsaXplQ2FjaGVbU2VyaWFsaXplZF0gPSBUYWJsZQ0KICAgIA0KICAgIGZvciBfLCBQYWNrZXQgaW4gbmV4dCwgU2VyaWFsaXplZCBkbw0KICAgICAgICBsb2NhbCBJbmRleCwgVmFsdWUgPSBzZWxmOlJlYWRQYWNrZXQoUGFja2V0KQ0KICAgICAgICBpZiBJbmRleCA9PSBuaWwgdGhlbiBjb250aW51ZSBlbmQNCg0KICAgICAgICBUYWJsZVtJbmRleF0gPSBWYWx1ZQ0KICAgIGVuZA0KDQogICAgcmV0dXJuIFRhYmxlDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlNldENoYW5uZWwoTmV3Q2hhbm5lbDogbnVtYmVyKQ0KICAgIENoYW5uZWwgPSBOZXdDaGFubmVsDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkNvbnNvbGVQcmludCguLi4pDQogICAgc2VsZjpDb21tdW5pY2F0ZSgiUHJpbnQiLCAuLi4pDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlF1ZXVlTG9nKERhdGEpDQogICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBTZXJpYWxpemVkQXJncyA9IHNlbGY6U2VyaWFsaXplVGFibGUoRGF0YS5BcmdzKQ0KICAgICAgICBEYXRhLkFyZ3MgPSBTZXJpYWxpemVkQXJncw0KDQogICAgICAgIHNlbGY6Q29tbXVuaWNhdGUoIlF1ZXVlTG9nIiwgRGF0YSkNCiAgICBlbmQpDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkFkZENvbW1DYWxsYmFjayhUeXBlOiBzdHJpbmcsIENhbGxiYWNrOiAoLi4uYW55KSAtPiAuLi5hbnkpDQogICAgbG9jYWwgQ29tbUNhbGxiYWNrcyA9IHNlbGYuQ29tbUNhbGxiYWNrcw0KICAgIENvbW1DYWxsYmFja3NbVHlwZV0gPSBDYWxsYmFjaw0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpHZXRDb21tQ2FsbGJhY2soVHlwZTogc3RyaW5nKTogKC4uLmFueSkgLT4gLi4uYW55DQogICAgbG9jYWwgQ29tbUNhbGxiYWNrcyA9IHNlbGYuQ29tbUNhbGxiYWNrcw0KICAgIHJldHVybiBDb21tQ2FsbGJhY2tzW1R5cGVdDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkNoYW5uZWxJbmRleChDaGFubmVsLCBQcm9wZXJ0eTogc3RyaW5nKQ0KICAgIGlmIHR5cGVvZihDaGFubmVsKSA9PSAiSW5zdGFuY2UiIHRoZW4NCiAgICAgICAgcmV0dXJuIEhvb2s6SW5kZXgoQ2hhbm5lbCwgUHJvcGVydHkpDQogICAgZW5kDQoNCiAgICAtLS8vIFNvbWUgZXhlY3V0b3JzIHJldHVybiBhIFVzZXJEYXRhIHR5cGUNCiAgICByZXR1cm4gQ2hhbm5lbFtQcm9wZXJ0eV0NCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6Q29tbXVuaWNhdGUoLi4uKQ0KICAgIGxvY2FsIEZpcmUgPSBzZWxmOkNoYW5uZWxJbmRleChDaGFubmVsLCAiRmlyZSIpDQogICAgRmlyZShDaGFubmVsLCAuLi4pDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkFkZENvbm5lY3Rpb24oQ2FsbGJhY2spOiBSQlhTY3JpcHRDb25uZWN0aW9uDQogICAgbG9jYWwgRXZlbnQgPSBzZWxmOkNoYW5uZWxJbmRleChDaGFubmVsLCAiRXZlbnQiKQ0KICAgIHJldHVybiBFdmVudDpDb25uZWN0KENhbGxiYWNrKQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpBZGRUeXBlQ2FsbGJhY2soVHlwZTogc3RyaW5nLCBDYWxsYmFjayk6IFJCWFNjcmlwdENvbm5lY3Rpb24NCiAgICBsb2NhbCBFdmVudCA9IHNlbGY6Q2hhbm5lbEluZGV4KENoYW5uZWwsICJFdmVudCIpDQogICAgcmV0dXJuIEV2ZW50OkNvbm5lY3QoZnVuY3Rpb24oUmVjaXZlZFR5cGU6IHN0cmluZywgLi4uKQ0KICAgICAgICBpZiBSZWNpdmVkVHlwZSB+PSBUeXBlIHRoZW4gcmV0dXJuIGVuZA0KICAgICAgICBDYWxsYmFjayguLi4pDQogICAgZW5kKQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpBZGRUeXBlQ2FsbGJhY2tzKFR5cGVzOiB0YWJsZSkNCiAgICBmb3IgVHlwZTogc3RyaW5nLCBDYWxsYmFjayBpbiBuZXh0LCBUeXBlcyBkbw0KICAgICAgICBzZWxmOkFkZFR5cGVDYWxsYmFjayhUeXBlLCBDYWxsYmFjaykNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6Q3JlYXRlQ2hhbm5lbCgpOiBudW1iZXINCiAgICBsb2NhbCBDaGFubmVsSUQsIEV2ZW50ID0gc2VsZjpDcmVhdGVDb21tQ2hhbm5lbCgpDQoNCiAgICAtLS8vIENvbm5lY3QgR2V0Q29tbUNhbGxiYWNrIGZ1bmN0aW9uDQogICAgRXZlbnQuRXZlbnQ6Q29ubmVjdChmdW5jdGlvbihUeXBlOiBzdHJpbmcsIC4uLikNCiAgICAgICAgbG9jYWwgQ2FsbGJhY2sgPSBzZWxmOkdldENvbW1DYWxsYmFjayhUeXBlKQ0KICAgICAgICBpZiBDYWxsYmFjayB0aGVuDQogICAgICAgICAgICBDYWxsYmFjayguLi4pDQogICAgICAgIGVuZA0KICAgIGVuZCkNCg0KICAgIHJldHVybiBDaGFubmVsSUQsIEV2ZW50DQplbmQNCg0KTW9kdWxlOk1ha2VEZWJ1Z0lkSGFuZGxlcigpDQoNCnJldHVybiBNb2R1bGU=]]
}},d.Players local i=e:LoadLibraries(g)local j,k,l,m,n,o,p=i.Process,i.Hook,i.Ui
,i.Generation,i.Communication,i.Config,e:GetAsset('ProggyClean.ttf',true)local q
=e:CreateFont('ProggyClean',p)l:SetFontFile(q)j:CheckConfig(o)e:LoadModules(i,{
Modules=i,Services=d})local r,s=l:CreateMainWindow(),j:CheckIsSupported()if not
s then r:Close()return end local t,u=n:CreateChannel()n:AddCommCallback(
'QueueLog',function(...)l:QueueLog(...)end)n:AddCommCallback('Print',function(
...)l:ConsoleLog(...)end)local v=h.LocalPlayer m:SetSwapsCallback(function(w)w:
AddSwap(v,{String='LocalPlayer'})w:AddSwap(v.Character,{String='Character',
NextParent=v})end)l:CreateWindowContent(r)l:SetCommChannel(u)l:BeginLogService()
local w=e:MakeActorScript(g,t)k:LoadHooks(w,t)local x=l:AskUser{Title=
'Enable function patches?',Content={
[[On some executors, function patches can prevent common detections that executor has]]
,
[[By enabling this, it MAY trigger hook detections in some games, this is why you are asked.]]
,"If it doesn't work, rejoin and press 'No'",'',
'(This does not affect game functionality)'},Options={'Yes','No'}}=='Yes'u:Fire(
'BeginHooks',{PatchFunctions=x})



